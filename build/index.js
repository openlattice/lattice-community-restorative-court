/*!
 * 
 * @openlattice/lattice-community-restorative-court - v0.8.0
 *
 * https://github.com/openlattice/lattice-community-restorative-court
 *
 * Copyright (c) 2017-2021, OpenLattice, Inc. All rights reserved.
 *
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.communityrestorativecourt=t():e.communityrestorativecourt=t()}(self,(function(){return(()=>{var e={162:function(e,t,n){var r,a,s;a=[],void 0===(s="function"==typeof(r=function(){"use strict";function t(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}function r(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){c(r.response,t,n)},r.onerror=function(){console.error("could not download file")},r.send()}function a(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function s(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(n){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var i="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof n.g&&n.g.global===n.g?n.g:void 0,o=i.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),c=i.saveAs||("object"!=typeof window||window!==i?function(){}:"download"in HTMLAnchorElement.prototype&&!o?function(e,t,n){var o=i.URL||i.webkitURL,c=document.createElement("a");t=t||e.name||"download",c.download=t,c.rel="noopener","string"==typeof e?(c.href=e,c.origin===location.origin?s(c):a(c.href)?r(e,t,n):s(c,c.target="_blank")):(c.href=o.createObjectURL(e),setTimeout((function(){o.revokeObjectURL(c.href)}),4e4),setTimeout((function(){s(c)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,n,i){if(n=n||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(t(e,i),n);else if(a(e))r(e,n,i);else{var o=document.createElement("a");o.href=e,o.target="_blank",setTimeout((function(){s(o)}))}}:function(e,t,n,a){if((a=a||open("","_blank"))&&(a.document.title=a.document.body.innerText="downloading..."),"string"==typeof e)return r(e,t,n);var s="application/octet-stream"===e.type,c=/constructor/i.test(i.HTMLElement)||i.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||s&&c||o)&&"undefined"!=typeof FileReader){var l=new FileReader;l.onloadend=function(){var e=l.result;e=u?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=e:location=e,a=null},l.readAsDataURL(e)}else{var p=i.URL||i.webkitURL,d=p.createObjectURL(e);a?a.location=d:location.href=d,a=null,setTimeout((function(){p.revokeObjectURL(d)}),4e4)}});i.saveAs=c.saveAs=c,e.exports=c})?r.apply(t,a):r)||(e.exports=s)},460:function(e,t){var n,r,a;
/* @license
Papa Parse
v5.3.1
https://github.com/mholt/PapaParse
License: MIT
*/r=[],void 0===(a="function"==typeof(n=function e(){"use strict";var t="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==t?t:{},n=!t.document&&!!t.postMessage,r=n&&/blob:/i.test((t.location||{}).protocol),a={},s=0,i={parse:function(n,r){var o=(r=r||{}).dynamicTyping||!1;if(v(o)&&(r.dynamicTypingFunction=o,o={}),r.dynamicTyping=o,r.transform=!!v(r.transform)&&r.transform,r.worker&&i.WORKERS_SUPPORTED){var c=function(){if(!i.WORKERS_SUPPORTED)return!1;var n,r,o=(n=t.URL||t.webkitURL||null,r=e.toString(),i.BLOB_URL||(i.BLOB_URL=n.createObjectURL(new Blob(["(",r,")();"],{type:"text/javascript"})))),c=new t.Worker(o);return c.onmessage=E,c.id=s++,a[c.id]=c}();return c.userStep=r.step,c.userChunk=r.chunk,c.userComplete=r.complete,c.userError=r.error,r.step=v(r.step),r.chunk=v(r.chunk),r.complete=v(r.complete),r.error=v(r.error),delete r.worker,void c.postMessage({input:n,config:r,workerId:c.id})}var f=null;return i.NODE_STREAM_INPUT,"string"==typeof n?f=r.download?new u(r):new p(r):!0===n.readable&&v(n.read)&&v(n.on)?f=new d(r):(t.File&&n instanceof File||n instanceof Object)&&(f=new l(r)),f.stream(n)},unparse:function(e,t){var n=!1,r=!0,a=",",s="\r\n",o='"',c=o+o,u=!1,l=null,p=!1;!function(){if("object"==typeof t){if("string"!=typeof t.delimiter||i.BAD_DELIMITERS.filter((function(e){return-1!==t.delimiter.indexOf(e)})).length||(a=t.delimiter),("boolean"==typeof t.quotes||"function"==typeof t.quotes||Array.isArray(t.quotes))&&(n=t.quotes),"boolean"!=typeof t.skipEmptyLines&&"string"!=typeof t.skipEmptyLines||(u=t.skipEmptyLines),"string"==typeof t.newline&&(s=t.newline),"string"==typeof t.quoteChar&&(o=t.quoteChar),"boolean"==typeof t.header&&(r=t.header),Array.isArray(t.columns)){if(0===t.columns.length)throw new Error("Option columns is empty");l=t.columns}void 0!==t.escapeChar&&(c=t.escapeChar+o),"boolean"==typeof t.escapeFormulae&&(p=t.escapeFormulae)}}();var d=new RegExp(m(o),"g");if("string"==typeof e&&(e=JSON.parse(e)),Array.isArray(e)){if(!e.length||Array.isArray(e[0]))return f(null,e,u);if("object"==typeof e[0])return f(l||Object.keys(e[0]),e,u)}else if("object"==typeof e)return"string"==typeof e.data&&(e.data=JSON.parse(e.data)),Array.isArray(e.data)&&(e.fields||(e.fields=e.meta&&e.meta.fields),e.fields||(e.fields=Array.isArray(e.data[0])?e.fields:"object"==typeof e.data[0]?Object.keys(e.data[0]):[]),Array.isArray(e.data[0])||"object"==typeof e.data[0]||(e.data=[e.data])),f(e.fields||[],e.data||[],u);throw new Error("Unable to serialize unrecognized input");function f(e,t,n){var i="";"string"==typeof e&&(e=JSON.parse(e)),"string"==typeof t&&(t=JSON.parse(t));var o=Array.isArray(e)&&0<e.length,c=!Array.isArray(t[0]);if(o&&r){for(var u=0;u<e.length;u++)0<u&&(i+=a),i+=g(e[u],u);0<t.length&&(i+=s)}for(var l=0;l<t.length;l++){var p=o?e.length:t[l].length,d=!1,f=o?0===Object.keys(t[l]).length:0===t[l].length;if(n&&!o&&(d="greedy"===n?""===t[l].join("").trim():1===t[l].length&&0===t[l][0].length),"greedy"===n&&o){for(var m=[],E=0;E<p;E++){var h=c?e[E]:E;m.push(t[l][h])}d=""===m.join("").trim()}if(!d){for(var S=0;S<p;S++){0<S&&!f&&(i+=a);var I=o&&c?e[S]:S;i+=g(t[l][I],S)}l<t.length-1&&(!n||0<p&&!f)&&(i+=s)}}return i}function g(e,t){if(null==e)return"";if(e.constructor===Date)return JSON.stringify(e).slice(1,25);!0===p&&"string"==typeof e&&null!==e.match(/^[=+\-@].*$/)&&(e="'"+e);var r=e.toString().replace(d,c);return"boolean"==typeof n&&n||"function"==typeof n&&n(e,t)||Array.isArray(n)&&n[t]||function(e,t){for(var n=0;n<t.length;n++)if(-1<e.indexOf(t[n]))return!0;return!1}(r,i.BAD_DELIMITERS)||-1<r.indexOf(a)||" "===r.charAt(0)||" "===r.charAt(r.length-1)?o+r+o:r}}};if(i.RECORD_SEP=String.fromCharCode(30),i.UNIT_SEP=String.fromCharCode(31),i.BYTE_ORDER_MARK="\ufeff",i.BAD_DELIMITERS=["\r","\n",'"',i.BYTE_ORDER_MARK],i.WORKERS_SUPPORTED=!n&&!!t.Worker,i.NODE_STREAM_INPUT=1,i.LocalChunkSize=10485760,i.RemoteChunkSize=5242880,i.DefaultDelimiter=",",i.Parser=g,i.ParserHandle=f,i.NetworkStreamer=u,i.FileStreamer=l,i.StringStreamer=p,i.ReadableStreamStreamer=d,t.jQuery){var o=t.jQuery;o.fn.parse=function(e){var n=e.config||{},r=[];return this.each((function(e){if("INPUT"!==o(this).prop("tagName").toUpperCase()||"file"!==o(this).attr("type").toLowerCase()||!t.FileReader||!this.files||0===this.files.length)return!0;for(var a=0;a<this.files.length;a++)r.push({file:this.files[a],inputElem:this,instanceConfig:o.extend({},n)})})),a(),this;function a(){if(0!==r.length){var t,n,a,c,u=r[0];if(v(e.before)){var l=e.before(u.file,u.inputElem);if("object"==typeof l){if("abort"===l.action)return t="AbortError",n=u.file,a=u.inputElem,c=l.reason,void(v(e.error)&&e.error({name:t},n,a,c));if("skip"===l.action)return void s();"object"==typeof l.config&&(u.instanceConfig=o.extend(u.instanceConfig,l.config))}else if("skip"===l)return void s()}var p=u.instanceConfig.complete;u.instanceConfig.complete=function(e){v(p)&&p(e,u.file,u.inputElem),s()},i.parse(u.file,u.instanceConfig)}else v(e.complete)&&e.complete()}function s(){r.splice(0,1),a()}}}function c(e){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(e){var t=I(e);t.chunkSize=parseInt(t.chunkSize),e.step||e.chunk||(t.chunkSize=null),this._handle=new f(t),(this._handle.streamer=this)._config=t}.call(this,e),this.parseChunk=function(e,n){if(this.isFirstChunk&&v(this._config.beforeFirstChunk)){var a=this._config.beforeFirstChunk(e);void 0!==a&&(e=a)}this.isFirstChunk=!1,this._halted=!1;var s=this._partialLine+e;this._partialLine="";var o=this._handle.parse(s,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var c=o.meta.cursor;this._finished||(this._partialLine=s.substring(c-this._baseIndex),this._baseIndex=c),o&&o.data&&(this._rowCount+=o.data.length);var u=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(r)t.postMessage({results:o,workerId:i.WORKER_ID,finished:u});else if(v(this._config.chunk)&&!n){if(this._config.chunk(o,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);o=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(o.data),this._completeResults.errors=this._completeResults.errors.concat(o.errors),this._completeResults.meta=o.meta),this._completed||!u||!v(this._config.complete)||o&&o.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),u||o&&o.meta.paused||this._nextChunk(),o}this._halted=!0},this._sendError=function(e){v(this._config.error)?this._config.error(e):r&&this._config.error&&t.postMessage({workerId:i.WORKER_ID,error:e,finished:!1})}}function u(e){var t;(e=e||{}).chunkSize||(e.chunkSize=i.RemoteChunkSize),c.call(this,e),this._nextChunk=n?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(e){this._input=e,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(t=new XMLHttpRequest,this._config.withCredentials&&(t.withCredentials=this._config.withCredentials),n||(t.onload=y(this._chunkLoaded,this),t.onerror=y(this._chunkError,this)),t.open(this._config.downloadRequestBody?"POST":"GET",this._input,!n),this._config.downloadRequestHeaders){var e=this._config.downloadRequestHeaders;for(var r in e)t.setRequestHeader(r,e[r])}if(this._config.chunkSize){var a=this._start+this._config.chunkSize-1;t.setRequestHeader("Range","bytes="+this._start+"-"+a)}try{t.send(this._config.downloadRequestBody)}catch(e){this._chunkError(e.message)}n&&0===t.status&&this._chunkError()}},this._chunkLoaded=function(){4===t.readyState&&(t.status<200||400<=t.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:t.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(e){var t=e.getResponseHeader("Content-Range");return null===t?-1:parseInt(t.substring(t.lastIndexOf("/")+1))}(t),this.parseChunk(t.responseText)))},this._chunkError=function(e){var n=t.statusText||e;this._sendError(new Error(n))}}function l(e){var t,n;(e=e||{}).chunkSize||(e.chunkSize=i.LocalChunkSize),c.call(this,e);var r="undefined"!=typeof FileReader;this.stream=function(e){this._input=e,n=e.slice||e.webkitSlice||e.mozSlice,r?((t=new FileReader).onload=y(this._chunkLoaded,this),t.onerror=y(this._chunkError,this)):t=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var e=this._input;if(this._config.chunkSize){var a=Math.min(this._start+this._config.chunkSize,this._input.size);e=n.call(e,this._start,a)}var s=t.readAsText(e,this._config.encoding);r||this._chunkLoaded({target:{result:s}})},this._chunkLoaded=function(e){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(e.target.result)},this._chunkError=function(){this._sendError(t.error)}}function p(e){var t;c.call(this,e=e||{}),this.stream=function(e){return t=e,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var e,n=this._config.chunkSize;return n?(e=t.substring(0,n),t=t.substring(n)):(e=t,t=""),this._finished=!t,this.parseChunk(e)}}}function d(e){c.call(this,e=e||{});var t=[],n=!0,r=!1;this.pause=function(){c.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){c.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(e){this._input=e,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){r&&1===t.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),t.length?this.parseChunk(t.shift()):n=!0},this._streamData=y((function(e){try{t.push("string"==typeof e?e:e.toString(this._config.encoding)),n&&(n=!1,this._checkIsFinished(),this.parseChunk(t.shift()))}catch(e){this._streamError(e)}}),this),this._streamError=y((function(e){this._streamCleanUp(),this._sendError(e)}),this),this._streamEnd=y((function(){this._streamCleanUp(),r=!0,this._streamData("")}),this),this._streamCleanUp=y((function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)}),this)}function f(e){var t,n,r,a=Math.pow(2,53),s=-a,o=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,c=/^(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))$/,u=this,l=0,p=0,d=!1,f=!1,E=[],h={data:[],errors:[],meta:{}};if(v(e.step)){var S=e.step;e.step=function(t){if(h=t,N())x();else{if(x(),0===h.data.length)return;l+=t.data.length,e.preview&&l>e.preview?n.abort():(h.data=h.data[0],S(h,u))}}}function y(t){return"greedy"===e.skipEmptyLines?""===t.join("").trim():1===t.length&&0===t[0].length}function x(){if(h&&r&&(T("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+i.DefaultDelimiter+"'"),r=!1),e.skipEmptyLines)for(var t=0;t<h.data.length;t++)y(h.data[t])&&h.data.splice(t--,1);return N()&&function(){if(h)if(Array.isArray(h.data[0])){for(var t=0;N()&&t<h.data.length;t++)h.data[t].forEach(n);h.data.splice(0,1)}else h.data.forEach(n);function n(t,n){v(e.transformHeader)&&(t=e.transformHeader(t,n)),E.push(t)}}(),function(){if(!h||!e.header&&!e.dynamicTyping&&!e.transform)return h;function t(t,n){var r,a=e.header?{}:[];for(r=0;r<t.length;r++){var s=r,i=t[r];e.header&&(s=r>=E.length?"__parsed_extra":E[r]),e.transform&&(i=e.transform(i,s)),i=A(s,i),"__parsed_extra"===s?(a[s]=a[s]||[],a[s].push(i)):a[s]=i}return e.header&&(r>E.length?T("FieldMismatch","TooManyFields","Too many fields: expected "+E.length+" fields but parsed "+r,p+n):r<E.length&&T("FieldMismatch","TooFewFields","Too few fields: expected "+E.length+" fields but parsed "+r,p+n)),a}var n=1;return!h.data.length||Array.isArray(h.data[0])?(h.data=h.data.map(t),n=h.data.length):h.data=t(h.data,0),e.header&&h.meta&&(h.meta.fields=E),p+=n,h}()}function N(){return e.header&&0===E.length}function A(t,n){return r=t,e.dynamicTypingFunction&&void 0===e.dynamicTyping[r]&&(e.dynamicTyping[r]=e.dynamicTypingFunction(r)),!0===(e.dynamicTyping[r]||e.dynamicTyping)?"true"===n||"TRUE"===n||"false"!==n&&"FALSE"!==n&&(function(e){if(o.test(e)){var t=parseFloat(e);if(s<t&&t<a)return!0}return!1}(n)?parseFloat(n):c.test(n)?new Date(n):""===n?null:n):n;var r}function T(e,t,n,r){var a={type:e,code:t,message:n};void 0!==r&&(a.row=r),h.errors.push(a)}this.parse=function(a,s,o){var c=e.quoteChar||'"';if(e.newline||(e.newline=function(e,t){e=e.substring(0,1048576);var n=new RegExp(m(t)+"([^]*?)"+m(t),"gm"),r=(e=e.replace(n,"")).split("\r"),a=e.split("\n"),s=1<a.length&&a[0].length<r[0].length;if(1===r.length||s)return"\n";for(var i=0,o=0;o<r.length;o++)"\n"===r[o][0]&&i++;return i>=r.length/2?"\r\n":"\r"}(a,c)),r=!1,e.delimiter)v(e.delimiter)&&(e.delimiter=e.delimiter(a),h.meta.delimiter=e.delimiter);else{var u=function(t,n,r,a,s){var o,c,u,l;s=s||[",","\t","|",";",i.RECORD_SEP,i.UNIT_SEP];for(var p=0;p<s.length;p++){var d=s[p],f=0,m=0,E=0;u=void 0;for(var h=new g({comments:a,delimiter:d,newline:n,preview:10}).parse(t),S=0;S<h.data.length;S++)if(r&&y(h.data[S]))E++;else{var I=h.data[S].length;m+=I,void 0!==u?0<I&&(f+=Math.abs(I-u),u=I):u=I}0<h.data.length&&(m/=h.data.length-E),(void 0===c||f<=c)&&(void 0===l||l<m)&&1.99<m&&(c=f,o=d,l=m)}return{successful:!!(e.delimiter=o),bestDelimiter:o}}(a,e.newline,e.skipEmptyLines,e.comments,e.delimitersToGuess);u.successful?e.delimiter=u.bestDelimiter:(r=!0,e.delimiter=i.DefaultDelimiter),h.meta.delimiter=e.delimiter}var l=I(e);return e.preview&&e.header&&l.preview++,t=a,n=new g(l),h=n.parse(t,s,o),x(),d?{meta:{paused:!0}}:h||{meta:{paused:!1}}},this.paused=function(){return d},this.pause=function(){d=!0,n.abort(),t=v(e.chunk)?"":t.substring(n.getCharIndex())},this.resume=function(){u.streamer._halted?(d=!1,u.streamer.parseChunk(t,!0)):setTimeout(u.resume,3)},this.aborted=function(){return f},this.abort=function(){f=!0,n.abort(),h.meta.aborted=!0,v(e.complete)&&e.complete(h),t=""}}function m(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function g(e){var t,n=(e=e||{}).delimiter,r=e.newline,a=e.comments,s=e.step,o=e.preview,c=e.fastMode,u=t=void 0===e.quoteChar?'"':e.quoteChar;if(void 0!==e.escapeChar&&(u=e.escapeChar),("string"!=typeof n||-1<i.BAD_DELIMITERS.indexOf(n))&&(n=","),a===n)throw new Error("Comment character same as delimiter");!0===a?a="#":("string"!=typeof a||-1<i.BAD_DELIMITERS.indexOf(a))&&(a=!1),"\n"!==r&&"\r"!==r&&"\r\n"!==r&&(r="\n");var l=0,p=!1;this.parse=function(e,i,d){if("string"!=typeof e)throw new Error("Input must be a string");var f=e.length,g=n.length,E=r.length,h=a.length,S=v(s),I=[],y=[],x=[],N=l=0;if(!e)return j();if(c||!1!==c&&-1===e.indexOf(t)){for(var A=e.split(r),T=0;T<A.length;T++){if(x=A[T],l+=x.length,T!==A.length-1)l+=r.length;else if(d)return j();if(!a||x.substring(0,h)!==a){if(S){if(I=[],_(x.split(n)),k(),p)return j()}else _(x.split(n));if(o&&o<=T)return I=I.slice(0,o),j(!0)}}return j()}for(var C=e.indexOf(n,l),D=e.indexOf(r,l),R=new RegExp(m(u)+m(t),"g"),M=e.indexOf(t,l);;)if(e[l]!==t)if(a&&0===x.length&&e.substring(l,l+h)===a){if(-1===D)return j();l=D+E,D=e.indexOf(r,l),C=e.indexOf(n,l)}else if(-1!==C&&(C<D||-1===D))x.push(e.substring(l,C)),l=C+g,C=e.indexOf(n,l);else{if(-1===D)break;if(x.push(e.substring(l,D)),U(D+E),S&&(k(),p))return j();if(o&&I.length>=o)return j(!0)}else for(M=l,l++;;){if(-1===(M=e.indexOf(t,M+1)))return d||y.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:I.length,index:l}),w();if(M===f-1)return w(e.substring(l,M).replace(R,t));if(t!==u||e[M+1]!==u){if(t===u||0===M||e[M-1]!==u){-1!==C&&C<M+1&&(C=e.indexOf(n,M+1)),-1!==D&&D<M+1&&(D=e.indexOf(r,M+1));var b=O(-1===D?C:Math.min(C,D));if(e[M+1+b]===n){x.push(e.substring(l,M).replace(R,t)),e[l=M+1+b+g]!==t&&(M=e.indexOf(t,l)),C=e.indexOf(n,l),D=e.indexOf(r,l);break}var L=O(D);if(e.substring(M+1+L,M+1+L+E)===r){if(x.push(e.substring(l,M).replace(R,t)),U(M+1+L+E),C=e.indexOf(n,l),M=e.indexOf(t,l),S&&(k(),p))return j();if(o&&I.length>=o)return j(!0);break}y.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:I.length,index:l}),M++}}else M++}return w();function _(e){I.push(e),N=l}function O(t){var n=0;if(-1!==t){var r=e.substring(M+1,t);r&&""===r.trim()&&(n=r.length)}return n}function w(t){return d||(void 0===t&&(t=e.substring(l)),x.push(t),l=f,_(x),S&&k()),j()}function U(t){l=t,_(x),x=[],D=e.indexOf(r,l)}function j(e){return{data:I,errors:y,meta:{delimiter:n,linebreak:r,aborted:p,truncated:!!e,cursor:N+(i||0)}}}function k(){s(j()),I=[],y=[]}},this.abort=function(){p=!0},this.getCharIndex=function(){return l}}function E(e){var t=e.data,n=a[t.workerId],r=!1;if(t.error)n.userError(t.error,t.file);else if(t.results&&t.results.data){var s={abort:function(){r=!0,h(t.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:S,resume:S};if(v(n.userStep)){for(var i=0;i<t.results.data.length&&(n.userStep({data:t.results.data[i],errors:t.results.errors,meta:t.results.meta},s),!r);i++);delete t.results}else v(n.userChunk)&&(n.userChunk(t.results,s,t.file),delete t.results)}t.finished&&!r&&h(t.workerId,t.results)}function h(e,t){var n=a[e];v(n.userComplete)&&n.userComplete(t),n.terminate(),delete a[e]}function S(){throw new Error("Not implemented.")}function I(e){if("object"!=typeof e||null===e)return e;var t=Array.isArray(e)?[]:{};for(var n in e)t[n]=I(e[n]);return t}function y(e,t){return function(){e.apply(t,arguments)}}function v(e){return"function"==typeof e}return r&&(t.onmessage=function(e){var n=e.data;if(void 0===i.WORKER_ID&&n&&(i.WORKER_ID=n.workerId),"string"==typeof n.input)t.postMessage({workerId:i.WORKER_ID,results:i.parse(n.input,n.config),finished:!0});else if(t.File&&n.input instanceof File||n.input instanceof Object){var r=i.parse(n.input,n.config);r&&t.postMessage({workerId:i.WORKER_ID,results:r,finished:!0})}}),(u.prototype=Object.create(c.prototype)).constructor=u,(l.prototype=Object.create(c.prototype)).constructor=l,(p.prototype=Object.create(p.prototype)).constructor=p,(d.prototype=Object.create(c.prototype)).constructor=d,i})?n.apply(t,r):n)||(e.exports=a)}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var s=t[r]={exports:{}};return e[r].call(s.exports,s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};return(()=>{"use strict";n.r(r),n.d(r,{AppContainer:()=>pw,Dashboard:()=>rU,DashboardContainer:()=>aU,Downloads:()=>NU,DownloadsContainer:()=>AU});const e=require("react");var t=n.n(e);const a=require("connected-react-router/immutable"),s=require("react-redux"),i=require("immutable");var o=n.n(i);const c=require("@redux-saga/core");var u=n.n(c);const l=require("redux"),p=require("@babel/runtime-corejs3/helpers/defineProperty");var d=n.n(p);const f=require("lattice-auth"),m=require("redux-immutable"),g=require("lattice-utils"),E=require("redux-reqseq");var h,S,I="dashboard",y="staffCasesData",v="person",x="personCaseNeighborMap",N="personNeighborMap",A="profile",T="selectedCase",C="staffMembers",D="staffMemberByStatusEKID",R="charges",M="referral",b=g.ReduxConstants.APP,L=g.ReduxConstants.AUTH,_=(g.ReduxConstants.DATA,g.ReduxConstants.EDM),O=g.ReduxConstants.ENTITY_SETS,w=g.ReduxConstants.ENTITY_SETS_INDEX_MAP,U=g.ReduxConstants.ENTITY_TYPES,j=g.ReduxConstants.ENTITY_TYPES_INDEX_MAP,k=g.ReduxConstants.ERROR,P=(g.ReduxConstants.MEMBERS,g.ReduxConstants.ORGANIZATIONS,g.ReduxConstants.ORGS,g.ReduxConstants.PERMISSIONS,g.ReduxConstants.PROPERTY_TYPES),F=g.ReduxConstants.PROPERTY_TYPES_INDEX_MAP,q=g.ReduxConstants.REQUEST_STATE,G=(g.ReduxConstants.USERS,"dst"),K="src",z=((0,i.fromJS)({initial:!0}),h={},d()(h,k,!1),d()(h,q,E.RequestStates.STANDBY),h),B="propertyTypeIds",H="propertyFqnsByTypeId",V="appConfig",Y="entitySetId",Q="entitySetIds",W="fqnsByESID",J="match",Z="root",X={APP_CONFIG:[b,V,"config"],FQNS_BY_ESID:[b,W],MATCH:[b,J],ROOT:[b,Z]},$="INITIALIZE_APPLICATION",ee=(0,E.newRequestSequence)($),te=V,ne=Q,re=W,ae=J,se=Z;function ie(e,t){return ee.reducer(e,t,{REQUEST:function(){return e.setIn([$,q],E.RequestStates.PENDING)},SUCCESS:function(){return e.set(te,t.value.appConfig).set(ne,t.value.entitySetIdsByFqn).set(re,t.value.fqnsByESID).set(ae,t.value.match).set(se,t.value.root).setIn([$,q],E.RequestStates.SUCCESS)},FAILURE:function(){return e.setIn([$,q],E.RequestStates.FAILURE)}})}var oe=V,ce=Q,ue=W,le=J,pe=Z,de=(0,i.fromJS)((S={},d()(S,$,z),d()(S,oe,(0,i.Map)()),d()(S,ce,(0,i.Map)()),d()(S,ue,(0,i.Map)()),d()(S,le,{}),d()(S,pe,"/"),S));function fe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ee.case(t.type):return ie(e,t);default:return e}}const me=require("@babel/runtime-corejs3/core-js-stable/instance/concat");var ge=n.n(me);const Ee=require("lattice");var he=Ee.Models.FQN;const Se={AGENCY:he.of("app.agency"),APPEARS_IN:he.of("app.appearsin"),CHARGES:he.of("app.charges"),CHARGE_EVENT:he.of("app.chargeevent"),COMMUNICATION:he.of("app.communication"),CONTACTED_VIA:he.of("app.contactedvia"),CONTACT_ACTIVITY:he.of("app.contactactivity"),CONTACT_INFO:he.of("app.contactinformation"),CRC_CASE:he.of("app.crccase"),DA_CASE:he.of("app.dacase"),ELECTRONIC_SIGNATURE:he.of("app.electronicsignature"),EMPLOYEE:he.of("app.employee"),FORM:he.of("app.form"),HAS:he.of("app.has"),INCLUDES:he.of("app.includes"),IS:he.of("app.is"),LOCATED_AT:he.of("app.locatedat"),LOCATION:he.of("app.location"),OFFENSE:he.of("app.offense"),OFFICERS:he.of("app.officers"),ORGANIZATIONS:he.of("app.organizations"),PAYMENT:he.of("app.payment"),PEACEMAKER_STATUS:he.of("app.peacemakerstatus"),PEOPLE:he.of("app.people"),PERSON_DETAILS:he.of("app.persondetails"),RECORDED_BY:he.of("app.recordedby"),REFERRAL_REQUEST:he.of("app.referralrequest"),REGISTERED_FOR:he.of("app.registeredfor"),RELATED_TO:he.of("app.relatedto"),RESULTS_IN:he.of("app.resultsin"),SCREENED_WITH:he.of("app.screenedwith"),SENT_FROM:he.of("app.sentfrom"),SENT_TO:he.of("app.sentto"),SETTINGS:he.of("app.settings"),SIGNED_BY:he.of("app.signedby"),STAFF:he.of("app.staff"),STATUS:he.of("app.status"),SUBJECT_OF:he.of("app.subjectof"),WORKS_AT:he.of("app.worksat")};var Ie=Ee.Models.FQN;const ye={CASE_NUMBER:Ie.of("j.CaseNumberText"),CONTACT_DATETIME:Ie.of("ol.contactdatetime"),DATETIME_ADMINISTERED:Ie.of("ol.datetimeadministered"),DATETIME_COMPLETED:Ie.of("date.completeddatetime"),DATETIME_RECEIVED:Ie.of("datetime.received"),DATETIME_START:Ie.of("ol.datetimestart"),DA_CASE_NUMBER:Ie.of("justice.courtcasenumber"),DESCRIPTION:Ie.of("ol.description"),DOB:Ie.of("nc.PersonBirthDate"),DUE_DATE:Ie.of("ol.maximumdatetime"),EFFECTIVE_DATE:Ie.of("ol.effectivedate"),EMAIL:Ie.of("staff.email"),ETHNICITY:Ie.of("nc.PersonEthnicity"),GENDER:Ie.of("person.gender"),GENERAL_DATETIME:Ie.of("general.datetime"),GIVEN_NAME:Ie.of("nc.PersonGivenName"),ID:Ie.of("ol.id"),INTERESTS_AND_HOBBIES:Ie.of("ol.interestsandhobbies"),LANGUAGE:Ie.of("ol.language"),LOCATION_ADDRESS:Ie.of("location.address"),LOCATION_ADDRESS_LINE_2:Ie.of("location.addressline2"),LOCATION_CITY:Ie.of("location.city"),LOCATION_STATE:Ie.of("location.state"),LOCATION_ZIP:Ie.of("location.zip"),MIDDLE_NAME:Ie.of("nc.PersonMiddleName"),NAME:Ie.of("ol.name"),NOTES:Ie.of("ol.notes"),OL_DATE_TIME:Ie.of("ol.datetime"),OL_ID:Ie.of("ol.id"),ORGANIZATION_NAME:Ie.of("ol.organizationname"),OUTCOME:Ie.of("ol.outcome"),PHONE_NUMBER:Ie.of("contact.phonenumber"),PRONOUN:Ie.of("ol.pronoun"),RACE:Ie.of("nc.PersonRace"),RELIGION:Ie.of("ol.religion"),ROLE:Ie.of("ol.role"),SOURCE:Ie.of("ol.source"),STATUS:Ie.of("ol.status"),SURNAME:Ie.of("nc.PersonSurName"),TEXT:Ie.of("ol.text"),TYPE:Ie.of("ol.type")};var ve,xe,Ne=g.DataUtils.getPropertyValue,Ae=ye.GIVEN_NAME,Te=ye.SURNAME,Ce=function(e,t){var n,r=Ne(e,[Ae,0]),a=Ne(e,[Te,0]);return r||a?ge()(n="".concat(r," ")).call(n,a):t||""},De="ADD_STAFF",Re=(0,E.newRequestSequence)(De),Me="GET_CASES_STATS",be=(0,E.newRequestSequence)(Me),Le="GET_STAFF_CASES_DATA",_e=(0,E.newRequestSequence)(Le),Oe="SEARCH_CASES",we=(0,E.newRequestSequence)(Oe),Ue="Acceptance",je="Circle",ke="Closed",Pe="Intake",Fe="Referral",qe="Resolution",Ge=["Successful completion","Respondent - Declined CRC","Respondent – Did not Respond/ Make Contact with CRC","Terminated- Rearrest","Terminated- Non-compliant","Terminated- At Respondent request"],Ke="Attended",ze="Did not attend",Be="SELECT_INTAKE",He="SUBMIT_INTAKE",Ve=(0,E.newRequestSequence)(He),Ye="GET_AGENCIES",Qe=(0,E.newRequestSequence)(Ye),We="GET_CHARGES",Je=(0,E.newRequestSequence)(We),Ze="GET_CRC_PEOPLE",Xe=(0,E.newRequestSequence)(Ze),$e="GET_ORGANIZATIONS",et=(0,E.newRequestSequence)($e),tt="GET_REFERRAL_REQUEST_NEIGHBORS",nt=(0,E.newRequestSequence)(tt),rt="SELECT_REFERRAL_FORM",at="SUBMIT_REFERRAL_FORM",st=(0,E.newRequestSequence)(at),it="SELECT_REPAIR_HARM_AGREEMENT",ot="SUBMIT_REPAIR_HARM_AGREEMENT",ct=(0,E.newRequestSequence)(ot),ut="SELECT_RESTITUTION_REFERRAL",lt="SUBMIT_RESTITUTION_REFERRAL",pt=(0,E.newRequestSequence)(lt),dt="Referral Form",ft="Intake Form",mt="Repair Harm Agreement",gt="Restitution Referral",Et=(ve={},d()(ve,ft,(function(e){return{type:Be,value:e}})),d()(ve,dt,(function(e){return{type:rt,value:e}})),d()(ve,mt,(function(e){return{type:it,value:e}})),d()(ve,gt,(function(e){return{type:ut,value:e}})),ve),ht="Peacemaker",St="Respondent",It="Victim",yt="Case Manager",vt="crcStaff",xt="organizations",Nt="---",At=yt,Tt=St,Ct=(0,i.OrderedMap)({STAFF:"STAFF",PENDING_INTAKE:"PENDING INTAKE",PENDING_CIRCLE:"PENDING CIRCLE",RH_AGREEMENT_ESTABLISHED:"RH AGREEMENT ESTABLISHED",TOTAL_OPEN_CASES:"TOTAL OPEN CASES",TOTAL_SUCCESSFUL_CASES:"TOTAL SUCCESSFUL CASES",TOTAL_UNSUCCESSFUL_CASES:"TOTAL UNSUCCESSFUL CASES"}),Dt="No Contact Made",Rt="Open Cases",Mt="Respondent Declined",bt="Successful Cases",Lt="Terminated Cases",_t="Total Cases",Ot="Case Number",wt=(0,i.OrderedMap)((xe={},d()(xe,Ot,Ot),d()(xe,Tt,Tt),d()(xe,At,At),xe)),Ut=y;function jt(e,t){return Re.reducer(e,t,{REQUEST:function(){return e.setIn([De,q],E.RequestStates.PENDING).setIn([De,t.id],t)},SUCCESS:function(){var n,r=Ce(t.value),a=(0,i.Map)((n={},d()(n,Ct.get("STAFF"),r),d()(n,Ct.get("PENDING_INTAKE"),0),d()(n,Ct.get("PENDING_CIRCLE"),0),d()(n,Ct.get("RH_AGREEMENT_ESTABLISHED"),0),d()(n,Ct.get("TOTAL_OPEN_CASES"),0),d()(n,Ct.get("TOTAL_SUCCESSFUL_CASES"),0),d()(n,Ct.get("TOTAL_UNSUCCESSFUL_CASES"),0),n)),s=e.get(Ut);return s=s.insert(s.count()-2,a),e.set(Ut,s).setIn([De,q],E.RequestStates.SUCCESS)},FAILURE:function(){return e.setIn([De,q],E.RequestStates.FAILURE)},FINALLY:function(){return e.deleteIn([De,t.id])}})}function kt(e,t){return be.reducer(e,t,{REQUEST:function(){return e.setIn([Me,q],E.RequestStates.PENDING).setIn([Me,t.id],t)},SUCCESS:function(){return e.set("casesStats",t.value).setIn([Me,q],E.RequestStates.SUCCESS)},FAILURE:function(){return e.setIn([Me,q],E.RequestStates.FAILURE)},FINALLY:function(){return e.deleteIn([Me,t.id])}})}function Pt(e,t){return _e.reducer(e,t,{REQUEST:function(){return e.setIn([Le,q],E.RequestStates.PENDING).setIn([Le,t.id],t)},SUCCESS:function(){return e.set("staffCasesData",t.value).setIn([Le,q],E.RequestStates.SUCCESS)},FAILURE:function(){return e.setIn([Le,q],E.RequestStates.FAILURE)},FINALLY:function(){return e.deleteIn([Le,t.id])}})}function Ft(e,t){return we.reducer(e,t,{REQUEST:function(){return e.setIn([Oe,q],E.RequestStates.PENDING).setIn([Oe,t.id],t)},SUCCESS:function(){return e.set("searchedCasesData",t.value.searchedCasesData).set("totalCasesHits",t.value.totalHits).setIn([Oe,q],E.RequestStates.SUCCESS)},FAILURE:function(){return e.setIn([Oe,q],E.RequestStates.FAILURE)},FINALLY:function(){return e.deleteIn([Oe,t.id])}})}var qt="RESET_REQUEST_STATE",Gt=function(e){return{path:e,type:qt}};const Kt=require("@babel/runtime-corejs3/helpers/toConsumableArray");var zt,Bt=n.n(Kt);function Ht(e,t){var n,r,a=t.path;return a&&e.hasIn(a)?e.setIn(ge()(n=[]).call(n,Bt()(a),[k]),!1).setIn(ge()(r=[]).call(r,Bt()(a),[q]),E.RequestStates.STANDBY):e}var Vt=(0,i.fromJS)((zt={},d()(zt,De,z),d()(zt,Me,z),d()(zt,Le,z),d()(zt,Oe,z),d()(zt,"casesStats",(0,i.Map)()),d()(zt,"searchedCasesData",(0,i.List)()),d()(zt,"staffCasesData",(0,i.List)()),d()(zt,"totalCasesHits",0),zt));function Yt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case qt:return Ht(e,t);case Re.case(t.type):return jt(e,t);case be.case(t.type):return kt(e,t);case _e.case(t.type):return Pt(e,t);case we.case(t.type):return Ft(e,t);default:return e}}var Qt,Wt="DOWNLOAD_CASES",Jt=(0,E.newRequestSequence)(Wt),Zt="DOWNLOAD_PEACEMAKERS",Xt=(0,E.newRequestSequence)(Zt),$t="DOWNLOAD_REFERRALS",en=(0,E.newRequestSequence)($t);function tn(e,t){return Jt.reducer(e,t,{REQUEST:function(){return e.setIn([Wt,q],E.RequestStates.PENDING).setIn([Wt,t.id],t)},SUCCESS:function(){return e.setIn([Wt,q],E.RequestStates.SUCCESS)},FAILURE:function(){return e.setIn([Wt,q],E.RequestStates.FAILURE)},FINALLY:function(){return e.deleteIn([Wt,t.id])}})}function nn(e,t){return Xt.reducer(e,t,{REQUEST:function(){return e.setIn([Zt,q],E.RequestStates.PENDING).setIn([Zt,t.id],t)},SUCCESS:function(){return e.setIn([Zt,q],E.RequestStates.SUCCESS)},FAILURE:function(){return e.setIn([Zt,q],E.RequestStates.FAILURE)},FINALLY:function(){return e.deleteIn([Zt,t.id])}})}function rn(e,t){return en.reducer(e,t,{REQUEST:function(){return e.setIn([$t,q],E.RequestStates.PENDING).setIn([$t,t.id],t)},SUCCESS:function(){return e.setIn([$t,q],E.RequestStates.SUCCESS)},FAILURE:function(){return e.setIn([$t,q],E.RequestStates.FAILURE)},FINALLY:function(){return e.deleteIn([$t,t.id])}})}var an=(0,i.fromJS)((Qt={},d()(Qt,Wt,z),d()(Qt,Zt,z),d()(Qt,$t,z),Qt));function sn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:an,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case qt:return Ht(e,t);case Jt.case(t.type):return tn(e,t);case Xt.case(t.type):return nn(e,t);case en.case(t.type):return rn(e,t);default:return e}}var on;function cn(e,t){var n=t.value;return e.set("selectedIntake",n)}function un(e,t){return Ve.reducer(e,t,{REQUEST:function(){return e.setIn([He,q],E.RequestStates.PENDING).setIn([He,t.id],t)},SUCCESS:function(){return e.setIn([He,q],E.RequestStates.SUCCESS)},FAILURE:function(){return e.setIn([He,q],E.RequestStates.FAILURE)},FINALLY:function(){return e.deleteIn([He,t.id])}})}var ln=(0,i.fromJS)((on={},d()(on,He,z),d()(on,"selectedIntake",(0,i.Map)()),on));function pn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ln,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case qt:return Ht(e,t);case Be:return cn(e,t);case Ve.case(t.type):return un(e,t);default:return e}}var dn,fn="ADD_PEACEMAKER_INFORMATION",mn=(0,E.newRequestSequence)(fn),gn="EDIT_PEACEMAKER_INFORMATION",En=(0,E.newRequestSequence)(gn);function hn(e,t){return mn.reducer(e,t,{REQUEST:function(){return e.setIn([fn,q],E.RequestStates.PENDING).setIn([fn,t.id],t)},SUCCESS:function(){return e.setIn([fn,q],E.RequestStates.SUCCESS)},FAILURE:function(){return e.setIn([fn,q],E.RequestStates.FAILURE)},FINALLY:function(){return e.deleteIn([fn,t.id])}})}function Sn(e,t){return En.reducer(e,t,{REQUEST:function(){return e.setIn([gn,q],E.RequestStates.PENDING).setIn([gn,t.id],t)},SUCCESS:function(){return e.setIn([gn,q],E.RequestStates.SUCCESS)},FAILURE:function(){return e.setIn([gn,q],E.RequestStates.FAILURE)},FINALLY:function(){return e.deleteIn([gn,t.id])}})}var In=(0,i.fromJS)((dn={},d()(dn,fn,z),d()(dn,gn,z),dn));function yn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:In,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case mn.case(t.type):return hn(e,t);case En.case(t.type):return Sn(e,t);default:return e}}const vn=require("@babel/runtime-corejs3/core-js-stable/instance/find");var xn=n.n(vn),Nn="ADD_CASE_STATUS",An=(0,E.newRequestSequence)(Nn),Tn="ADD_CONTACT_ACTIVITY",Cn=(0,E.newRequestSequence)(Tn),Dn="ADD_PERSON_OR_ORG_TO_CASE",Rn=(0,E.newRequestSequence)(Dn),Mn="CLEAR_SEARCHED_ORGANIZATIONS",bn="CLEAR_SEARCHED_PEOPLE",Ln="EDIT_ADDRESS",_n=(0,E.newRequestSequence)(Ln),On="EDIT_CONTACT",wn=(0,E.newRequestSequence)(On),Un="EDIT_CRC_CASE",jn=(0,E.newRequestSequence)(Un),kn="EDIT_PERSON",Pn=(0,E.newRequestSequence)(kn),Fn="EDIT_PERSON_DETAILS",qn=(0,E.newRequestSequence)(Fn),Gn="GET_PERSON",Kn=(0,E.newRequestSequence)(Gn),zn="GET_PERSON_CASE_NEIGHBORS",Bn=(0,E.newRequestSequence)(zn),Hn="GET_PERSON_NEIGHBORS",Vn=(0,E.newRequestSequence)(Hn),Yn="GET_STAFF",Qn=(0,E.newRequestSequence)(Yn),Wn="LOAD_PROFILE",Jn=(0,E.newRequestSequence)(Wn),Zn="REMOVE_PERSON_FROM_CASE",Xn=(0,E.newRequestSequence)(Zn),$n="SEARCH_ORGANIZATIONS",er=(0,E.newRequestSequence)($n),tr="SEARCH_PEOPLE",nr=(0,E.newRequestSequence)(tr),rr="SELECT_CASE",ar="SUBMIT_ADDRESS",sr=(0,E.newRequestSequence)(ar),ir="SUBMIT_CONTACT",or=(0,E.newRequestSequence)(ir),cr=g.DataUtils.getEntityKeyId,ur=Se.STATUS,lr=x,pr=D;function dr(e,t){return An.reducer(e,t,{REQUEST:function(){return e.setIn([Nn,q],E.RequestStates.PENDING).setIn([Nn,t.id],t)},SUCCESS:function(){var n=t.value,r=n.caseEKID,a=n.newStatus,s=n.selectedStaffEKID,o=e.get(lr),c=o.getIn([ur,r],(0,i.List)()).push(a);o=o.setIn([ur,r],c);var u=e.get("staffMembers"),l=xn()(u).call(u,(function(e){return cr(e)===s})),p=e.get(pr,(0,i.Map)()).set(cr(a),l);return e.set(lr,o).set(pr,p).setIn([Nn,q],E.RequestStates.SUCCESS)},FAILURE:function(){return e.setIn([Nn,q],E.RequestStates.FAILURE)},FINALLY:function(){return e.deleteIn([Nn,t.id],t)}})}var fr="personNeighborMap",mr="profile",gr=Se.CONTACT_ACTIVITY;function Er(e,t){return Cn.reducer(e,t,{REQUEST:function(){return e.setIn([Tn,q],E.RequestStates.PENDING).setIn([Tn,t.id],t)},SUCCESS:function(){var n=t.value,r=e.get(fr).update(gr,(0,i.List)(),(function(e){return e.push(n)}));return e.set(fr,r).setIn([Tn,q],E.RequestStates.SUCCESS)},FAILURE:function(){return e.setIn([Tn,q],E.RequestStates.FAILURE)},FINALLY:function(){return e.deleteIn([Tn,t.id],t)}})}var hr=N,Sr=Se.COMMUNICATION,Ir=Se.FORM,yr=Se.PEACEMAKER_STATUS,vr=Se.PERSON_DETAILS;function xr(e,t){return mn.reducer(e,t,{REQUEST:function(){return e.setIn([fn,q],E.RequestStates.PENDING).setIn([fn,t.id],t)},SUCCESS:function(){var n=t.value,r=n.newCommunication,a=n.newForm,s=n.newPeacemakerStatus,o=n.newPersonDetails,c=e.get(hr).update(Ir,(0,i.List)(),(function(e){return e.push(a)})).update(Sr,(0,i.List)(),(function(e){return e.push(r)})).update(vr,(0,i.List)(),(function(e){return e.push(o)})).update(yr,(0,i.List)(),(function(e){return e.push(s)}));return e.set(hr,c).setIn([fn,q],E.RequestStates.SUCCESS)},FAILURE:function(){return e.setIn([fn,q],E.RequestStates.FAILURE)},FINALLY:function(){return e.deleteIn([fn,t.id])}})}var Nr=ye.ROLE,Ar=x;function Tr(e,t){return Rn.reducer(e,t,{REQUEST:function(){return e.setIn([Dn,q],E.RequestStates.PENDING).setIn([Dn,t.id],t)},SUCCESS:function(){var n=t.value,r=n.caseEKID,a=n.person,s=n.role,o=e.getIn([Ar,Nr,r],(0,i.Map)());o=o.update(s,(0,i.List)(),(function(e){return e.push(a)}));var c=e.get(Ar).setIn([Nr,r],o);return e.set(Ar,c).setIn([Dn,q],E.RequestStates.SUCCESS)},FAILURE:function(){return e.setIn([Dn,q],E.RequestStates.FAILURE)},FINALLY:function(){return e.deleteIn([Dn,t.id])}})}var Cr=C;function Dr(e,t){return Re.reducer(e,t,{REQUEST:function(){return e.setIn([De,q],E.RequestStates.PENDING).setIn([De,t.id],t)},SUCCESS:function(){var n=e.get(Cr).push(t.value);return e.set(Cr,n).setIn([De,q],E.RequestStates.SUCCESS)},FAILURE:function(){return e.setIn([De,q],E.RequestStates.FAILURE)},FINALLY:function(){return e.deleteIn([De,t.id])}})}function Rr(e){return e.set("searchedOrganizations",(0,i.List)())}function Mr(e){return e.set("searchedPeople",(0,i.List)())}var br=N,Lr=Se.LOCATION;function _r(e,t){return _n.reducer(e,t,{REQUEST:function(){return e.setIn([Ln,q],E.RequestStates.PENDING).setIn([Ln,t.id],t)},SUCCESS:function(){var n=e.get(br).updateIn([Lr,0],(0,i.Map)(),(function(e){return e.merge(t.value)}));return e.set(br,n).setIn([Ln,q],E.RequestStates.SUCCESS)},FAILURE:function(){return e.setIn([Ln,q],E.RequestStates.FAILURE)},FINALLY:function(){return e.deleteIn([Ln,t.id])}})}const Or=require("@babel/runtime-corejs3/core-js-stable/instance/find-index");var wr=n.n(Or),Ur=N,jr=T,kr=Se.CRC_CASE,Pr=g.DataUtils.getEntityKeyId;function Fr(e,t){return jn.reducer(e,t,{REQUEST:function(){return e.setIn([Un,q],E.RequestStates.PENDING).setIn([Un,t.id],t)},SUCCESS:function(){var n,r=t.value,a=r.crcCaseEKID,s=r.newCRCCase,o=wr()(n=e.getIn([Ur,kr],(0,i.List)())).call(n,(function(e){return Pr(e)===a}));return e.set(jr,e.get(jr).merge(s)).updateIn([Ur,kr,o],(function(e){return e.merge(s)})).setIn([Un,q],E.RequestStates.SUCCESS)},FAILURE:function(){return e.setIn([Un,q],E.RequestStates.FAILURE)},FINALLY:function(){return e.deleteIn([Un,t.id])}})}var qr=N,Gr=Se.CONTACT_INFO,Kr=g.DataUtils.getEntityKeyId;function zr(e,t){return wn.reducer(e,t,{REQUEST:function(){return e.setIn([On,q],E.RequestStates.PENDING).setIn([On,t.id],t)},SUCCESS:function(){var n=e.getIn(qr),r=n.get(Gr,(0,i.List)()),a=wr()(r).call(r,(function(e){return Kr(t.value)===Kr(e)}));return-1!==a&&(r=r.update(a,(0,i.Map)(),r.get(a).merge(t.value))),n=n.set(Gr,r),e.set(qr,n).setIn([On,q],E.RequestStates.SUCCESS)},FAILURE:function(){return e.setIn([On,q],E.RequestStates.FAILURE)},FINALLY:function(){return e.deleteIn([On,t.id])}})}var Br=N,Hr=Se.COMMUNICATION,Vr=Se.FORM,Yr=Se.PEACEMAKER_STATUS,Qr=Se.PERSON_DETAILS,Wr=ye.NAME,Jr=g.DataUtils.getPropertyValue;function Zr(e,t){return En.reducer(e,t,{REQUEST:function(){return e.setIn([gn,q],E.RequestStates.PENDING).setIn([gn,t.id],t)},SUCCESS:function(){var n=t.value,r=n.newCommunication,a=n.newForm,s=n.newPeacemakerStatus,o=n.newPersonDetails,c=e.get(Br),u=c.get(Vr,(0,i.List)()),l=wr()(u).call(u,(function(e){return"Peacemaker Information Form"===Jr(e,[Wr,0])}));return-1!==l&&(c=c.updateIn([Vr,l],(0,i.Map)(),(function(e){return e.merge(a)}))),c=(c=c.updateIn([Hr,0],(0,i.Map)(),(function(e){return e.merge(r)}))).updateIn([Qr,0],(0,i.Map)(),(function(e){return e.merge(o)})),s.isEmpty()||(c=c.update(Yr,(0,i.List)(),(function(e){return e.push(s)}))),e.set(Br,c).setIn([gn,q],E.RequestStates.SUCCESS)},FAILURE:function(){return e.setIn([gn,q],E.RequestStates.FAILURE)},FINALLY:function(){return e.deleteIn([gn,t.id])}})}var Xr=N,$r=Se.PERSON_DETAILS;function ea(e,t){return qn.reducer(e,t,{REQUEST:function(){return e.setIn([Fn,q],E.RequestStates.PENDING).setIn([Fn,t.id],t)},SUCCESS:function(){var n=e.get(Xr).updateIn([$r,0],(0,i.Map)(),(function(e){return e.merge(t.value)}));return e.set(Xr,n).setIn([Fn,q],E.RequestStates.SUCCESS)},FAILURE:function(){return e.setIn([Fn,q],E.RequestStates.FAILURE)},FINALLY:function(){return e.deleteIn([Fn,t.id])}})}var ta=v;function na(e,t){return Pn.reducer(e,t,{REQUEST:function(){return e.setIn([kn,q],E.RequestStates.PENDING).setIn([kn,t.id],t)},SUCCESS:function(){return e.set(ta,e.get(ta).merge(t.value)).setIn([kn,q],E.RequestStates.SUCCESS)},FAILURE:function(){return e.setIn([kn,q],E.RequestStates.FAILURE)},FINALLY:function(){return e.deleteIn([kn,t.id])}})}function ra(e,t){return Bn.reducer(e,t,{REQUEST:function(){return e.setIn([zn,q],E.RequestStates.PENDING).setIn([zn,t.id],t)},SUCCESS:function(){return e.set("personCaseNeighborMap",t.value.personCaseNeighborMap).set("staffMemberByStatusEKID",t.value.staffMemberByStatusEKID).setIn([zn,q],E.RequestStates.SUCCESS)},FAILURE:function(){return e.setIn([zn,q],E.RequestStates.FAILURE)},FINALLY:function(){return e.deleteIn([zn,t.id],t)}})}function aa(e,t){return Vn.reducer(e,t,{REQUEST:function(){return e.setIn([Hn,q],E.RequestStates.PENDING).setIn([Hn,t.id],t)},SUCCESS:function(){return e.set("personNeighborMap",t.value).setIn([Hn,q],E.RequestStates.SUCCESS)},FAILURE:function(){return e.setIn([Hn,q],E.RequestStates.FAILURE)},FINALLY:function(){return e.deleteIn([Hn,t.id],t)}})}function sa(e,t){return Kn.reducer(e,t,{REQUEST:function(){return e.setIn([Gn,q],E.RequestStates.PENDING).setIn([Gn,t.id],t)},SUCCESS:function(){return e.set("person",t.value).setIn([Gn,q],E.RequestStates.SUCCESS)},FAILURE:function(){return e.setIn([Gn,q],E.RequestStates.FAILURE)},FINALLY:function(){return e.deleteIn([Gn,t.id],t)}})}function ia(e,t){return Qn.reducer(e,t,{REQUEST:function(){return e.setIn([Yn,q],E.RequestStates.PENDING).setIn([Yn,t.id],t)},SUCCESS:function(){return e.set("staffMembers",t.value).setIn([Yn,q],E.RequestStates.SUCCESS)},FAILURE:function(){return e.setIn([Yn,q],E.RequestStates.FAILURE)},FINALLY:function(){return e.deleteIn([Yn,t.id],t)}})}function oa(e,t){return Jn.reducer(e,t,{REQUEST:function(){return e.setIn([Wn,q],E.RequestStates.PENDING).setIn([Wn,t.id],t)},SUCCESS:function(){return e.setIn([Wn,q],E.RequestStates.SUCCESS)},FAILURE:function(){return e.setIn([Wn,q],E.RequestStates.FAILURE)},FINALLY:function(){return e.deleteIn([Wn,t.id],t)}})}var ca=ye.ROLE,ua=x,la=g.DataUtils.getEntityKeyId;function pa(e,t){return Xn.reducer(e,t,{REQUEST:function(){return e.setIn([Zn,q],E.RequestStates.PENDING).setIn([Zn,t.id],t)},SUCCESS:function(){var n=t.value,r=n.caseEKID,a=n.personEKID,s=n.personRole,o=e.getIn([ua,ca,r,s],(0,i.List)()),c=wr()(o).call(o,(function(e){return la(e)===a}));o=o.delete(c);var u=e.get(ua).setIn([ca,r,s],o);return e.set(ua,u).setIn([Zn,q],E.RequestStates.SUCCESS)},FAILURE:function(){return e.setIn([Zn,q],E.RequestStates.FAILURE)},FINALLY:function(){return e.deleteIn([Zn,t.id])}})}function da(e,t){return er.reducer(e,t,{REQUEST:function(){return e.setIn([$n,q],E.RequestStates.PENDING).setIn([$n,t.id],t)},SUCCESS:function(){return e.set("searchedOrganizations",t.value.searchedOrganizations).set("totalHits",t.value.totalHits).setIn([$n,q],E.RequestStates.SUCCESS)},FAILURE:function(){return e.setIn([$n,q],E.RequestStates.FAILURE)},FINALLY:function(){return e.deleteIn([$n,t.id])}})}function fa(e,t){return nr.reducer(e,t,{REQUEST:function(){return e.setIn([tr,q],E.RequestStates.PENDING).setIn([tr,t.id],t)},SUCCESS:function(){return e.set("searchedPeople",t.value.searchedPeople).set("totalHits",t.value.totalHits).setIn([tr,q],E.RequestStates.SUCCESS)},FAILURE:function(){return e.setIn([tr,q],E.RequestStates.FAILURE)},FINALLY:function(){return e.deleteIn([tr,t.id])}})}function ma(e,t){return e.set("selectedCase",t.value)}var ga=N,Ea=Se.LOCATION;function ha(e,t){return sr.reducer(e,t,{REQUEST:function(){return e.setIn([ar,q],E.RequestStates.PENDING).setIn([ar,t.id],t)},SUCCESS:function(){var n=e.get(ga).update(Ea,(0,i.List)(),(function(e){return e.push(t.value)}));return e.set(ga,n).setIn([ar,q],E.RequestStates.SUCCESS)},FAILURE:function(){return e.setIn([ar,q],E.RequestStates.FAILURE)},FINALLY:function(){return e.deleteIn([ar,t.id])}})}var Sa,Ia=N,ya=Se.CONTACT_INFO;function va(e,t){return or.reducer(e,t,{REQUEST:function(){return e.setIn([ir,q],E.RequestStates.PENDING).setIn([ir,t.id],t)},SUCCESS:function(){var n=e.get(Ia).update(ya,(0,i.List)(),(function(e){return e.push(t.value)}));return e.set(Ia,n).setIn([ir,q],E.RequestStates.SUCCESS)},FAILURE:function(){return e.setIn([ir,q],E.RequestStates.FAILURE)},FINALLY:function(){return e.deleteIn([ir,t.id])}})}var xa=(0,i.fromJS)((Sa={},d()(Sa,Nn,z),d()(Sa,Tn,z),d()(Sa,fn,z),d()(Sa,Dn,z),d()(Sa,De,z),d()(Sa,gn,z),d()(Sa,Ln,z),d()(Sa,On,z),d()(Sa,Un,z),d()(Sa,kn,z),d()(Sa,Fn,z),d()(Sa,Gn,z),d()(Sa,zn,z),d()(Sa,Hn,z),d()(Sa,Yn,z),d()(Sa,Wn,z),d()(Sa,Zn,z),d()(Sa,$n,z),d()(Sa,tr,z),d()(Sa,ar,z),d()(Sa,ir,z),d()(Sa,"person",(0,i.Map)()),d()(Sa,"personCaseNeighborMap",(0,i.Map)()),d()(Sa,"personNeighborMap",(0,i.Map)()),d()(Sa,"searchedOrganizations",(0,i.List)()),d()(Sa,"searchedPeople",(0,i.List)()),d()(Sa,"selectedCase",(0,i.Map)()),d()(Sa,"staffMembers",(0,i.List)()),d()(Sa,"staffMemberByStatusEKID",(0,i.Map)()),d()(Sa,"totalHits",0),Sa));function Na(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xa,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Mn:return Rr(e);case bn:return Mr(e);case qt:return Ht(e,t);case rr:return ma(e,t);case An.case(t.type):return dr(e,t);case Cn.case(t.type):return Er(e,t);case mn.case(t.type):return xr(e,t);case Rn.case(t.type):return Tr(e,t);case Re.case(t.type):return Dr(e,t);case En.case(t.type):return Zr(e,t);case _n.case(t.type):return _r(e,t);case wn.case(t.type):return zr(e,t);case jn.case(t.type):return Fr(e,t);case Pn.case(t.type):return na(e,t);case qn.case(t.type):return ea(e,t);case Kn.case(t.type):return sa(e,t);case Bn.case(t.type):return ra(e,t);case Vn.case(t.type):return aa(e,t);case Qn.case(t.type):return ia(e,t);case Jn.case(t.type):return oa(e,t);case Xn.case(t.type):return pa(e,t);case er.case(t.type):return da(e,t);case nr.case(t.type):return fa(e,t);case sr.case(t.type):return ha(e,t);case or.case(t.type):return va(e,t);default:return e}}function Aa(e,t){return Qe.reducer(e,t,{REQUEST:function(){return e.setIn([Ye,q],E.RequestStates.PENDING).setIn([Ye,t.id],t)},SUCCESS:function(){return e.set("agencies",t.value).setIn([Ye,q],E.RequestStates.SUCCESS)},FAILURE:function(){return e.setIn([Ye,q],E.RequestStates.FAILURE)},FINALLY:function(){return e.deleteIn([Ye,t.id])}})}function Ta(e,t){return Xe.reducer(e,t,{REQUEST:function(){return e.setIn([Ze,q],E.RequestStates.PENDING).setIn([Ze,t.id],t)},SUCCESS:function(){return e.set("crcPeople",t.value).setIn([Ze,q],E.RequestStates.SUCCESS)},FAILURE:function(){return e.setIn([Ze,q],E.RequestStates.FAILURE)},FINALLY:function(){return e.deleteIn([Ze,t.id])}})}function Ca(e,t){return Je.reducer(e,t,{REQUEST:function(){return e.setIn([We,q],E.RequestStates.PENDING).setIn([We,t.id],t)},SUCCESS:function(){return e.set("charges",t.value).setIn([We,q],E.RequestStates.SUCCESS)},FAILURE:function(){return e.setIn([We,q],E.RequestStates.FAILURE)},FINALLY:function(){return e.deleteIn([We,t.id])}})}function Da(e,t){return et.reducer(e,t,{REQUEST:function(){return e.setIn([$e,q],E.RequestStates.PENDING).setIn([$e,t.id],t)},SUCCESS:function(){return e.set("crcOrganizations",t.value).setIn([$e,q],E.RequestStates.SUCCESS)},FAILURE:function(){return e.setIn([$e,q],E.RequestStates.FAILURE)},FINALLY:function(){return e.deleteIn([$e,t.id])}})}function Ra(e,t){return nt.reducer(e,t,{REQUEST:function(){return e.setIn([tt,q],E.RequestStates.PENDING).setIn([tt,t.id],t)},SUCCESS:function(){return e.set("referralRequestNeighborMap",t.value).setIn([tt,q],E.RequestStates.SUCCESS)},FAILURE:function(){return e.setIn([tt,q],E.RequestStates.FAILURE)},FINALLY:function(){return e.deleteIn([tt,t.id])}})}var Ma;function ba(e,t){var n=t.value;return e.set("selectedReferralForm",n)}function La(e,t){return st.reducer(e,t,{REQUEST:function(){return e.setIn([at,q],E.RequestStates.PENDING).setIn([at,t.id],t)},SUCCESS:function(){return e.setIn([at,q],E.RequestStates.SUCCESS)},FAILURE:function(){return e.setIn([at,q],E.RequestStates.FAILURE)},FINALLY:function(){return e.deleteIn([at,t.id])}})}var _a=(0,i.fromJS)((Ma={},d()(Ma,Ye,z),d()(Ma,We,z),d()(Ma,Ze,z),d()(Ma,$e,z),d()(Ma,tt,z),d()(Ma,at,z),d()(Ma,"agencies",(0,i.List)()),d()(Ma,"charges",(0,i.List)()),d()(Ma,"crcOrganizations",(0,i.List)()),d()(Ma,"crcPeople",(0,i.List)()),d()(Ma,"referralRequestNeighborMap",(0,i.Map)()),d()(Ma,"selectedReferralForm",(0,i.Map)()),Ma));function Oa(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_a,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case qt:return Ht(e,t);case rt:return ba(e,t);case Qe.case(t.type):return Aa(e,t);case Je.case(t.type):return Ca(e,t);case Xe.case(t.type):return Ta(e,t);case et.case(t.type):return Da(e,t);case nt.case(t.type):return Ra(e,t);case st.case(t.type):return La(e,t);default:return e}}var wa;function Ua(e,t){var n=t.value;return e.set("selectedRepairHarmAgreement",n)}function ja(e,t){return ct.reducer(e,t,{REQUEST:function(){return e.setIn([ot,q],E.RequestStates.PENDING).setIn([ot,t.id],t)},SUCCESS:function(){return e.setIn([ot,q],E.RequestStates.SUCCESS)},FAILURE:function(){return e.setIn([ot,q],E.RequestStates.FAILURE)},FINALLY:function(){return e.deleteIn([ot,t.id])}})}var ka=(0,i.fromJS)((wa={},d()(wa,ot,z),d()(wa,"selectedRepairHarmAgreement",(0,i.Map)()),wa));function Pa(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ka,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case qt:return Ht(e,t);case it:return Ua(e,t);case ct.case(t.type):return ja(e,t);default:return e}}var Fa;function qa(e,t){var n=t.value;return e.set("selectedRestitutionReferral",n)}function Ga(e,t){return pt.reducer(e,t,{REQUEST:function(){return e.setIn([lt,q],E.RequestStates.PENDING).setIn([lt,t.id],t)},SUCCESS:function(){return e.setIn([lt,q],E.RequestStates.SUCCESS)},FAILURE:function(){return e.setIn([lt,q],E.RequestStates.FAILURE)},FINALLY:function(){return e.deleteIn([lt,t.id])}})}var Ka=(0,i.fromJS)((Fa={},d()(Fa,lt,z),d()(Fa,"selectedRestitutionReferral",(0,i.Map)()),Fa));function za(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ka,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case qt:return Ht(e,t);case ut:return qa(e,t);case pt.case(t.type):return Ga(e,t);default:return e}}var Ba="peacemaker",Ha="GET_EDM_TYPES",Va=(0,E.newRequestSequence)(Ha);const Ya=require("@babel/runtime-corejs3/regenerator");var Qa=n.n(Ya);const Wa=require("@babel/runtime-corejs3/core-js-stable/instance/reduce");var Ja=n.n(Wa);const Za=require("@redux-saga/core/effects"),Xa=require("lattice-sagas");var $a=Qa().mark(os),es=Qa().mark(cs),ts=new g.Logger("EDMSagas"),ns=g.LangUtils.isDefined,rs=Xa.EntityDataModelApiActions.getAllEntityTypes,as=Xa.EntityDataModelApiActions.getAllPropertyTypes,ss=Xa.EntityDataModelApiSagas.getAllEntityTypesWorker,is=Xa.EntityDataModelApiSagas.getAllPropertyTypesWorker;function os(e){var t,n,r;return Qa().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t={},a.prev=1,a.next=4,(0,Za.put)(Va.request(e.id));case 4:return a.next=6,(0,Za.all)([(0,Za.call)(ss,rs()),(0,Za.call)(is,as())]);case 6:if(n=a.sent,!(r=Ja()(n).call(n,(function(e,t){return ns(e)?e:t.error}),void 0))){a.next=10;break}throw r;case 10:return a.next=12,(0,Za.put)(Va.success(e.id,{entityTypes:n[0].data,propertyTypes:n[1].data}));case 12:a.next=20;break;case 14:return a.prev=14,a.t0=a.catch(1),ts.error(e.type,a.t0),t.error=a.t0,a.next=20,(0,Za.put)(Va.failure(e.id,a.t0));case 20:return a.prev=20,a.next=23,(0,Za.put)(Va.finally(e.id));case 23:return a.finish(20);case 24:return a.abrupt("return",t);case 25:case"end":return a.stop()}}),$a,null,[[1,14,20,24]])}function cs(){return Qa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Za.takeEvery)(Ha,os);case 2:case"end":return e.stop()}}),es)}const us=require("@babel/runtime-corejs3/core-js-stable/instance/for-each");var ls=n.n(us),ps=Ee.Models.EntityTypeBuilder,ds=Ee.Models.PropertyTypeBuilder;function fs(e,t){return Va.reducer(e,t,{REQUEST:function(){return e.setIn([Ha,q],E.RequestStates.PENDING).setIn([Ha,t.id],t)},SUCCESS:function(){var n=t.value.entityTypes,r=(0,i.List)().asMutable(),a=(0,i.Map)().asMutable();ls()(n).call(n,(function(e,t){var n=new ps(e).build();r.push(n),a.set(n.id,t),a.set(n.type,t)}));var s=t.value.propertyTypes,o=(0,i.List)().asMutable(),c=(0,i.Map)().asMutable(),u=(0,i.Map)().withMutations((function(e){ls()(s).call(s,(function(t){var n=Ee.Models.FQN.of(t.type);e.set(n,t.id)}))})),l=u.flip();return ls()(s).call(s,(function(e,t){var n=new ds(e).build();o.push(n),c.set(n.id,t),c.set(n.type,t)})),e.set(U,r.asImmutable()).set(j,a.asImmutable()).set(P,o.asImmutable()).set(F,c.asImmutable()).set(B,u).set(H,l).setIn([Ha,q],E.RequestStates.SUCCESS)},FAILURE:function(){return e.set(U,(0,i.List)()).set(j,(0,i.Map)()).set(P,(0,i.List)()).set(F,(0,i.Map)()).setIn([Ha,q],E.RequestStates.FAILURE)},FINALLY:function(){return e.deleteIn([Ha,t.id])}})}var ms=Ee.Models.EntitySetBuilder,gs=Xa.EntitySetsApiActions.GET_ENTITY_SET,Es=Xa.EntitySetsApiActions.getEntitySet;function hs(e,t){return Es.reducer(e,t,{REQUEST:function(){return e.setIn([gs,q],E.RequestStates.PENDING).setIn([gs,t.id],t)},SUCCESS:function(){if(e.hasIn([gs,t.id])){var n=new ms(t.value).build(),r=e.get(O),a=e.get(w);if(a.has(n.id))r=r.update(a.get(n.id),(function(){return n}));else{var s=(r=r.push(n)).count()-1;a=a.set(n.id,s).set(n.name,s)}return e.set(O,r).set(w,a).setIn([gs,q],E.RequestStates.SUCCESS)}return e},FAILURE:function(){return e.hasIn([gs,t.id])?e.setIn([gs,q],E.RequestStates.FAILURE):e},FINALLY:function(){return e.deleteIn([gs,t.id])}})}const Ss=require("@babel/runtime-corejs3/core-js-stable/object/values");var Is,ys=n.n(Ss),vs=Ee.Models.EntitySetBuilder,xs=Xa.EntitySetsApiActions.GET_ENTITY_SETS,Ns=Xa.EntitySetsApiActions.getEntitySets;function As(e,t){return Ns.reducer(e,t,{REQUEST:function(){return e.setIn([xs,q],E.RequestStates.PENDING).setIn([xs,t.id],t)},SUCCESS:function(){if(e.hasIn([xs,t.id])){var n,r=e.get(O),a=e.get(w);return ls()(n=ys()(t.value)).call(n,(function(e){var t=new vs(e).build();if(a.has(t.id))r=r.update(a.get(t.id),(function(){return t}));else{var n=(r=r.push(t)).count()-1;a=a.set(t.id,n).set(t.name,n)}})),e.set(O,r).set(w,a).setIn([xs,q],E.RequestStates.SUCCESS)}return e},FAILURE:function(){return e.hasIn([xs,t.id])?e.setIn([xs,q],E.RequestStates.FAILURE):e},FINALLY:function(){return e.deleteIn([xs,t.id])}})}var Ts=Xa.EntitySetsApiActions.GET_ENTITY_SET,Cs=Xa.EntitySetsApiActions.GET_ENTITY_SETS,Ds=Xa.EntitySetsApiActions.getEntitySet,Rs=Xa.EntitySetsApiActions.getEntitySets,Ms=(0,i.fromJS)((Is={},d()(Is,Ha,z),d()(Is,Cs,z),d()(Is,Ts,z),d()(Is,O,(0,i.List)()),d()(Is,w,(0,i.Map)()),d()(Is,U,(0,i.List)()),d()(Is,j,(0,i.Map)()),d()(Is,H,(0,i.Map)()),d()(Is,P,(0,i.List)()),d()(Is,F,(0,i.Map)()),d()(Is,B,(0,i.Map)()),Is));function bs(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ms,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Va.case(t.type):return fs(e,t);case Ds.case(t.type):return hs(e,t);case Rs.case(t.type):return As(e,t);default:return e}}var Ls="CREATE_OR_REPLACE_ASSOCIATION",_s=(0,E.newRequestSequence)(Ls),Os="DELETE_ENTITIES",ws=(0,E.newRequestSequence)(Os),Us="SUBMIT_DATA_GRAPH",js=(0,E.newRequestSequence)(Us),ks="SUBMIT_PARTIAL_REPLACE",Ps=(0,E.newRequestSequence)(ks),Fs=Qa().mark(zs),qs=Xa.DataApiActions.deleteEntityData,Gs=Xa.DataApiSagas.deleteEntityDataWorker,Ks=new g.Logger("DataSagas");function zs(e){var t,n,r,a;return Qa().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,(0,Za.put)(ws.request(e.id,e.value));case 3:return n=e.value,r=[],ls()(n).call(n,(function(e){var t=e.entitySetId,n=e.entityKeyIds;r.push((0,Za.call)(Gs,qs({entitySetId:t,entityKeyIds:n})))})),s.next=8,(0,Za.all)(r);case 8:return a=s.sent,ls()(a).call(a,(function(e){if(e.error)throw e.error})),t={data:a.length},s.next=13,(0,Za.put)(ws.success(e.id));case 13:s.next=21;break;case 15:return s.prev=15,s.t0=s.catch(0),t={error:s.t0},Ks.error(e.type,s.t0),s.next=21,(0,Za.put)(ws.failure(e.id,s.t0));case 21:return s.prev=21,s.next=24,(0,Za.put)(ws.finally(e.id));case 24:return s.finish(21);case 25:return s.abrupt("return",t);case 26:case"end":return s.stop()}}),Fs,null,[[0,15,21,25]])}var Bs=Qa().mark(Qs),Hs=Xa.DataApiActions.createAssociations,Vs=Xa.DataApiSagas.createAssociationsWorker,Ys=new g.Logger("DataSagas");function Qs(e){var t,n,r,a,s,i;return Qa().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,(0,Za.put)(_s.request(e.id));case 3:if(n=e.value,r=n.associations,!(a=n.associationsToDelete)||!a.length){o.next=11;break}return o.next=8,(0,Za.call)(zs,ws(a));case 8:if(!(s=o.sent).error){o.next=11;break}throw s.error;case 11:return o.next=13,(0,Za.call)(Vs,Hs(r));case 13:if(!(i=o.sent).error){o.next=16;break}throw i.error;case 16:return t={data:i.data},o.next=19,(0,Za.put)(_s.success(e.id,i));case 19:o.next=27;break;case 21:return o.prev=21,o.t0=o.catch(0),t={error:o.t0},Ys.error(e.type,o.t0),o.next=27,(0,Za.put)(_s.failure(e.id,o.t0));case 27:return o.prev=27,o.next=30,(0,Za.put)(_s.finally(e.id));case 30:return o.finish(27);case 31:return o.abrupt("return",t);case 32:case"end":return o.stop()}}),Bs,null,[[0,21,27,31]])}var Ws=Qa().mark(ti),Js=Qa().mark(ni),Zs=new g.Logger("DataSagas"),Xs=Ee.Models.DataGraphBuilder,$s=Xa.DataApiActions.createEntityAndAssociationData,ei=Xa.DataApiSagas.createEntityAndAssociationDataWorker;function ti(e){var t,n,r;return Qa().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t={},a.prev=1,a.next=4,(0,Za.put)(js.request(e.id,e.value));case 4:return n=(new Xs).setAssociations(e.value.associationEntityData).setEntities(e.value.entityData).build(),a.next=7,(0,Za.call)(ei,$s(n));case 7:if(!(r=a.sent).error){a.next=10;break}throw r.error;case 10:return t.data=r.data,a.next=13,(0,Za.put)(js.success(e.id,r.data));case 13:a.next=21;break;case 15:return a.prev=15,a.t0=a.catch(1),t.error=a.t0,Zs.error(e.type,a.t0),a.next=21,(0,Za.put)(js.failure(e.id,a.t0));case 21:return a.prev=21,a.next=24,(0,Za.put)(js.finally(e.id));case 24:return a.finish(21);case 25:return a.abrupt("return",t);case 26:case"end":return a.stop()}}),Ws,null,[[1,15,21,25]])}function ni(){return Qa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Za.takeEvery)(Us,ti);case 2:case"end":return e.stop()}}),Js)}const ri=require("@babel/runtime-corejs3/core-js-stable/object/keys");var ai=n.n(ri),si=Qa().mark(pi),ii=Qa().mark(di),oi=new g.Logger("DataSagas"),ci=Ee.Types.UpdateTypes,ui=Xa.DataApiActions.updateEntityData,li=Xa.DataApiSagas.updateEntityDataWorker;function pi(e){var t,n,r,a,s,i,o;return Qa().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t={},c.prev=1,c.next=4,(0,Za.put)(Ps.request(e.id,e.value));case 4:return r=[],a=e.value.entityData,ls()(n=ai()(a)).call(n,(function(e){r.push((0,Za.call)(li,ui({entitySetId:e,entities:a[e],updateType:ci.PartialReplace})))})),c.next=9,(0,Za.all)(r);case 9:if(s=c.sent,i=Ja()(s).call(s,(function(e,t){return t.error&&e.push(t.error),e}),[]),o={errors:i},!i.length){c.next=14;break}throw o;case 14:return c.next=16,(0,Za.put)(Ps.success(e.id));case 16:c.next=24;break;case 18:return c.prev=18,c.t0=c.catch(1),t.error=c.t0,oi.error(e.type,c.t0),c.next=24,(0,Za.put)(Ps.failure(e.id,c.t0));case 24:return c.prev=24,c.next=27,(0,Za.put)(Ps.finally(e.id));case 27:return c.finish(24);case 28:return c.abrupt("return",t);case 29:case"end":return c.stop()}}),si,null,[[1,18,24,28]])}function di(){return Qa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Za.takeEvery)(ks,pi);case 2:case"end":return e.stop()}}),ii)}g.ReduxUtils.selectEntitySets,g.ReduxUtils.selectEntityTypes;Ee.Models.FQN;var fi=Y;function mi(e){return function(t){var n;return t.getIn(ge()(n=X.APP_CONFIG).call(n,[e,fi]))}}g.ReduxUtils.selectPropertyTypes;Ee.Models.FQN;Ee.Models.FQN;function gi(e){return function(t){return t.getIn([_,B,e])}}var Ei=Ee.Constants.OPENLATTICE_ID_FQN,hi=g.ValidationUtils.isValidUUID,Si=g.LangUtils.isDefined,Ii=function(e,t,n){return Si(e)&&ai()(e).length?(0,i.Map)().withMutations((function(r){var a;ls()(a=(0,i.fromJS)(e)).call(a,(function(e,n){var a=t.get(n);r.set(a,e)})),hi(n)&&r.set(Ei,(0,i.List)([n]))})):(0,i.Map)()},yi=function(e){return(0,i.get)(e,"associationDetails")},vi=function(e){return(0,i.getIn)(e,["associationEntitySet","id"])},xi=function(e){return(0,i.get)(e,"neighborDetails")},Ni=function(e){return(0,i.getIn)(e,["neighborEntitySet","id"])},Ai=Qa().mark(Ri),Ti=Qa().mark(Mi),Ci=Se.STAFF,Di=new g.Logger("DashboardSagas");function Ri(e){var t,n,r,a,s,i,o,c,u,l;return Qa().wrap((function(p){for(;;)switch(p.prev=p.next){case 0:return t=e.id,n={},p.prev=2,p.next=5,(0,Za.put)(Re.request(t));case 5:return r=e.value,p.next=8,(0,Za.call)(ti,js(r));case 8:if(!(a=p.sent).error){p.next=11;break}throw a.error;case 11:return s=r.entityData,i=a.data.entityKeyIds,p.next=15,(0,Za.select)(mi(Ci));case 15:return o=p.sent,c=i[o][0],p.next=19,(0,Za.select)((function(e){return e.getIn([_,H])}));case 19:return u=p.sent,l=Ii(s[o][0],u,c),p.next=23,(0,Za.put)(Re.success(t,l));case 23:p.next=31;break;case 25:return p.prev=25,p.t0=p.catch(2),n.error=p.t0,Di.error(e.type,p.t0),p.next=31,(0,Za.put)(Re.failure(t,p.t0));case 31:return p.prev=31,p.next=34,(0,Za.put)(Re.finally(t));case 34:return p.finish(31);case 35:return p.abrupt("return",n);case 36:case"end":return p.stop()}}),Ai,null,[[2,25,31,35]])}function Mi(){return Qa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Za.takeEvery)(De,Ri);case 2:case"end":return e.stop()}}),Ti)}const bi=require("@babel/runtime-corejs3/core-js-stable/instance/map");var Li=n.n(bi),_i=Qa().mark(Vi),Oi=Qa().mark(Yi),wi=Xa.DataApiActions.getEntitySetData,Ui=Xa.DataApiSagas.getEntitySetDataWorker,ji=Xa.SearchApiActions.searchEntityNeighborsWithFilter,ki=Xa.SearchApiSagas.searchEntityNeighborsWithFilterWorker,Pi=g.DataUtils.getEntityKeyId,Fi=g.DataUtils.getPropertyValue,qi=g.LangUtils.isDefined,Gi=Se.CRC_CASE,Ki=Se.STATUS,zi=ye.NOTES,Bi=Ge,Hi=new g.Logger("DashboardSagas");function Vi(e){var t,n,r,a,s,o,c,u,l,p,d;return Qa().wrap((function(f){for(;;)switch(f.prev=f.next){case 0:return t=e.id,n={},f.prev=2,f.next=5,(0,Za.put)(be.request(t));case 5:return f.next=7,(0,Za.select)(mi(Gi));case 7:return a=f.sent,f.next=10,(0,Za.call)(Ui,wi({entitySetId:a}));case 10:if(!(s=f.sent).error){f.next=13;break}throw s.error;case 13:return o=(0,i.fromJS)(s.data),c=Li()(o).call(o,(function(e){return Pi(e)})).toJS(),f.next=17,(0,Za.select)(mi(Ki));case 17:return u=f.sent,l={entityKeyIds:c,destinationEntitySetIds:[u],sourceEntitySetIds:[]},f.next=21,(0,Za.call)(ki,ji({entitySetId:a,filter:l}));case 21:if(!(s=f.sent).error){f.next=24;break}throw s.error;case 24:return p=Li()(r=(0,i.fromJS)(s.data)).call(r,(function(e){return Li()(e).call(e,(function(e){return xi(e)}))})),d=(0,i.Map)().withMutations((function(e){e.set(_t,o.count()),ls()(p).call(p,(function(t){var n=xn()(t).call(t,(function(e){return"Closed"===Fi(e,[ye.STATUS,0])})),r=xn()(t).call(t,(function(e){return"Resolution"===Fi(e,[ye.STATUS,0])}));if(!qi(r)&&!qi(n)){var a=e.get(Rt,0);e.set(Rt,a+1)}var s=Fi(n,[zi,0]);if(qi(r)||s===Bi[0]){var i=e.get(bt,0);e.set(bt,i+1)}if(s===Bi[1]){var o=e.get(Mt,0);e.set(Mt,o+1)}if(s===Bi[2]){var c=e.get(Dt,0);e.set(Dt,c+1)}if(s===Bi[3]||s===Bi[4]||s===Bi[5]){var u=e.get(Lt,0);e.set(Lt,u+1)}}))})),f.next=28,(0,Za.put)(be.success(t,d));case 28:f.next=36;break;case 30:return f.prev=30,f.t0=f.catch(2),n.error=f.t0,Hi.error(e.type,f.t0),f.next=36,(0,Za.put)(be.failure(t,f.t0));case 36:return f.prev=36,f.next=39,(0,Za.put)(be.finally(t));case 39:return f.finish(36);case 40:return f.abrupt("return",n);case 41:case"end":return f.stop()}}),_i,null,[[2,30,36,40]])}function Yi(){return Qa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Za.takeEvery)(Me,Vi);case 2:case"end":return e.stop()}}),Oi)}const Qi=require("@babel/runtime-corejs3/core-js-stable/instance/filter");var Wi=n.n(Qi);const Ji=require("@babel/runtime-corejs3/core-js-stable/instance/includes");var Zi=n.n(Ji),Xi=Qa().mark(Eo),$i=Qa().mark(ho),eo=Xa.DataApiActions.getEntitySetData,to=Xa.DataApiSagas.getEntitySetDataWorker,no=Xa.SearchApiActions.searchEntityNeighborsWithFilter,ro=Xa.SearchApiSagas.searchEntityNeighborsWithFilterWorker,ao=g.DataUtils.getEntityKeyId,so=g.DataUtils.getPropertyValue,io=g.LangUtils.isDefined,oo=Se.CRC_CASE,co=Se.FORM,uo=Se.STAFF,lo=Se.STATUS,po=ye.NAME,fo=ye.NOTES,mo=mt,go=new g.Logger("DashboardSagas");function Eo(e){var t,n,r,a,s,o,c,u,l,p,f,m,g,E,h,S,I;return Qa().wrap((function(y){for(;;)switch(y.prev=y.next){case 0:return t=e.id,n={},y.prev=2,y.next=5,(0,Za.put)(_e.request(t));case 5:return y.next=7,(0,Za.select)(mi(uo));case 7:return r=y.sent,y.next=10,(0,Za.call)(to,eo({entitySetId:r}));case 10:if(!(a=y.sent).error){y.next=13;break}throw a.error;case 13:return s=(0,i.fromJS)(a.data),o=Li()(s).call(s,(function(e){return ao(e)})).toJS(),y.next=17,(0,Za.select)(mi(oo));case 17:return c=y.sent,u={entityKeyIds:o,destinationEntitySetIds:[c],sourceEntitySetIds:[]},y.next=21,(0,Za.call)(ro,no({entitySetId:r,filter:u}));case 21:if(!(a=y.sent).error){y.next=24;break}throw a.error;case 24:return l=(0,i.fromJS)(a.data),p=[],f=(0,i.Map)().withMutations((function(e){ls()(l).call(l,(function(t,n){ls()(t).call(t,(function(t){var r=xi(t),a=ao(r);a&&p.push(a);var s=e.get(n,(0,i.List)()).push(r);e.set(n,s)}))}))})),y.next=29,(0,Za.select)(mi(co));case 29:return m=y.sent,y.next=32,(0,Za.select)(mi(lo));case 32:if(g=y.sent,E=(0,i.Map)(),h=(0,i.Map)(),!p.length){y.next=45;break}return u={entityKeyIds:p,destinationEntitySetIds:[g],sourceEntitySetIds:[m]},y.next=39,(0,Za.call)(ro,no({entitySetId:c,filter:u}));case 39:if(!(a=y.sent).error){y.next=42;break}throw a.error;case 42:S=(0,i.fromJS)(a.data),E=Li()(S).call(S,(function(e){var t;return Li()(t=Wi()(e).call(e,(function(e){return Ni(e)===g}))).call(t,(function(e){return xi(e)}))})),h=Li()(S).call(S,(function(e){var t;return Li()(t=Wi()(e).call(e,(function(e){return Ni(e)===m&&so(xi(e),[po,0])===mo}))).call(t,(function(e){var t=xi(e);return so(t,[po,0])===mo?t:(0,i.Map)()}))}));case 45:return I=(0,i.List)().withMutations((function(e){var t,n=0,r=0,a=0,o=0,c=0,u=0;ls()(s).call(s,(function(t){var s,l=ao(t),p=Ce(t),m=f.get(l,(0,i.List)()),g=0,S=0,I=0,y=0,v=0,x=0;ls()(m).call(m,(function(e){var t=ao(e),n=E.get(t,(0,i.List)()),r=xn()(n).call(n,(function(e){return"Referral"===so(e,[ye.STATUS,0])})),a=xn()(n).call(n,(function(e){return"Intake"===so(e,[ye.STATUS,0])})),s=xn()(n).call(n,(function(e){return"Circle"===so(e,[ye.STATUS,0])})),o=xn()(n).call(n,(function(e){return"Closed"===so(e,[ye.STATUS,0])}));if(io(r)&&!io(a)&&(g+=1),io(r)&&io(a)&&!io(s)&&(S+=1),io(o)||(y+=1),io(o)){var c=so(o,[fo,0]);Zi()(c).call(c,"Successful")?v+=1:x+=1}var u=h.getIn([t,0],(0,i.Map)());!io(u)||u.isEmpty()||io(o)||(I+=1)}));var N=(0,i.Map)((s={},d()(s,Ct.get("STAFF"),p),d()(s,Ct.get("PENDING_INTAKE"),g),d()(s,Ct.get("PENDING_CIRCLE"),S),d()(s,Ct.get("RH_AGREEMENT_ESTABLISHED"),I),d()(s,Ct.get("TOTAL_OPEN_CASES"),y),d()(s,Ct.get("TOTAL_SUCCESSFUL_CASES"),v),d()(s,Ct.get("TOTAL_UNSUCCESSFUL_CASES"),x),s));e.push(N),n+=g,r+=S,a+=I,o+=y,c+=v,u+=x})),e.push((0,i.Map)((t={},d()(t,Ct.get("STAFF"),"All Staff"),d()(t,Ct.get("PENDING_INTAKE"),n),d()(t,Ct.get("PENDING_CIRCLE"),r),d()(t,Ct.get("RH_AGREEMENT_ESTABLISHED"),a),d()(t,Ct.get("TOTAL_OPEN_CASES"),o),d()(t,Ct.get("TOTAL_SUCCESSFUL_CASES"),c),d()(t,Ct.get("TOTAL_UNSUCCESSFUL_CASES"),u),t)))})),y.next=48,(0,Za.put)(_e.success(t,I));case 48:y.next=56;break;case 50:return y.prev=50,y.t0=y.catch(2),n.error=y.t0,go.error(e.type,y.t0),y.next=56,(0,Za.put)(_e.failure(t,y.t0));case 56:return y.prev=56,y.next=59,(0,Za.put)(_e.finally(t));case 59:return y.finish(56);case 60:return y.abrupt("return",n);case 61:case"end":return y.stop()}}),Xi,null,[[2,50,56,60]])}function ho(){return Qa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Za.takeEvery)(Le,Eo);case 2:case"end":return e.stop()}}),$i)}const So=require("@babel/runtime-corejs3/helpers/slicedToArray");var Io=n.n(So);function yo(e,t){var n;return ge()(n="entity.".concat(e,':"')).call(n,t,'"')}const vo=require("luxon");function xo(e,t,n,r){var a,s,i="*";n&&n.isValid&&(i=n.startOf(t).toUTC().toISO());var o="*";r&&r.isValid&&(o=r.endOf(t).toUTC().toISO());var c=ge()(a="[".concat(i," TO ")).call(a,o,"]");return ge()(s="entity.".concat(e,":")).call(s,c)}var No=Qa().mark(Ko),Ao=Qa().mark(zo),To=Xa.SearchApiActions.searchEntitySetData,Co=Xa.SearchApiActions.searchEntityNeighborsWithFilter,Do=Xa.SearchApiSagas.searchEntitySetDataWorker,Ro=Xa.SearchApiSagas.searchEntityNeighborsWithFilterWorker,Mo=g.DataUtils.getEntityKeyId,bo=g.DataUtils.getPropertyValue,Lo=g.LangUtils.isDefined,_o=g.LangUtils.isNonEmptyString,Oo=Se.CRC_CASE,wo=Se.DA_CASE,Uo=Se.PEOPLE,jo=Se.STAFF,ko=ye.CASE_NUMBER,Po=ye.DA_CASE_NUMBER,Fo=ye.ROLE,qo=St,Go=new g.Logger("DashboardSagas");function Ko(e){var t,n,r,a,s,o,c,u,l,p,d,f,m,g,E,h,S,I,y,v,x,N,A,T,C,D,R,M,b,L,_,O;return Qa().wrap((function(w){for(;;)switch(w.prev=w.next){case 0:return t={},w.prev=1,w.next=4,(0,Za.put)(we.request(e.id));case 4:return n=e.value,r=n.caseNumberInput,a=n.maxHits,s=n.start,o=(0,i.List)(),c=0,w.next=9,(0,Za.select)(mi(wo));case 9:return u=w.sent,w.next=12,(0,Za.select)(gi(Po));case 12:return l=w.sent,w.next=15,(0,Za.select)(gi(ko));case 15:if(p=w.sent,d={entitySetIds:[u],start:s,maxHits:a,constraints:[]},f={entitySetIds:[u],start:s,maxHits:a,constraints:[]},!_o(r)){w.next=66;break}return g=yo(l,r),d.constraints.push({min:1,constraints:[{searchTerm:g,fuzzy:!0}]}),E=yo(p,r),f.constraints.push({min:1,constraints:[{searchTerm:E,fuzzy:!0}]}),w.next=25,(0,Za.all)([(0,Za.call)(Do,To(d)),(0,Za.call)(Do,To(f))]);case 25:if(h=w.sent,S=Io()(h,2),I=S[0],y=S[1],!I.error){w.next=31;break}throw I.error;case 31:if(!y.error){w.next=33;break}throw y.error;case 33:if(v=ge()(m=(0,i.fromJS)(I.data.hits)).call(m,(0,i.fromJS)(y.data.hits)),c=I.data.numHits+y.data.numHits,x=[],ls()(v).call(v,(function(e){x.push(Mo(e))})),!x.length){w.next=66;break}return w.next=40,(0,Za.select)(mi(Oo));case 40:return A=w.sent,T={entityKeyIds:x,destinationEntitySetIds:[A],sourceEntitySetIds:[A]},w.next=44,(0,Za.call)(Ro,Co({entitySetId:u,filter:T}));case 44:if(!(C=w.sent).error){w.next=47;break}throw C.error;case 47:return D=Li()(N=(0,i.fromJS)(C.data)).call(N,(function(e){return xi(e.get(0))})),R=[],ls()(D).call(D,(function(e){R.push(Mo(e))})),w.next=52,(0,Za.select)(mi(Uo));case 52:return M=w.sent,w.next=55,(0,Za.select)(mi(jo));case 55:return b=w.sent,T={entityKeyIds:R,destinationEntitySetIds:[],sourceEntitySetIds:[M,b]},w.next=59,(0,Za.call)(Ro,Co({entitySetId:A,filter:T}));case 59:if(!(C=w.sent).error){w.next=62;break}throw C.error;case 62:L=(0,i.fromJS)(C.data),_=(0,i.Map)().withMutations((function(e){ls()(L).call(L,(function(t,n){var r=xn()(t).call(t,(function(e){var t=Ni(e),n=bo(yi(e),[Fo,0]);return t===M&&n===qo}));Lo(r)&&e.set(n,xi(r))}))})),O=Li()(L).call(L,(function(e){var t=xn()(e).call(e,(function(e){return Ni(e)===b}));return Lo(t)?xi(t):(0,i.Map)()})),o=(0,i.List)().withMutations((function(e){ls()(v).call(v,(function(t){var n=(0,i.Map)().withMutations((function(e){var n=Mo(t),r=bo(t,[Po,0],void 0),a=bo(t,[ko,0],Nt),s=D.get(n,""),o=Mo(s),c=_.get(o,(0,i.Map)()),u=Ce(c,Nt),l=Mo(c),p=O.get(o,(0,i.Map)()),d=Ce(p,Nt);e.set(qo,u),e.set(Ot,r||a),e.set("Case Manager",d),e.set("respondentEKID",l)}));e.push(n)}))}));case 66:return w.next=68,(0,Za.put)(we.success(e.id,{searchedCasesData:o,totalHits:c}));case 68:w.next=76;break;case 70:return w.prev=70,w.t0=w.catch(1),t.error=w.t0,Go.error(e.type,w.t0),w.next=76,(0,Za.put)(we.failure(e.id,w.t0));case 76:return w.prev=76,w.next=79,(0,Za.put)(we.finally(e.id));case 79:return w.finish(76);case 80:return w.abrupt("return",t);case 81:case"end":return w.stop()}}),No,null,[[1,70,76,80]])}function zo(){return Qa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Za.takeEvery)(Oe,Ko);case 2:case"end":return e.stop()}}),Ao)}var Bo=n(162),Ho=n.n(Bo),Vo=n(460),Yo=n.n(Vo),Qo=Qa().mark(Lc),Wo=Qa().mark(_c),Jo=Xa.DataApiActions.getEntitySetData,Zo=Xa.DataApiSagas.getEntitySetDataWorker,Xo=Xa.SearchApiActions.searchEntityNeighborsWithFilter,$o=Xa.SearchApiSagas.searchEntityNeighborsWithFilterWorker,ec=g.DataUtils.getEntityKeyId,tc=g.DataUtils.getPropertyValue,nc=g.DateTimeUtils.formatAsDate,rc=g.LangUtils.isDefined,ac=Ue,sc=je,ic=ke,oc=Pe,cc=Fe,uc=Se.CRC_CASE,lc=Se.FORM,pc=Se.PEOPLE,dc=Se.STAFF,fc=Se.STATUS,mc=ye.DUE_DATE,gc=ye.EFFECTIVE_DATE,Ec=ye.GENERAL_DATETIME,hc=ye.NAME,Sc=ye.NOTES,Ic=ye.ROLE,yc=new g.Logger("DashboardSagas"),vc="Respondent Name",xc="Case Number",Nc="Referral Date",Ac="Date Assigned",Tc="Intake Date",Cc="Circle Date",Dc="RH Expiration Date",Rc="Closed Date",Mc="Case Manager",bc=function(e){return tc(e,[ye.STATUS,0])};function Lc(e){var t,n,r,a,s,o,c,u,l,p,d,f,m,g,E,h,S,I,y,v,x,N,A,T,C,D,R;return Qa().wrap((function(M){for(;;)switch(M.prev=M.next){case 0:return t=e.id,n={},M.prev=2,M.next=5,(0,Za.put)(Jt.request(t));case 5:return a=e.value,s=a.hasClosedCases,o=a.hasOpenCases,c=a.selectedStaffMember,u=a.selectedStatus,M.next=8,(0,Za.select)(mi(uc));case 8:return l=M.sent,M.next=11,(0,Za.call)(Zo,Jo({entitySetId:l}));case 11:if(!(p=M.sent).error){M.next=14;break}throw p.error;case 14:return d=(0,i.fromJS)(p.data),f=[],ls()(d).call(d,(function(e){var t=ec(e);t&&f.push(t)})),M.next=19,(0,Za.select)(mi(lc));case 19:return m=M.sent,M.next=22,(0,Za.select)(mi(pc));case 22:return g=M.sent,M.next=25,(0,Za.select)(mi(dc));case 25:return E=M.sent,M.next=28,(0,Za.select)(mi(fc));case 28:return h=M.sent,S={entityKeyIds:f,destinationEntitySetIds:[h],sourceEntitySetIds:[m,g,E]},M.next=32,(0,Za.call)($o,Xo({entitySetId:l,filter:S}));case 32:if(!(p=M.sent).error){M.next=35;break}throw p.error;case 35:return I=(0,i.fromJS)(p.data),y=Li()(I).call(I,(function(e){var t;return Li()(t=Wi()(e).call(e,(function(e){return Ni(e)===h}))).call(t,(function(e){return xi(e)}))})),v=Li()(I).call(I,(function(e){return Wi()(e).call(e,(function(e){return Ni(e)===E}))})),x=(0,i.Map)().withMutations((function(e){ls()(v).call(v,(function(t,n){var r=t.get(0,(0,i.Map)()),a=yi(r),s=tc(a,[Ec,0]),o=nc(s);e.set(n,o)}))})),N=Li()(v).call(v,(function(e){return Li()(e).call(e,(function(e){return xi(e)}))})),A=Wi()(d).call(d,(function(e){var t=ec(e),n=y.get(t,(0,i.List)()),r=xn()(n).call(n,(function(e){return bc(e)===ic}));if(!o&&s)return rc(r);if(!s&&o)return!rc(r);if(u){var a=!1,c=!1,l=!1,p=!1,d=rc(r);if(ls()(n).call(n,(function(e){var t=bc(e);t===cc&&(a=!0),t===oc&&(c=!0),t===ac&&(l=!0),t===sc&&(p=!0)})),u===cc)return a&&!c&&!l&&!p&&!d;if(u===oc)return a&&c&&!l&&!p&&!d;if(u===ac)return a&&c&&l&&!p&&!d;if(u===sc)return a&&c&&l&&p&&!d}return e})),c.length&&(A=Wi()(A).call(A,(function(e){var t=ec(e),n=N.get(t,(0,i.List)());return Ce(n.get(0))===c}))),T=(0,i.List)().withMutations((function(e){ls()(A).call(A,(function(t){var n,r=tc(t,[Sc,0]),a=ec(t),s=I.get(a,(0,i.List)()),o=Wi()(s).call(s,(function(e){return Ni(e)===g})),c=xn()(o).call(o,(function(e){var t=yi(e);return"Respondent"===tc(t,[Ic,0])})),u=Ce(xi(c)),l=N.get(a,(0,i.List)()),p=Ce(l.get(0)),d=x.get(a,""),f=y.get(a,(0,i.List)()),E="",h=xn()(f).call(f,(function(e){return bc(e)===cc}));if(rc(h)){var S=tc(h,[gc,0]);E=nc(S)}var v=xn()(f).call(f,(function(e){return bc(e)===oc})),A="";if(rc(v)){var T=tc(v,[gc,0]);A=nc(T)}var C=xn()(f).call(f,(function(e){return bc(e)===sc})),D="";if(rc(C)){var R=tc(C,[gc,0]);D=nc(R)}var M=xn()(f).call(f,(function(e){return bc(e)===ic})),b="";if(rc(M)){var L=tc(M,[gc,0]);b=nc(L)}var _=Li()(n=Wi()(s).call(s,(function(e){return Ni(e)===m}))).call(n,(function(e){return xi(e)})),O=xn()(_).call(_,(function(e){return"Repair Harm Agreement"===tc(e,[hc,0])})),w="";if(rc(O)){var U=tc(O,[mc,0]);w=nc(U)}var j=(0,i.OrderedMap)().set(vc,u).set(xc,r).set(Nc,E).set(Ac,d).set(Tc,A).set(Cc,D).set(Dc,w).set(Rc,b).set(Mc,p);e.push(j)}))})).sortBy((function(e){return e.get(vc,"").split(" ")[1]})),C=Yo().unparse(T.toJS()),D=new Blob([C],{type:"text/csv"}),R="",(o&&s||!o&&!s)&&!u?R="CRC_All_Cases":!o&&s?R="CRC_Closed_Cases":!s&&o?R="CRC_Open_Cases":u&&(R="CRC_".concat(u)),c.length&&(R=ge()(r="".concat(R,"_")).call(r,c.split(" ").join("_"))),Ho().saveAs(D,ge()(R).call(R,".csv")),M.next=51,(0,Za.put)(Jt.success(t));case 51:M.next=59;break;case 53:return M.prev=53,M.t0=M.catch(2),n.error=M.t0,yc.error(e.type,M.t0),M.next=59,(0,Za.put)(Jt.failure(t,M.t0));case 59:return M.prev=59,M.next=62,(0,Za.put)(Jt.finally(t));case 62:return M.finish(59);case 63:return M.abrupt("return",n);case 64:case"end":return M.stop()}}),Qo,null,[[2,53,59,63]])}function _c(){return Qa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Za.takeEvery)(Wt,Lc);case 2:case"end":return e.stop()}}),Wo)}var Oc=Qa().mark(lu),wc=Qa().mark(pu),Uc=Xa.SearchApiActions.searchEntitySetData,jc=Xa.SearchApiActions.searchEntityNeighborsWithFilter,kc=Xa.SearchApiSagas.searchEntitySetDataWorker,Pc=Xa.SearchApiSagas.searchEntityNeighborsWithFilterWorker,Fc=g.DataUtils.getEntityKeyId,qc=g.DataUtils.getPropertyValue,Gc=g.DateTimeUtils.formatAsDate,Kc=g.LangUtils.isDefined,zc=Se.CONTACT_ACTIVITY,Bc=Se.CRC_CASE,Hc=Se.FORM,Vc=Se.PEACEMAKER_STATUS,Yc=Se.PEOPLE,Qc=Se.STATUS,Wc=ye.CONTACT_DATETIME,Jc=ye.EFFECTIVE_DATE,Zc=ye.GENERAL_DATETIME,Xc=ye.NAME,$c=ye.OUTCOME,eu=ye.RACE,tu=ye.ROLE,nu=new g.Logger("DashboardSagas"),ru="Peacemaker Name",au="Race",su="Date Trained",iu="Most Recent Circle",ou="Most Recently Contacted",cu="Participated after Most Recent Contact",uu="Status";function lu(e){var t,n,r,a,s,o,c,u,l,p,d,f,m,g,E,h,S,I,y,v,x,N,A,T,C,D,R,M,b,L,_,O,w,U,j,k,P,F,q,G;return Qa().wrap((function(K){for(;;)switch(K.prev=K.next){case 0:return t=e.id,n={},K.prev=2,K.next=5,(0,Za.put)(Xt.request(t));case 5:return r=e.value,a=r.endDate,s=r.selectedRace,o=r.selectedStatus,c=r.startDate,K.next=8,(0,Za.select)(mi(Hc));case 8:return u=K.sent,K.next=11,(0,Za.select)(gi(Xc));case 11:return l=K.sent,K.next=14,(0,Za.select)(gi(Zc));case 14:return p=K.sent,d=vo.DateTime.fromISO(c),f=vo.DateTime.fromISO(a),m={entitySetIds:[u],start:0,maxHits:1e4,constraints:[{min:1,constraints:[{searchTerm:yo(l,"Peacemaker Information Form"),fuzzy:!1}]}]},c&&a&&m.constraints.push({min:1,constraints:[{searchTerm:xo(p,"day",d,f),fuzzy:!1}]}),K.next=21,(0,Za.call)(kc,Uc(m));case 21:if(!(g=K.sent).error){K.next=24;break}throw g.error;case 24:return E=(0,i.fromJS)(g.data.hits),h=(0,i.Map)().withMutations((function(e){ls()(E).call(E,(function(t){e.set(Fc(t),t)}))})),S=Li()(E).call(E,(function(e){return Fc(e)})).toJS(),K.next=29,(0,Za.select)(mi(Yc));case 29:return I=K.sent,y={entityKeyIds:S,destinationEntitySetIds:[],sourceEntitySetIds:[I]},K.next=33,(0,Za.call)(Pc,jc({entitySetId:u,filter:y}));case 33:if(!(g=K.sent).error){K.next=36;break}throw g.error;case 36:return v=(0,i.fromJS)(g.data),x=[],N=(0,i.List)().asMutable(),A=(0,i.Map)().withMutations((function(e){ls()(v).call(v,(function(t,n){var r=xi(t.get(0,(0,i.Map)()));N.push(r);var a=Fc(r);a&&x.push(a),e.set(a,n)}))})),s&&(N=Wi()(N).call(N,(function(e){return qc(e,[eu,0])===s}))),K.next=43,(0,Za.select)(mi(Bc));case 43:return T=K.sent,K.next=46,(0,Za.select)(mi(zc));case 46:return C=K.sent,K.next=49,(0,Za.select)(mi(Vc));case 49:return D=K.sent,y={entityKeyIds:x,destinationEntitySetIds:[T,D],sourceEntitySetIds:[C]},K.next=53,(0,Za.call)(Pc,jc({entitySetId:I,filter:y}));case 53:if(!(g=K.sent).error){K.next=56;break}throw g.error;case 56:return R=(0,i.fromJS)(g.data),o&&(M=[],R=Wi()(R).call(R,(function(e,t){var n=Wi()(e).call(e,(function(e){return Ni(e)===D}));if(Kc(n)){var r=n.sortBy((function(e){return vo.DateTime.fromISO(qc(xi(e),[Jc,0])).valueOf()})).last(),a=qc(xi(r),[ye.STATUS,0])===o;return a&&M.push(t),a}return!1})),N=Wi()(N).call(N,(function(e){return Zi()(M).call(M,Fc(e))}))),b=(0,i.Map)().withMutations((function(e){ls()(R).call(R,(function(t,n){var r,a=Li()(r=Wi()(t).call(t,(function(e){return Ni(e)===D}))).call(r,(function(e){return xi(e)}));e.set(n,a)}))})),L=(0,i.Map)().withMutations((function(e){ls()(R).call(R,(function(t,n){var r,a=Li()(r=Wi()(t).call(t,(function(e){return Ni(e)===C}))).call(r,(function(e){return xi(e)}));e.set(n,a)}))})),_=[],O=(0,i.Map)().withMutations((function(e){ls()(R).call(R,(function(t,n){var r,a=Wi()(t).call(t,(function(e){return Ni(e)===T})),s=Li()(r=Wi()(a).call(a,(function(e){var t=yi(e);return"Peacemaker"===qc(t,[tu,0])}))).call(r,(function(e){return xi(e)}));e.set(n,s),ls()(s).call(s,(function(e){var t=Fc(e);t&&_.push(t)}))}))})),K.next=64,(0,Za.select)(mi(Qc));case 64:return w=K.sent,y={entityKeyIds:_,destinationEntitySetIds:[w],sourceEntitySetIds:[]},K.next=68,(0,Za.call)(Pc,jc({entitySetId:T,filter:y}));case 68:if(!(g=K.sent).error){K.next=71;break}throw g.error;case 71:return U=(0,i.fromJS)(g.data),j=(0,i.Map)().withMutations((function(e){ls()(U).call(U,(function(t,n){var r=xn()(t).call(t,(function(e){var t=xi(e);return"Circle"===qc(t,[ye.STATUS,0])}));if(Kc(r)){var a=qc(xi(r),[Jc,0]);e.set(n,a)}else e.set(n,"")}))})),k=(0,i.Map)().withMutations((function(e){ls()(O).call(O,(function(t,n){var r="";ls()(t).call(t,(function(e){var t=Fc(e),n=j.get(t,"");r?vo.DateTime.fromISO(n).valueOf()>vo.DateTime.fromISO(r).valueOf()&&(r=n):r=n})),e.set(n,r)}))})),P=(0,i.List)().withMutations((function(e){ls()(N).call(N,(function(t){var n=Ce(t),r=qc(t,[eu,0]),a=Fc(t),s=A.get(a,""),o=h.get(s,(0,i.Map)()),c=qc(o,[Zc,0]),u=Gc(c),l=L.get(a,(0,i.List)()).sortBy((function(e){return vo.DateTime.fromISO(qc(e,[Wc,0])).valueOf()})).last(),p=qc(l,[Wc,0]),d=Gc(p),f=qc(l,[$c,0]),m="Attended"===f?"Yes":"";"Did not attend"===f&&(m="No");var g=k.get(a,""),E=Gc(g),S=b.get(a,(0,i.List)()).sortBy((function(e){return vo.DateTime.fromISO(qc(e,[Jc,0])).valueOf()})).last(),I=qc(S,[ye.STATUS,0]),y=(0,i.OrderedMap)().set(ru,n).set(au,r).set(su,u).set(iu,E).set(ou,d).set(cu,m).set(uu,I);e.push(y)}))})).sortBy((function(e){return e.get(ru,"").split(" ")[1]})),F=Yo().unparse(P.toJS()),q=new Blob([F],{type:"text/csv"}),G="CRC_Peacemakers",Ho().saveAs(q,ge()(G).call(G,".csv")),K.next=81,(0,Za.put)(Xt.success(t));case 81:K.next=89;break;case 83:return K.prev=83,K.t0=K.catch(2),n.error=K.t0,nu.error(e.type,K.t0),K.next=89,(0,Za.put)(Xt.failure(t,K.t0));case 89:return K.prev=89,K.next=92,(0,Za.put)(Xt.finally(t));case 92:return K.finish(89);case 93:return K.abrupt("return",n);case 94:case"end":return K.stop()}}),Oc,null,[[2,83,89,93]])}function pu(){return Qa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Za.takeEvery)(Zt,lu);case 2:case"end":return e.stop()}}),wc)}var du=g.DataUtils.getEntityKeyId,fu=g.DataUtils.getPropertyValue,mu=g.LangUtils.isDefined,gu=ye.GENDER,Eu=ye.NAME,hu=ye.RACE,Su=Qa().mark(cl),Iu=Qa().mark(ul),yu=Xa.DataApiActions.getEntitySetData,vu=Xa.DataApiSagas.getEntitySetDataWorker,xu=Xa.SearchApiActions.searchEntityNeighborsWithFilter,Nu=Xa.SearchApiActions.searchEntitySetData,Au=Xa.SearchApiSagas.searchEntityNeighborsWithFilterWorker,Tu=Xa.SearchApiSagas.searchEntitySetDataWorker,Cu=g.DataUtils.getEntityKeyId,Du=g.DataUtils.getPropertyValue,Ru=g.DateTimeUtils.formatAsDate,Mu=g.LangUtils.isDefined,bu=function(e,t,n,r,a){return Wi()(t).call(t,(function(t){var s=n.get(t,""),o=r.get(s,(0,i.List)()),c=xn()(o).call(o,(function(e){return Ni(e)===a}));if(mu(c)){var u=xi(c);if(e)return fu(u,[Eu,0])===e}return!0}))},Lu=function(e,t,n,r,a){return Wi()(t).call(t,(function(t){var s=n.get(t,""),o=r.get(s,(0,i.Map)()),c=du(o),u=a.get(c,"");return!e||fu(u,[gu,0])===e}))},_u=function(e,t,n,r){return Wi()(t).call(t,(function(t){var a=n.get(t,""),s=r.get(a,(0,i.Map)()),o=du(s);return Zi()(e).call(e,o)}))},Ou=function(e,t,n,r){return Wi()(t).call(t,(function(t){var a=n.get(t,""),s=r.get(a,(0,i.Map)());return!e||fu(s,[hu,0])===e}))},wu=function(e){var t=[],n=(0,i.Map)().asMutable();return ls()(e).call(e,(function(e){var r=du(e),a=n.get(r);mu(a)?(1===a&&r&&t.push(r),n.set(r,a+1)):n.set(r,1)})),t},Uu=Se.AGENCY,ju=Se.CHARGES,ku=Se.CRC_CASE,Pu=Se.PEOPLE,Fu=Se.PERSON_DETAILS,qu=Se.REFERRAL_REQUEST,Gu=Se.STAFF,Ku=Se.STATUS,zu=ye.DATETIME_COMPLETED,Bu=ye.DOB,Hu=ye.EFFECTIVE_DATE,Vu=ye.GENDER,Yu=ye.NAME,Qu=ye.NOTES,Wu=ye.RACE,Ju=ye.ROLE,Zu=new g.Logger("DashboardSagas"),Xu="Respondent Name",$u="Referral Agency",el="Date Referred",tl="Charge",nl="Date of Intake",rl="Case Outcome",al="Race",sl="Gender",il="Age of Time of Referral",ol="CRC Staff Assigned";function cl(e){var t,n,r,a,s,o,c,u,l,p,d,f,m,g,E,h,S,I,y,v,x,N,A,T,C,D,R,M,b,L,_,O,w,U,j,k,P,F,q,G,K,z,B,H,V,Y,Q,W,J,Z;return Qa().wrap((function(X){for(;;)switch(X.prev=X.next){case 0:return t=e.id,n={},X.prev=2,X.next=5,(0,Za.put)(en.request(t));case 5:return a=e.value,s=a.endDate,o=a.onlyRepeatReferrals,c=a.selectedAgency,u=a.selectedCharge,l=a.selectedGender,p=a.selectedRace,d=a.startDate,f=Du(c,[Yu,0]),m=Cu(c),g=Du(u,[Yu,0]),E=vo.DateTime.fromISO(d),h=vo.DateTime.fromISO(s),X.next=13,(0,Za.select)(mi(Uu));case 13:return S=X.sent,X.next=16,(0,Za.select)(mi(qu));case 16:if(I=X.sent,y=(0,i.List)(),!c.isEmpty()){X.next=40;break}if(d.length||s.length){X.next=28;break}return X.next=22,(0,Za.call)(vu,yu({entitySetId:I}));case 22:if(!(v=X.sent).error){X.next=25;break}throw v.error;case 25:y=(0,i.fromJS)(v.data),X.next=38;break;case 28:return X.next=30,(0,Za.select)(gi(zu));case 30:return x=X.sent,N={entitySetIds:[I],start:0,maxHits:1e4,constraints:[{min:1,constraints:[{searchTerm:xo(x,"day",E,h),fuzzy:!1}]}]},X.next=34,(0,Za.call)(Tu,Nu(N));case 34:if(!(A=X.sent).error){X.next=37;break}throw A.error;case 37:y=(0,i.fromJS)(A.data.hits);case 38:X.next=49;break;case 40:if(c.isEmpty()){X.next=49;break}return C={entityKeyIds:[m],destinationEntitySetIds:[],sourceEntitySetIds:[I]},X.next=44,(0,Za.call)(Au,xu({entitySetId:S,filter:C}));case 44:if(!(D=X.sent).error){X.next=47;break}throw D.error;case 47:y=Li()(T=(0,i.fromJS)(D.data[m])).call(T,(function(e){return xi(e)})),(d.length||s.length)&&(y=Wi()(y).call(y,(function(e){var t=Du(e,[zu,0]),n=vo.DateTime.fromISO(t),r=!0;return E.isValid||h.isValid?(E.isValid&&n.valueOf()<E.valueOf()&&(r=!1),h.isValid&&h.valueOf()<n.valueOf()&&(r=!1),r):r})));case 49:return R=[],M=(0,i.Map)().withMutations((function(e){ls()(y).call(y,(function(t){var n=Cu(t);e.set(n,t),n&&R.push(n)}))})),X.next=53,(0,Za.select)(mi(ku));case 53:return b=X.sent,X.next=56,(0,Za.select)(mi(ju));case 56:return L=X.sent,X.next=59,(0,Za.select)(mi(Pu));case 59:return _=X.sent,X.next=62,(0,Za.select)(mi(Gu));case 62:return O=X.sent,X.next=65,(0,Za.select)(mi(Ku));case 65:if(w=X.sent,U=(0,i.Map)().asMutable(),j=(0,i.Map)(),k=(0,i.Map)(),P=(0,i.Map)(),!R.length){X.next=99;break}return q={entityKeyIds:R,destinationEntitySetIds:[b],sourceEntitySetIds:[]},c.isEmpty()&&q.destinationEntitySetIds.push(S),X.next=75,(0,Za.call)(Au,xu({entitySetId:I,filter:q}));case 75:if(!(G=X.sent).error){X.next=78;break}throw G.error;case 78:return K=[],j=(0,i.Map)().withMutations((function(e){var t;ls()(t=(0,i.fromJS)(G.data)).call(t,(function(t,n){var r=xn()(t).call(t,(function(e){return Ni(e)===b})),a=xi(r),s=Cu(a);e.set(n,s),s&&K.push(s);var i=xn()(t).call(t,(function(e){return Ni(e)===S})),o=xi(i),c=Du(o,[Yu,0]);U.set(n,c)}))})),q={entityKeyIds:K,destinationEntitySetIds:[w],sourceEntitySetIds:[L,_,O]},X.next=83,(0,Za.call)(Au,xu({entitySetId:b,filter:q}));case 83:if(!(G=X.sent).error){X.next=86;break}throw G.error;case 86:return k=(0,i.fromJS)(G.data),z=[],ls()(k).call(k,(function(e){var t=xn()(e).call(e,(function(e){var t=Ni(e),n=yi(e),r=Du(n,[Ju,0]);return t===_&&"Respondent"===r}));if(Mu(t)){var n=Cu(xi(t));n&&z.push(n)}})),X.next=91,(0,Za.select)(mi(Fu));case 91:return B=X.sent,q={entityKeyIds:z,destinationEntitySetIds:[B],sourceEntitySetIds:[]},X.next=95,(0,Za.call)(Au,xu({entitySetId:_,filter:q}));case 95:if(!(G=X.sent).error){X.next=98;break}throw G.error;case 98:P=Li()(F=(0,i.fromJS)(G.data)).call(F,(function(e){var t=xi(e.get(0,(0,i.Map)()));return Du(t,[Vu,0])}));case 99:return H=(0,i.Map)().withMutations((function(e){ls()(k).call(k,(function(t,n){var r=xn()(t).call(t,(function(e){return Ni(e)===_}));Mu(r)&&e.set(n,xi(r))}))})),R=bu(g,R,j,k,L),R=Ou(p,R,j,H),R=Lu(l,R,j,H,P),o&&(V=H.valueSeq().toList(),Y=wu(V),R=_u(Y,R,j,H)),Q=(0,i.List)().withMutations((function(e){ls()(R).call(R,(function(t){var n,r=M.get(t,(0,i.Map)()),a=Du(r,[zu,0]),s=Ru(a),o=j.get(t,""),c=k.get(o,(0,i.List)()),u=xn()(c).call(c,(function(e){return Ni(e)===L})),l="";if(Mu(u)){var p=xi(u);l=Du(p,[Yu,0])}var d=H.get(o,(0,i.Map)()),m=Cu(d),g=Ce(d),E=Du(d,[Wu,0]),h=P.get(m,""),S="",I=Du(d,[Bu,0]),y=vo.DateTime.fromISO(a).diff(vo.DateTime.fromISO(I),"years").toObject().years;y&&(S=Math.floor(y));var v=xn()(c).call(c,(function(e){return Ni(e)===O})),x="";if(Mu(v)){var N=xi(v);x=Ce(N)}var A=Li()(n=Wi()(c).call(c,(function(e){return Ni(e)===w}))).call(n,(function(e){return xi(e)})),T="",C=xn()(A).call(A,(function(e){return"Intake"===Du(e,[ye.STATUS,0])}));if(Mu(C)){var D=Du(C,[Hu,0]);T=Ru(D)}var R="",b=xn()(A).call(A,(function(e){return"Closed"===Du(e,[ye.STATUS,0])}));Mu(b)&&(R=Du(b,[Qu,0]));var _="";_=f||U.get(t,"");var F=(0,i.OrderedMap)().set(Xu,g).set($u,_).set(el,s).set(tl,l).set(nl,T).set(rl,R).set(al,E).set(sl,h).set(il,S).set(ol,x);e.push(F)}))})).sortBy((function(e){return e.get(Xu,"").split(" ")[1]})),W=Yo().unparse(Q.toJS()),J=new Blob([W],{type:"text/csv"}),Z="Referrals",f&&(Z=ge()(r="".concat(f,"_")).call(r,Z)),Ho().saveAs(J,ge()(Z).call(Z,".csv")),X.next=112,(0,Za.put)(en.success(t));case 112:X.next=120;break;case 114:return X.prev=114,X.t0=X.catch(2),n.error=X.t0,Zu.error(e.type,X.t0),X.next=120,(0,Za.put)(en.failure(t,X.t0));case 120:return X.prev=120,X.next=123,(0,Za.put)(en.finally(t));case 123:return X.finish(120);case 124:return X.abrupt("return",n);case 125:case"end":return X.stop()}}),Su,null,[[2,114,120,124]])}function ul(){return Qa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Za.takeEvery)($t,cl);case 2:case"end":return e.stop()}}),Iu)}var ll=Qa().mark(fl),pl=Qa().mark(ml),dl=new g.Logger("IntakeSagas");function fl(e){var t,n,r,a;return Qa().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.id,n={},s.prev=2,s.next=5,(0,Za.put)(Ve.request(t));case 5:return r=e.value,s.next=8,(0,Za.call)(ti,js(r));case 8:if(!(a=s.sent).error){s.next=11;break}throw a.error;case 11:return s.next=13,(0,Za.put)(Ve.success(t));case 13:s.next=21;break;case 15:return s.prev=15,s.t0=s.catch(2),n.error=s.t0,dl.error(e.type,s.t0),s.next=21,(0,Za.put)(Ve.failure(t,s.t0));case 21:return s.prev=21,s.next=24,(0,Za.put)(Ve.finally(t));case 24:return s.finish(21);case 25:return s.abrupt("return",n);case 26:case"end":return s.stop()}}),ll,null,[[2,15,21,25]])}function ml(){return Qa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Za.takeEvery)(He,fl);case 2:case"end":return e.stop()}}),pl)}var gl=new Error("invalid parameter: action.value is required and must be defined"),El=new Error("invalid parameter: action.value is the incorrect type"),hl=(new Error('invalid route: a route must be a non-empty string that starts with "/"'),new Error("invalid uuid"),new Error("unexpected state"),new Error("caught exception in worker saga"),Qa().mark(Tl)),Sl=Qa().mark(Cl),Il=g.LangUtils.isDefined,yl=Se.COMMUNICATION,vl=Se.FORM,xl=Se.PEACEMAKER_STATUS,Nl=Se.PERSON_DETAILS,Al=new g.Logger("PeacemakerSagas");function Tl(e){var t,n,r,a,s,o,c,u,l,p,d,f,m,g,E,h,S,I,y,v,x,N,A;return Qa().wrap((function(T){for(;;)switch(T.prev=T.next){case 0:return t=e.id,n={},T.prev=2,T.next=5,(0,Za.put)(mn.request(t));case 5:if(r=e.value,Il(r)){T.next=8;break}throw gl;case 8:return T.next=10,(0,Za.call)(ti,js(r));case 10:if(!(a=T.sent).error){T.next=13;break}throw a.error;case 13:return s=a.data.entityKeyIds,o=r.entityData,T.next=17,(0,Za.select)(mi(yl));case 17:return c=T.sent,T.next=20,(0,Za.select)(mi(vl));case 20:return u=T.sent,T.next=23,(0,Za.select)(mi(Nl));case 23:return l=T.sent,T.next=26,(0,Za.select)(mi(xl));case 26:return p=T.sent,d=(0,i.getIn)(s,[c,0]),f=(0,i.getIn)(s,[u,0]),m=(0,i.getIn)(s,[l,0]),g=(0,i.getIn)(s,[p,0]),E=(0,i.getIn)(o,[c,0]),h=(0,i.getIn)(o,[u,0]),S=(0,i.getIn)(o,[l,0]),I=(0,i.getIn)(o,[p,0]),T.next=37,(0,Za.select)((function(e){return e.getIn([_,H])}));case 37:return y=T.sent,v=Ii(E,y,d),x=Ii(h,y,f),N=Ii(S,y,m),A=Ii(I,y,g),T.next=44,(0,Za.put)(mn.success(t,{newCommunication:v,newForm:x,newPeacemakerStatus:A,newPersonDetails:N}));case 44:T.next=52;break;case 46:return T.prev=46,T.t0=T.catch(2),n.error=T.t0,Al.error(e.type,T.t0),T.next=52,(0,Za.put)(mn.failure(t,T.t0));case 52:return T.prev=52,T.next=55,(0,Za.put)(mn.finally(t));case 55:return T.finish(52);case 56:return T.abrupt("return",n);case 57:case"end":return T.stop()}}),hl,null,[[2,46,52,56]])}function Cl(){return Qa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Za.takeEvery)(fn,Tl);case 2:case"end":return e.stop()}}),Sl)}var Dl=Qa().mark(ql),Rl=Qa().mark(Gl),Ml=g.LangUtils.isDefined,bl=Se.COMMUNICATION,Ll=Se.FORM,_l=Se.HAS,Ol=Se.PEACEMAKER_STATUS,wl=Se.PEOPLE,Ul=Se.PERSON_DETAILS,jl=ye.EFFECTIVE_DATE,kl=ye.GENERAL_DATETIME,Pl=ye.STATUS,Fl=new g.Logger("PeacemakerSagas");function ql(e){var t,n,r,a,s,o,c,u,l,p,f,m,g,E,h,S,I,y,v,x,N,A,T,C,D,R,M,b,L,O,w,U,j,k,P,F,q,G,K,z;return Qa().wrap((function(B){for(;;)switch(B.prev=B.next){case 0:return t=e.id,n=e.value,B.prev=1,B.next=4,(0,Za.put)(En.request(t));case 4:if(Ml(n)){B.next=6;break}throw gl;case 6:return r=n.entityData,a=n.formEKID,s=n.peacemakerStatusEKID,o=n.personEKID,B.next=9,(0,Za.select)((function(e){return e.getIn([_,H])}));case 9:return c=B.sent,B.next=12,(0,Za.select)(mi(Ll));case 12:return u=B.sent,B.next=15,(0,Za.select)(gi(kl));case 15:return l=B.sent,p=(0,i.getIn)(r,[u,a,l,0]),f=vo.DateTime.local(),m=r,Ml(p)&&(g=vo.DateTime.fromSQL(ge()(p).call(p," ",f.toISOTime())).toISO(),m=(0,i.setIn)(m,[u,a,l,0],g)),E=(0,i.Map)(),B.next=23,(0,Za.select)(mi(Ol));case 23:return h=B.sent,B.next=26,(0,Za.select)(gi(Pl));case 26:if(S=B.sent,I=(0,i.getIn)(r,[h,s,S,0]),!Ml(I)){B.next=49;break}return B.next=31,(0,Za.select)(gi(jl));case 31:return v=B.sent,x=d()({},h,[(y={},d()(y,S,[I]),d()(y,v,[f.toISO()]),y)]),m=(0,i.remove)(m,h),B.next=36,(0,Za.select)(mi(_l));case 36:return N=B.sent,B.next=39,(0,Za.select)(mi(wl));case 39:return A=B.sent,T=d()({},N,[{data:{},srcEntitySetId:A,srcEntityKeyId:o,dstEntitySetId:h,dstEntityIndex:0}]),B.next=43,(0,Za.call)(ti,js({associationEntityData:T,entityData:x}));case 43:if(!(C=B.sent).error){B.next=46;break}throw C.error;case 46:D=C.data.entityKeyIds,R=(0,i.getIn)(D,[h,0]),E=Ii((0,i.getIn)(x,[h,0]),c,R);case 49:return B.next=51,(0,Za.call)(pi,Ps({entityData:m}));case 51:if(!(M=B.sent).error){B.next=54;break}throw M.error;case 54:return B.next=56,(0,Za.select)(mi(bl));case 56:return b=B.sent,B.next=59,(0,Za.select)(mi(Ul));case 59:return L=B.sent,O=(0,i.get)(r,b),w=(0,i.get)(r,u),U=(0,i.get)(r,L),j=O?ai()(O)[0]:void 0,k=U?ai()(U)[0]:void 0,P=O&&j?O[j]:void 0,F=w&&a?w[a]:void 0,q=U&&k?U[k]:void 0,G=Ii(P,c),K=Ii(F,c),z=Ii(q,c),B.next=73,(0,Za.put)(En.success(t,{newCommunication:G,newForm:K,newPeacemakerStatus:E,newPersonDetails:z}));case 73:B.next=80;break;case 75:return B.prev=75,B.t0=B.catch(1),Fl.error(e.type,B.t0),B.next=80,(0,Za.put)(En.failure(t,B.t0));case 80:return B.prev=80,B.next=83,(0,Za.put)(En.finally(t));case 83:return B.finish(80);case 84:case"end":return B.stop()}}),Dl,null,[[1,75,80,84]])}function Gl(){return Qa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Za.takeEvery)(gn,ql);case 2:case"end":return e.stop()}}),Rl)}var Kl=Qa().mark(Yl),zl=Qa().mark(Ql),Bl=g.LangUtils.isDefined,Hl=Se.STATUS,Vl=new g.Logger("ProfileSagas");function Yl(e){var t,n,r,a,s,i,o,c,u,l,p,d,f;return Qa().wrap((function(m){for(;;)switch(m.prev=m.next){case 0:return t=e.id,n={},m.prev=2,m.next=5,(0,Za.put)(An.request(t));case 5:if(r=e.value,Bl(r)){m.next=8;break}throw gl;case 8:return a=r.associationEntityData,s=r.entityData,m.next=11,(0,Za.call)(ti,js({associationEntityData:a,entityData:s}));case 11:if(!(i=m.sent).error){m.next=14;break}throw i.error;case 14:return o=i.data.entityKeyIds,c=r.caseEKID,u=r.selectedStaffEKID,m.next=18,(0,Za.select)(mi(Hl));case 18:return l=m.sent,p=o[l][0],m.next=22,(0,Za.select)((function(e){return e.getIn([_,H])}));case 22:return d=m.sent,f=Ii(s[l][0],d,p),m.next=26,(0,Za.put)(An.success(t,{caseEKID:c,newStatus:f,selectedStaffEKID:u}));case 26:m.next=34;break;case 28:return m.prev=28,m.t0=m.catch(2),n.error=m.t0,Vl.error(e.type,m.t0),m.next=34,(0,Za.put)(An.failure(t,m.t0));case 34:return m.prev=34,m.next=37,(0,Za.put)(An.finally(t));case 37:return m.finish(34);case 38:return m.abrupt("return",n);case 39:case"end":return m.stop()}}),Kl,null,[[2,28,34,38]])}function Ql(){return Qa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Za.takeEvery)(Nn,Yl);case 2:case"end":return e.stop()}}),zl)}var Wl=Qa().mark(ep),Jl=Qa().mark(tp),Zl=g.LangUtils.isDefined,Xl=Se.CONTACT_ACTIVITY,$l=new g.Logger("ProfileSagas");function ep(e){var t,n,r,a,s,i,o,c,u,l;return Qa().wrap((function(p){for(;;)switch(p.prev=p.next){case 0:return t=e.id,n={},p.prev=2,p.next=5,(0,Za.put)(Cn.request(t));case 5:if(r=e.value,Zl(r)){p.next=8;break}throw gl;case 8:return p.next=10,(0,Za.call)(ti,js(r));case 10:if(!(a=p.sent).error){p.next=13;break}throw a.error;case 13:return s=a.data.entityKeyIds,i=r.entityData,p.next=17,(0,Za.select)(mi(Xl));case 17:return o=p.sent,c=s[o][0],p.next=21,(0,Za.select)((function(e){return e.getIn([_,H])}));case 21:return u=p.sent,l=Ii(i[o][0],u,c),p.next=25,(0,Za.put)(Cn.success(t,l));case 25:p.next=33;break;case 27:return p.prev=27,p.t0=p.catch(2),n.error=p.t0,$l.error(e.type,p.t0),p.next=33,(0,Za.put)(Cn.failure(t,p.t0));case 33:return p.prev=33,p.next=36,(0,Za.put)(Cn.finally(t));case 36:return p.finish(33);case 37:return p.abrupt("return",n);case 38:case"end":return p.stop()}}),Wl,null,[[2,27,33,37]])}function tp(){return Qa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Za.takeEvery)(Tn,ep);case 2:case"end":return e.stop()}}),Jl)}const np=require("lattice-fabricate");var rp=g.DataUtils.getEntityKeyId,ap=g.DataUtils.getPropertyValue,sp=function(e,t,n,r){if(t.isEmpty())return e;var a=[],s=[];ls()(t).call(t,(function(e){var t="";ls()(n).call(n,(function(n){var r=ap(e,[n,0],"");t=ge()(t).call(t," ",r)})),s.push(t),a.push(rp(e))}));var o=(0,i.setIn)(e,ge()(r).call(r,["enum"]),a);return o=(0,i.setIn)(o,ge()(r).call(r,["enumNames"]),s)},ip=g.LangUtils.isDefined,op=function(e,t){var n=(0,i.getIn)(e,t);if(!ip(n))return e;var r=vo.DateTime.local();return(0,i.setIn)(e,t,vo.DateTime.fromSQL(ge()(n).call(n," ",r.toISOTime())).toISO())},cp=Se.DA_CASE,up=ye.DA_CASE_NUMBER,lp=ye.NOTES,pp=ye.SURNAME,dp=g.DataUtils.getEntityKeyId,fp=g.DataUtils.getPropertyValue;function mp(e,t,n,r){return Li()(e).call(e,(function(e){var a=t.get(dp(e)).getIn(["Respondent",0],(0,i.Map)()),s=Ce(a),o=e.set(pp,(0,i.List)(["- ".concat(s)])),c=dp(e),u=n.getIn([c,0],(0,i.Map)()),l=dp(u),p=r.getIn([cp,l,0],(0,i.Map)()),d=fp(p,[up,0]);return d&&(o=o.set(lp,(0,i.List)([d]))),o}))}var gp=Qa().mark(Dp),Ep=Qa().mark(Rp),hp=Se.APPEARS_IN,Sp=Se.CRC_CASE,Ip=Se.ORGANIZATIONS,yp=Se.PEOPLE,vp=Se.STAFF,xp=ye.GENERAL_DATETIME,Np=ye.ROLE,Ap=np.DataProcessingUtils.getEntityAddressKey,Tp=np.DataProcessingUtils.getPageSectionKey,Cp=new g.Logger("ProfileSagas");function Dp(e){var t,n,r,a,s,o,c,u,l,p,f,m,g,E,h,S,I,y,v,x,N,A,T;return Qa().wrap((function(C){for(;;)switch(C.prev=C.next){case 0:return t=e.id,n=e.value,C.prev=1,C.next=4,(0,Za.put)(Rn.request(t));case 4:return s=n.caseEKID,o=n.entityEKID,c=n.formData,u=n.searchContext,C.next=7,(0,Za.select)(mi(hp));case 7:return l=C.sent,C.next=10,(0,Za.select)(mi(Sp));case 10:return p=C.sent,C.next=13,(0,Za.select)(mi(yp));case 13:return f=C.sent,C.next=16,(0,Za.select)(mi(vp));case 16:return m=C.sent,C.next=19,(0,Za.select)(mi(Ip));case 19:return g=C.sent,E=f,"crcStaff"===u&&(E=m),"organizations"===u&&(E=g),C.next=25,(0,Za.select)(gi(xp));case 25:return h=C.sent,C.next=28,(0,Za.select)(gi(Np));case 28:return S=C.sent,I=[Tp(1,1),Ap(0,hp,xp)],y=op(c,I),v=(0,i.getIn)(y,I),x=(0,i.getIn)(y,[Tp(1,1),Ap(0,hp,Np)]),N=d()({},l,[{data:(a={},d()(a,h,[v]),d()(a,S,[x]),a),src:{entitySetId:E,entityKeyId:o},dst:{entitySetId:p,entityKeyId:s}}]),C.next=36,(0,Za.call)(Qs,_s({associations:N,associationsToDelete:[]}));case 36:if(!(A=C.sent).error){C.next=39;break}throw A.error;case 39:return r={data:A.data},T=n.selectedPerson,C.next=43,(0,Za.put)(Rn.success(t,{caseEKID:s,person:T,role:x}));case 43:C.next=51;break;case 45:return C.prev=45,C.t0=C.catch(1),r={error:C.t0},Cp.error(e.type,C.t0),C.next=51,(0,Za.put)(Rn.failure(t,C.t0));case 51:return C.prev=51,C.next=54,(0,Za.put)(Rn.finally(t));case 54:return C.finish(51);case 55:return C.abrupt("return",r);case 56:case"end":return C.stop()}}),gp,null,[[1,45,51,55]])}function Rp(){return Qa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Za.takeEvery)(Dn,Dp);case 2:case"end":return e.stop()}}),Ep)}var Mp=Qa().mark(Op),bp=Qa().mark(wp),Lp=Se.LOCATION,_p=new g.Logger("ProfileSagas");function Op(e){var t,n,r,a,s,o,c,u,l,p,d;return Qa().wrap((function(f){for(;;)switch(f.prev=f.next){case 0:return t=e.id,f.prev=1,f.next=4,(0,Za.put)(_n.request(t));case 4:return r=e.value,a=r.entityData,f.next=8,(0,Za.call)(pi,Ps({entityData:a}));case 8:if(!(s=f.sent).error){f.next=11;break}throw s.error;case 11:return f.next=13,(0,Za.select)(mi(Lp));case 13:return o=f.sent,f.next=16,(0,Za.select)((function(e){return e.getIn([_,H])}));case 16:return c=f.sent,u=(0,i.get)(a,o),l=u?ai()(u)[0]:void 0,p=u&&l?u[l]:void 0,d=Ii(p,c,l),n={data:d},f.next=24,(0,Za.put)(_n.success(t,d));case 24:f.next=32;break;case 26:return f.prev=26,f.t0=f.catch(1),n={error:f.t0},_p.error(e.type,f.t0),f.next=32,(0,Za.put)(_n.failure(t,f.t0));case 32:return f.prev=32,f.next=35,(0,Za.put)(_n.finally(t));case 35:return f.finish(32);case 36:return f.abrupt("return",n);case 37:case"end":return f.stop()}}),Mp,null,[[1,26,32,36]])}function wp(){return Qa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Za.takeEvery)(Ln,Op);case 2:case"end":return e.stop()}}),bp)}var Up=Qa().mark(Fp),jp=Qa().mark(qp),kp=Se.CONTACT_INFO,Pp=new g.Logger("ProfileSagas");function Fp(e){var t,n,r,a,s,o,c,u,l,p,d;return Qa().wrap((function(f){for(;;)switch(f.prev=f.next){case 0:return t=e.id,f.prev=1,f.next=4,(0,Za.put)(wn.request(t));case 4:return r=e.value,a=r.entityData,f.next=8,(0,Za.call)(pi,Ps({entityData:a}));case 8:if(!(s=f.sent).error){f.next=11;break}throw s.error;case 11:return f.next=13,(0,Za.select)(mi(kp));case 13:return o=f.sent,f.next=16,(0,Za.select)((function(e){return e.getIn([_,H])}));case 16:return c=f.sent,u=(0,i.get)(a,o),l=u?ai()(u)[0]:void 0,p=u&&l?u[l]:void 0,d=Ii(p,c,l),n={data:d},f.next=24,(0,Za.put)(wn.success(t,d));case 24:f.next=32;break;case 26:return f.prev=26,f.t0=f.catch(1),n={error:f.t0},Pp.error(e.type,f.t0),f.next=32,(0,Za.put)(wn.failure(t,f.t0));case 32:return f.prev=32,f.next=35,(0,Za.put)(wn.finally(t));case 35:return f.finish(32);case 36:return f.abrupt("return",n);case 37:case"end":return f.stop()}}),Up,null,[[1,26,32,36]])}function qp(){return Qa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Za.takeEvery)(On,Fp);case 2:case"end":return e.stop()}}),jp)}var Gp=Qa().mark(Hp),Kp=Qa().mark(Vp),zp=Se.CRC_CASE,Bp=new g.Logger("ProfileSagas");function Hp(e){var t,n,r,a,s,o,c,u,l,p,d;return Qa().wrap((function(f){for(;;)switch(f.prev=f.next){case 0:return t=e.id,f.prev=1,f.next=4,(0,Za.put)(jn.request(t));case 4:return r=e.value,a=r.entityData,f.next=8,(0,Za.call)(pi,Ps({entityData:a}));case 8:if(!(s=f.sent).error){f.next=11;break}throw s.error;case 11:return f.next=13,(0,Za.select)(mi(zp));case 13:return o=f.sent,f.next=16,(0,Za.select)((function(e){return e.getIn([_,H])}));case 16:return c=f.sent,u=(0,i.get)(a,o),l=u?ai()(u)[0]:void 0,p=u&&l?u[l]:void 0,d=Ii(p,c),n={data:d},f.next=24,(0,Za.put)(jn.success(t,{crcCaseEKID:l,newCRCCase:d}));case 24:f.next=32;break;case 26:return f.prev=26,f.t0=f.catch(1),n={error:f.t0},Bp.error(e.type,f.t0),f.next=32,(0,Za.put)(jn.failure(t,f.t0));case 32:return f.prev=32,f.next=35,(0,Za.put)(jn.finally(t));case 35:return f.finish(32);case 36:return f.abrupt("return",n);case 37:case"end":return f.stop()}}),Gp,null,[[1,26,32,36]])}function Vp(){return Qa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Za.takeEvery)(Un,Hp);case 2:case"end":return e.stop()}}),Kp)}var Yp=Qa().mark(Zp),Qp=Qa().mark(Xp),Wp=Se.PEOPLE,Jp=new g.Logger("ProfileSagas");function Zp(e){var t,n,r,a,s,o,c,u,l,p,d;return Qa().wrap((function(f){for(;;)switch(f.prev=f.next){case 0:return t=e.id,f.prev=1,f.next=4,(0,Za.put)(Pn.request(t));case 4:return r=e.value,a=r.entityData,f.next=8,(0,Za.call)(pi,Ps({entityData:a}));case 8:if(!(s=f.sent).error){f.next=11;break}throw s.error;case 11:return f.next=13,(0,Za.select)(mi(Wp));case 13:return o=f.sent,f.next=16,(0,Za.select)((function(e){return e.getIn([_,H])}));case 16:return c=f.sent,u=(0,i.get)(a,o),l=u?ai()(u)[0]:void 0,p=u&&l?u[l]:void 0,d=Ii(p,c),n={data:d},f.next=24,(0,Za.put)(Pn.success(t,d));case 24:f.next=32;break;case 26:return f.prev=26,f.t0=f.catch(1),n={error:f.t0},Jp.error(e.type,f.t0),f.next=32,(0,Za.put)(Pn.failure(t,f.t0));case 32:return f.prev=32,f.next=35,(0,Za.put)(Pn.finally(t));case 35:return f.finish(32);case 36:return f.abrupt("return",n);case 37:case"end":return f.stop()}}),Yp,null,[[1,26,32,36]])}function Xp(){return Qa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Za.takeEvery)(kn,Zp);case 2:case"end":return e.stop()}}),Qp)}var $p=Qa().mark(rd),ed=Qa().mark(ad),td=Se.PERSON_DETAILS,nd=new g.Logger("ProfileSagas");function rd(e){var t,n,r,a,s,o,c,u,l,p,d;return Qa().wrap((function(f){for(;;)switch(f.prev=f.next){case 0:return t=e.id,f.prev=1,f.next=4,(0,Za.put)(qn.request(t));case 4:return r=e.value,a=r.entityData,f.next=8,(0,Za.call)(pi,Ps({entityData:a}));case 8:if(!(s=f.sent).error){f.next=11;break}throw s.error;case 11:return f.next=13,(0,Za.select)(mi(td));case 13:return o=f.sent,f.next=16,(0,Za.select)((function(e){return e.getIn([_,H])}));case 16:return c=f.sent,u=(0,i.get)(a,o),l=u?ai()(u)[0]:void 0,p=u&&l?u[l]:void 0,d=Ii(p,c),n={data:d},f.next=24,(0,Za.put)(qn.success(t,d));case 24:f.next=32;break;case 26:return f.prev=26,f.t0=f.catch(1),n={error:f.t0},nd.error(e.type,f.t0),f.next=32,(0,Za.put)(qn.failure(t,f.t0));case 32:return f.prev=32,f.next=35,(0,Za.put)(qn.finally(t));case 35:return f.finish(32);case 36:return f.abrupt("return",n);case 37:case"end":return f.stop()}}),$p,null,[[1,26,32,36]])}function ad(){return Qa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Za.takeEvery)(Fn,rd);case 2:case"end":return e.stop()}}),ed)}var sd=Qa().mark(dd),id=Qa().mark(fd),od=g.LangUtils.isDefined,cd=Xa.DataApiActions.getEntityData,ud=Xa.DataApiSagas.getEntityDataWorker,ld=Se.PEOPLE,pd=new g.Logger("ProfileSagas");function dd(e){var t,n,r,a,s,o,c;return Qa().wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return t=e.id,n={},u.prev=2,u.next=5,(0,Za.put)(Kn.request(t));case 5:if(r=e.value,od(r)){u.next=8;break}throw gl;case 8:return a=r,u.next=11,(0,Za.select)(mi(ld));case 11:return s=u.sent,u.next=14,(0,Za.call)(ud,cd({entitySetId:s,entityKeyId:a}));case 14:if(!(o=u.sent).error){u.next=17;break}throw o.error;case 17:return c=(0,i.fromJS)(o.data),n.data=c,u.next=21,(0,Za.put)(Kn.success(t,c));case 21:u.next=29;break;case 23:return u.prev=23,u.t0=u.catch(2),n.error=u.t0,pd.error(e.type,u.t0),u.next=29,(0,Za.put)(Kn.failure(t,u.t0));case 29:return u.prev=29,u.next=32,(0,Za.put)(Kn.finally(t));case 32:return u.finish(29);case 33:return u.abrupt("return",n);case 34:case"end":return u.stop()}}),sd,null,[[2,23,29,33]])}function fd(){return Qa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Za.takeEvery)(Gn,dd);case 2:case"end":return e.stop()}}),id)}var md=Qa().mark(yd),gd=Qa().mark(vd),Ed=Xa.DataApiActions.getEntitySetData,hd=Xa.DataApiSagas.getEntitySetDataWorker,Sd=Se.AGENCY,Id=new g.Logger("ReferralSagas");function yd(e){var t,n,r,a,s;return Qa().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.id,n={},o.prev=2,o.next=5,(0,Za.put)(Qe.request(t));case 5:return o.next=7,(0,Za.select)(mi(Sd));case 7:return r=o.sent,o.next=10,(0,Za.call)(hd,Ed({entitySetId:r}));case 10:if(!(a=o.sent).error){o.next=13;break}throw a.error;case 13:return s=(0,i.fromJS)(a.data),n.data=s,o.next=17,(0,Za.put)(Qe.success(t,s));case 17:o.next=25;break;case 19:return o.prev=19,o.t0=o.catch(2),n.error=o.t0,Id.error(e.type,o.t0),o.next=25,(0,Za.put)(Qe.failure(t,o.t0));case 25:return o.prev=25,o.next=28,(0,Za.put)(Qe.finally(t));case 28:return o.finish(25);case 29:return o.abrupt("return",n);case 30:case"end":return o.stop()}}),md,null,[[2,19,25,29]])}function vd(){return Qa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Za.takeEvery)(Ye,yd);case 2:case"end":return e.stop()}}),gd)}var xd=Qa().mark(Rd),Nd=Qa().mark(Md),Ad=Xa.DataApiActions.getEntitySetData,Td=Xa.DataApiSagas.getEntitySetDataWorker,Cd=Se.PEOPLE,Dd=new g.Logger("ReferralSagas");function Rd(e){var t,n,r,a,s;return Qa().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.id,n={},o.prev=2,o.next=5,(0,Za.put)(Xe.request(t));case 5:return o.next=7,(0,Za.select)(mi(Cd));case 7:return r=o.sent,o.next=10,(0,Za.call)(Td,Ad({entitySetId:r}));case 10:if(!(a=o.sent).error){o.next=13;break}throw a.error;case 13:return s=(0,i.fromJS)(a.data),n.data=s,o.next=17,(0,Za.put)(Xe.success(t,s));case 17:o.next=25;break;case 19:return o.prev=19,o.t0=o.catch(2),n.error=o.t0,Dd.error(e.type,o.t0),o.next=25,(0,Za.put)(Xe.failure(t,o.t0));case 25:return o.prev=25,o.next=28,(0,Za.put)(Xe.finally(t));case 28:return o.finish(25);case 29:return o.abrupt("return",n);case 30:case"end":return o.stop()}}),xd,null,[[2,19,25,29]])}function Md(){return Qa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Za.takeEvery)(Ze,Rd);case 2:case"end":return e.stop()}}),Nd)}var bd=Qa().mark(jd),Ld=Qa().mark(kd),_d=Xa.DataApiActions.getEntitySetData,Od=Xa.DataApiSagas.getEntitySetDataWorker,wd=Se.CHARGES,Ud=new g.Logger("ReferralSagas");function jd(e){var t,n,r,a,s;return Qa().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.id,n={},o.prev=2,o.next=5,(0,Za.put)(Je.request(t));case 5:return o.next=7,(0,Za.select)(mi(wd));case 7:return r=o.sent,o.next=10,(0,Za.call)(Od,_d({entitySetId:r}));case 10:if(!(a=o.sent).error){o.next=13;break}throw a.error;case 13:return s=(0,i.fromJS)(a.data),n.data=s,o.next=17,(0,Za.put)(Je.success(t,s));case 17:o.next=25;break;case 19:return o.prev=19,o.t0=o.catch(2),n.error=o.t0,Ud.error(e.type,o.t0),o.next=25,(0,Za.put)(Je.failure(t,o.t0));case 25:return o.prev=25,o.next=28,(0,Za.put)(Je.finally(t));case 28:return o.finish(25);case 29:return o.abrupt("return",n);case 30:case"end":return o.stop()}}),bd,null,[[2,19,25,29]])}function kd(){return Qa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Za.takeEvery)(We,jd);case 2:case"end":return e.stop()}}),Ld)}var Pd=Qa().mark(Bd),Fd=Qa().mark(Hd),qd=Xa.DataApiActions.getEntitySetData,Gd=Xa.DataApiSagas.getEntitySetDataWorker,Kd=Se.ORGANIZATIONS,zd=new g.Logger("ReferralSagas");function Bd(e){var t,n,r,a,s;return Qa().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.id,n={},o.prev=2,o.next=5,(0,Za.put)(et.request(t));case 5:return o.next=7,(0,Za.select)(mi(Kd));case 7:return r=o.sent,o.next=10,(0,Za.call)(Gd,qd({entitySetId:r}));case 10:if(!(a=o.sent).error){o.next=13;break}throw a.error;case 13:return s=(0,i.fromJS)(a.data),n.data=s,o.next=17,(0,Za.put)(et.success(t,s));case 17:o.next=25;break;case 19:return o.prev=19,o.t0=o.catch(2),n.error=o.t0,zd.error(e.type,o.t0),o.next=25,(0,Za.put)(et.failure(t,o.t0));case 25:return o.prev=25,o.next=28,(0,Za.put)(et.finally(t));case 28:return o.finish(25);case 29:return o.abrupt("return",n);case 30:case"end":return o.stop()}}),Pd,null,[[2,19,25,29]])}function Hd(){return Qa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Za.takeEvery)($e,Bd);case 2:case"end":return e.stop()}}),Fd)}var Vd=Qa().mark(nf),Yd=Qa().mark(rf),Qd=(Ee.Models.FQN,Se.AGENCY),Wd=Se.DA_CASE,Jd=Se.OFFENSE,Zd=Se.OFFICERS,Xd=Se.REFERRAL_REQUEST,$d=Xa.SearchApiActions.searchEntityNeighborsWithFilter,ef=Xa.SearchApiSagas.searchEntityNeighborsWithFilterWorker,tf=new g.Logger("ReferralSagas");function nf(e){var t,n,r,a,s,o,c,u,l,p,d,f;return Qa().wrap((function(m){for(;;)switch(m.prev=m.next){case 0:return t={},m.prev=1,m.next=4,(0,Za.put)(nt.request(e.id));case 4:return n=e.value,r=n,m.next=8,(0,Za.select)(mi(Qd));case 8:return a=m.sent,m.next=11,(0,Za.select)(mi(Wd));case 11:return s=m.sent,m.next=14,(0,Za.select)(mi(Jd));case 14:return o=m.sent,m.next=17,(0,Za.select)(mi(Zd));case 17:return c=m.sent,m.next=20,(0,Za.select)(mi(Xd));case 20:return u=m.sent,l={entityKeyIds:r,destinationEntitySetIds:[a,c],sourceEntitySetIds:[s,o]},m.next=24,(0,Za.call)(ef,$d({entitySetId:u,filter:l}));case 24:if(!(p=m.sent).error){m.next=27;break}throw p.error;case 27:return m.next=29,(0,Za.select)((function(e){return e.getIn(X.FQNS_BY_ESID)}));case 29:return d=m.sent,f=(0,i.Map)().withMutations((function(e){var t;ls()(t=(0,i.fromJS)(p.data)).call(t,(function(t,n){ls()(t).call(t,(function(t){var r=xi(t),a=Ni(t),s=d.get(a),o=e.get(s,(0,i.Map)()).update(n,(0,i.List)(),(function(e){return e.push(r)}));e.set(s,o)}))}))})),t.data=f,m.next=34,(0,Za.put)(nt.success(e.id,f));case 34:m.next=42;break;case 36:return m.prev=36,m.t0=m.catch(1),t.error=m.t0,tf.error(e.type,m.t0),m.next=42,(0,Za.put)(nt.failure(e.id,m.t0));case 42:return m.prev=42,m.next=45,(0,Za.put)(nt.finally(e.id));case 45:return m.finish(42);case 46:return m.abrupt("return",t);case 47:case"end":return m.stop()}}),Vd,null,[[1,36,42,46]])}function rf(){return Qa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Za.takeEvery)(tt,nf);case 2:case"end":return e.stop()}}),Yd)}var af=Qa().mark(cf),sf=Qa().mark(uf),of=new g.Logger("ReferralSagas");function cf(e){var t,n,r,a;return Qa().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.id,n={},s.prev=2,s.next=5,(0,Za.put)(st.request(t));case 5:return r=e.value,s.next=8,(0,Za.call)(ti,js(r));case 8:if(!(a=s.sent).error){s.next=11;break}throw a.error;case 11:return s.next=13,(0,Za.put)(st.success(t));case 13:s.next=21;break;case 15:return s.prev=15,s.t0=s.catch(2),n.error=s.t0,of.error(e.type,s.t0),s.next=21,(0,Za.put)(st.failure(t,s.t0));case 21:return s.prev=21,s.next=24,(0,Za.put)(st.finally(t));case 24:return s.finish(21);case 25:return s.abrupt("return",n);case 26:case"end":return s.stop()}}),af,null,[[2,15,21,25]])}function uf(){return Qa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Za.takeEvery)(at,cf);case 2:case"end":return e.stop()}}),sf)}var lf=Qa().mark(bf),pf=Qa().mark(Lf),df=g.LangUtils.isDefined,ff=g.DataUtils.getEntityKeyId,mf=g.DataUtils.getPropertyValue,gf=g.DateTimeUtils.formatAsDate,Ef=Xa.SearchApiActions.searchEntityNeighborsWithFilter,hf=Xa.SearchApiSagas.searchEntityNeighborsWithFilterWorker,Sf=(Ee.Models.FQN,ye.GENERAL_DATETIME),If=ye.ROLE,yf=Se.CHARGES,vf=Se.CHARGE_EVENT,xf=Se.CRC_CASE,Nf=Se.FORM,Af=Se.ORGANIZATIONS,Tf=Se.PEOPLE,Cf=Se.REFERRAL_REQUEST,Df=Se.STAFF,Rf=Se.STATUS,Mf=new g.Logger("ProfileSagas");function bf(e){var t,n,r,a,s,o,c,u,l,p,d,f,m,g,E,h,S,I,y,v,x,N,A,T;return Qa().wrap((function(C){for(;;)switch(C.prev=C.next){case 0:return t={},C.prev=1,C.next=4,(0,Za.put)(Bn.request(e.id));case 4:if(n=e.value,df(n)){C.next=7;break}throw gl;case 7:return r=n,C.next=10,(0,Za.select)(mi(vf));case 10:return a=C.sent,C.next=13,(0,Za.select)(mi(yf));case 13:return s=C.sent,C.next=16,(0,Za.select)(mi(xf));case 16:return o=C.sent,C.next=19,(0,Za.select)(mi(Nf));case 19:return c=C.sent,C.next=22,(0,Za.select)(mi(Af));case 22:return u=C.sent,C.next=25,(0,Za.select)(mi(Tf));case 25:return l=C.sent,C.next=28,(0,Za.select)(mi(Cf));case 28:return p=C.sent,C.next=31,(0,Za.select)(mi(Df));case 31:return d=C.sent,C.next=34,(0,Za.select)(mi(Rf));case 34:return f=C.sent,m={entityKeyIds:r,destinationEntitySetIds:[f],sourceEntitySetIds:[s,a,c,u,l,p,d]},C.next=38,(0,Za.call)(hf,Ef({entitySetId:o,filter:m}));case 38:if(!(g=C.sent).error){C.next=41;break}throw g.error;case 41:return E=[],h=[],S=[],I=(0,i.Map)().asMutable(),C.next=47,(0,Za.select)((function(e){return e.getIn(X.FQNS_BY_ESID)}));case 47:if(y=C.sent,v=(0,i.Map)().withMutations((function(e){var t;ls()(t=(0,i.fromJS)(g.data)).call(t,(function(t,n){ls()(t).call(t,(function(t){var r=Ni(t),o=y.get(r),m=xi(t),g=ff(m);if(r===f){var v=e.get(Rf,(0,i.Map)()).update(n,(0,i.List)(),(function(e){return e.push(m)}));e.set(Rf,v),E.push(g)}else if(r===c){var x=e.get(Nf,(0,i.Map)()).update(n,(0,i.List)(),(function(e){return e.push(m)}));e.set(Nf,x),S.push(g),I.set(g,n)}else if(r===l||r===u||r===d){var N=yi(t),A=mf(N,[If,0]),T=e.get(If,(0,i.Map)()).update(n,(0,i.Map)(),(function(e){return e.set(A,e.get(A,(0,i.List)()).push(m))}));e.set(If,T);var C=mf(N,[Sf,0]),D=gf(C),R=ff(m),M=e.get(Sf,(0,i.Map)()).update(n,(0,i.Map)(),(function(e){return e.update(A,(0,i.Map)(),(function(e){return e.set(R,D)}))}));e.set(Sf,M)}else if(r===p){var b=e.get(Cf,(0,i.Map)()).update(n,(0,i.List)(),(function(e){return e.push(m)}));e.set(Cf,b),h.push(g)}else if(r===s){var L=e.get(yf,(0,i.Map)()).update(n,(0,i.List)(),(function(e){return e.push(m)}));e.set(yf,L)}else if(r===a){var _=e.get(vf,(0,i.Map)()).update(n,(0,i.List)(),(function(e){return e.push(m)}));e.set(vf,_)}else{var O=e.get(o,(0,i.List)()).push(m);e.set(o,O)}}))}))})),!S.length){C.next=58;break}return m={entityKeyIds:S,destinationEntitySetIds:[o,p,d],sourceEntitySetIds:[l]},C.next=53,(0,Za.call)(hf,Ef({entitySetId:c,filter:m}));case 53:if(!(g=C.sent).error){C.next=56;break}throw g.error;case 56:x=(0,i.Map)().withMutations((function(e){var t;ls()(t=(0,i.fromJS)(g.data)).call(t,(function(t,n){ls()(t).call(t,(function(t){var r=Ni(t),a=y.get(r),s=xi(t),o=e.get(n,(0,i.Map)()),c=o.get(a,(0,i.List)()).push(s);o=o.set(a,c),e.set(n,o)}))}))})),v=v.set("formNeighborMap",x);case 58:if(!h.length){C.next=61;break}return C.next=61,(0,Za.call)(nf,nt(h));case 61:return m={entityKeyIds:E,destinationEntitySetIds:[p,d],sourceEntitySetIds:[]},C.next=64,(0,Za.call)(hf,Ef({entitySetId:f,filter:m}));case 64:if(!(g=C.sent).error){C.next=67;break}throw g.error;case 67:return N=(0,i.fromJS)(g.data),A=(0,i.Map)().withMutations((function(e){ls()(N).call(N,(function(t,n){var r=Wi()(t).call(t,(function(e){return Ni(e)===d})).get(0);df(r)&&e.set(n,xi(r))}))})),T={personCaseNeighborMap:v,staffMemberByStatusEKID:A},t.data=T,C.next=73,(0,Za.put)(Bn.success(e.id,T));case 73:C.next=81;break;case 75:return C.prev=75,C.t0=C.catch(1),t.error=C.t0,Mf.error(e.type,C.t0),C.next=81,(0,Za.put)(Bn.failure(e.id,C.t0));case 81:return C.prev=81,C.next=84,(0,Za.put)(Bn.finally(e.id));case 84:return C.finish(81);case 85:return C.abrupt("return",t);case 86:case"end":return C.stop()}}),lf,null,[[1,75,81,85]])}function Lf(){return Qa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Za.takeEvery)(zn,bf);case 2:case"end":return e.stop()}}),pf)}const _f=require("@babel/runtime-corejs3/core-js-stable/instance/reverse");var Of=n.n(_f),wf=Qa().mark(Jf),Uf=Qa().mark(Zf),jf=g.LangUtils.isDefined,kf=g.DataUtils.getEntityKeyId,Pf=g.DataUtils.getPropertyValue,Ff=Xa.SearchApiActions.searchEntityNeighborsWithFilter,qf=Xa.SearchApiSagas.searchEntityNeighborsWithFilterWorker,Gf=(Ee.Models.FQN,Se.APPEARS_IN),Kf=Se.CRC_CASE,zf=Se.FORM,Bf=Se.PEOPLE,Hf=ye.DATETIME_ADMINISTERED,Vf=ye.ROLE,Yf=G,Qf=K,Wf=new g.Logger("ProfileSagas");function Jf(e){var t,n,r,a,s,o,c,u,l,p,d,f,m,g;return Qa().wrap((function(E){for(;;)switch(E.prev=E.next){case 0:return t={},E.prev=1,E.next=4,(0,Za.put)(Vn.request(e.id));case 4:if(n=e.value,jf(n)){E.next=7;break}throw gl;case 7:return r=n.neighborESIDs,a=n.personEKID,E.next=10,(0,Za.select)(mi(Bf));case 10:if(s=E.sent,o={entityKeyIds:[a],destinationEntitySetIds:[],sourceEntitySetIds:[]},ls()(r).call(r,(function(e){e.direction===Yf&&o.destinationEntitySetIds.push(e.entitySetId),e.direction===Qf&&o.sourceEntitySetIds.push(e.entitySetId)})),c=(0,i.Map)(),!a||!a.length){E.next=33;break}return E.next=17,(0,Za.call)(qf,Ff({entitySetId:s,filter:o}));case 17:if(!(u=E.sent).error){E.next=20;break}throw u.error;case 20:return E.next=22,(0,Za.select)((function(e){return e.getIn(X.FQNS_BY_ESID)}));case 22:return l=E.sent,E.next=25,(0,Za.select)(mi(Gf));case 25:if(p=E.sent,c=(0,i.Map)().withMutations((function(e){var t;ls()(t=(0,i.fromJS)(u.data)).call(t,(function(t){ls()(t).call(t,(function(t){var n=xi(t),r=kf(n);if(vi(t)===p){var a=yi(t),s=Pf(a,[Vf,0]),o=e.get(Vf,(0,i.Map)()).set(r,s);e.set(Vf,o)}var c=Ni(t),u=l.get(c),d=e.get(u,(0,i.List)()).push(n);e.set(u,d)}))}))})),!jf(c.get(Kf))){E.next=31;break}return f=Li()(d=c.get(Kf)).call(d,(function(e){return kf(e)})).toJS(),E.next=31,(0,Za.call)(bf,Bn(f));case 31:m=c.get(zf),jf(m)&&(c=c.set(zf,Of()(g=m.sortBy((function(e){return e.getIn([Hf,0])}))).call(g)));case 33:return t.data=c,E.next=36,(0,Za.put)(Vn.success(e.id,c));case 36:E.next=44;break;case 38:return E.prev=38,E.t0=E.catch(1),t.error=E.t0,Wf.error(e.type,E.t0),E.next=44,(0,Za.put)(Vn.failure(e.id,E.t0));case 44:return E.prev=44,E.next=47,(0,Za.put)(Vn.finally(e.id));case 47:return E.finish(44);case 48:return E.abrupt("return",t);case 49:case"end":return E.stop()}}),wf,null,[[1,38,44,48]])}function Zf(){return Qa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Za.takeEvery)(Hn,Jf);case 2:case"end":return e.stop()}}),Uf)}var Xf=Qa().mark(am),$f=Qa().mark(sm),em=Xa.DataApiActions.getEntitySetData,tm=Xa.DataApiSagas.getEntitySetDataWorker,nm=Se.STAFF,rm=new g.Logger("ProfileSagas");function am(e){var t,n,r,a,s;return Qa().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.id,n={},o.prev=2,o.next=5,(0,Za.put)(Qn.request(t));case 5:return o.next=7,(0,Za.select)(mi(nm));case 7:return r=o.sent,o.next=10,(0,Za.call)(tm,em({entitySetId:r}));case 10:if(!(a=o.sent).error){o.next=13;break}throw a.error;case 13:return s=(0,i.fromJS)(a.data),n.data=s,o.next=17,(0,Za.put)(Qn.success(t,s));case 17:o.next=25;break;case 19:return o.prev=19,o.t0=o.catch(2),n.error=o.t0,rm.error(e.type,o.t0),o.next=25,(0,Za.put)(Qn.failure(t,o.t0));case 25:return o.prev=25,o.next=28,(0,Za.put)(Qn.finally(t));case 28:return o.finish(25);case 29:return o.abrupt("return",n);case 30:case"end":return o.stop()}}),Xf,null,[[2,19,25,29]])}function sm(){return Qa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Za.takeEvery)(Yn,am);case 2:case"end":return e.stop()}}),$f)}var im=Qa().mark(ym),om=Qa().mark(vm),cm=g.LangUtils.isDefined,um=Se.COMMUNICATION,lm=Se.CONTACT_ACTIVITY,pm=Se.CONTACT_INFO,dm=Se.CRC_CASE,fm=Se.FORM,mm=Se.LOCATION,gm=Se.PEACEMAKER_STATUS,Em=Se.PERSON_DETAILS,hm=G,Sm=K,Im=new g.Logger("ProfileSagas");function ym(e){var t,n,r,a,s,i,o,c,u,l,p,d,f,m;return Qa().wrap((function(g){for(;;)switch(g.prev=g.next){case 0:return t=e.id,g.prev=1,g.next=4,(0,Za.put)(Jn.request(t));case 4:if(n=e.value,cm(n)){g.next=7;break}throw gl;case 7:return r=n,g.next=10,(0,Za.select)(mi(dm));case 10:return a=g.sent,g.next=13,(0,Za.select)(mi(um));case 13:return s=g.sent,g.next=16,(0,Za.select)(mi(lm));case 16:return i=g.sent,g.next=19,(0,Za.select)(mi(pm));case 19:return o=g.sent,g.next=22,(0,Za.select)(mi(fm));case 22:return c=g.sent,g.next=25,(0,Za.select)(mi(mm));case 25:return u=g.sent,g.next=28,(0,Za.select)(mi(gm));case 28:return l=g.sent,g.next=31,(0,Za.select)(mi(Em));case 31:return p=g.sent,d=[{direction:hm,entitySetId:a},{direction:Sm,entitySetId:i},{direction:hm,entitySetId:c},{direction:hm,entitySetId:p},{direction:hm,entitySetId:s},{direction:hm,entitySetId:o},{direction:hm,entitySetId:u},{direction:hm,entitySetId:l}],g.next=35,(0,Za.all)([(0,Za.call)(Jf,Vn({neighborESIDs:d,personEKID:r})),(0,Za.call)(dd,Kn(r)),(0,Za.call)(am,Qn())]);case 35:if(f=g.sent,!(m=Ja()(f).call(f,(function(e,t){return e||t.error}),void 0))){g.next=39;break}throw m;case 39:return g.next=41,(0,Za.put)(Jn.success(t));case 41:g.next=48;break;case 43:return g.prev=43,g.t0=g.catch(1),Im.error(e.type,g.t0),g.next=48,(0,Za.put)(Jn.failure(t,g.t0));case 48:return g.prev=48,g.next=51,(0,Za.put)(Jn.finally(t));case 51:return g.finish(48);case 52:case"end":return g.stop()}}),im,null,[[1,43,48,52]])}function vm(){return Qa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Za.takeEvery)(Wn,ym);case 2:case"end":return e.stop()}}),om)}var xm=Qa().mark(wm),Nm=Qa().mark(Um),Am=Se.APPEARS_IN,Tm=Se.CRC_CASE,Cm=Se.STAFF,Dm=ye.ROLE,Rm=Xa.SearchApiActions.searchEntityNeighborsWithFilter,Mm=Xa.SearchApiSagas.searchEntityNeighborsWithFilterWorker,bm=g.DataUtils.getEntityKeyId,Lm=g.DataUtils.getPropertyValue,_m=g.LangUtils.isDefined,Om=new g.Logger("ProfileSagas");function wm(e){var t,n,r,a,s,o,c,u,l,p,d,f,m,g,E,h;return Qa().wrap((function(S){for(;;)switch(S.prev=S.next){case 0:return t=e.id,n=e.value,S.prev=1,S.next=4,(0,Za.put)(Xn.request(t));case 4:return a=n.caseEKID,s=n.personEKID,S.next=7,(0,Za.select)(mi(Am));case 7:return o=S.sent,S.next=10,(0,Za.select)(mi(Tm));case 10:return c=S.sent,S.next=13,(0,Za.select)(mi(Cm));case 13:return u=S.sent,l={entityKeyIds:[a],destinationEntitySetIds:[],sourceEntitySetIds:[u]},S.next=17,(0,Za.call)(Mm,Rm({entitySetId:c,filter:l}));case 17:if(!(p=S.sent).error){S.next=20;break}throw p.error;case 20:if(r={data:p.data},d=(0,i.fromJS)(p.data[a]),f=xn()(d).call(d,(function(e){return bm(xi(e))===s})),m="",!_m(f)){S.next=35;break}return g=yi(f),m=Lm(g,[Dm,0]),E=bm(yi(f)),h=[{entitySetId:o,entityKeyIds:[E]}],S.next=31,(0,Za.call)(zs,ws(h));case 31:if(!(p=S.sent).error){S.next=34;break}throw p.error;case 34:r={data:p.data};case 35:return S.next=37,(0,Za.put)(Xn.success(t,{caseEKID:a,personEKID:s,personRole:m}));case 37:S.next=45;break;case 39:return S.prev=39,S.t0=S.catch(1),r={error:S.t0},Om.error(e.type,S.t0),S.next=45,(0,Za.put)(Xn.failure(t,S.t0));case 45:return S.prev=45,S.next=48,(0,Za.put)(Xn.finally(t));case 48:return S.finish(45);case 49:return S.abrupt("return",r);case 50:case"end":return S.stop()}}),xm,null,[[1,39,45,49]])}function Um(){return Qa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Za.takeEvery)(Zn,wm);case 2:case"end":return e.stop()}}),Nm)}var jm=Qa().mark(Bm),km=Qa().mark(Hm),Pm=g.LangUtils.isNonEmptyString,Fm=Xa.SearchApiActions.searchEntitySetData,qm=Xa.SearchApiSagas.searchEntitySetDataWorker,Gm=Se.ORGANIZATIONS,Km=ye.ORGANIZATION_NAME,zm=new g.Logger("ProfileSagas");function Bm(e){var t,n,r,a,s,o,c,u,l,p,d,f;return Qa().wrap((function(m){for(;;)switch(m.prev=m.next){case 0:return t=e.id,n=e.value,r=(0,i.List)(),a=0,s={},m.prev=4,m.next=7,(0,Za.put)(er.request(t,n));case 7:return o=n.organizationName,c=n.maxHits,u=n.start,m.next=10,(0,Za.select)(mi(Gm));case 10:return l=m.sent,m.next=13,(0,Za.select)(gi(Km));case 13:if(p=m.sent,d={entitySetIds:[l],start:u,maxHits:c,constraints:[]},"*"!==o){m.next=26;break}return d.constraints.push({constraints:[{type:"advanced",searchFields:[{searchTerm:"*",property:p}]}]}),m.next=19,(0,Za.call)(qm,Fm(d));case 19:if(!(s=m.sent).error){m.next=22;break}throw s.error;case 22:r=(0,i.fromJS)(s.data.hits),a=s.data.numHits,m.next=34;break;case 26:return Pm(o)&&(f=yo(p,o),d.constraints.push({min:1,constraints:[{searchTerm:f,fuzzy:!0}]})),m.next=29,(0,Za.call)(qm,Fm(d));case 29:if(!(s=m.sent).error){m.next=32;break}throw s.error;case 32:r=(0,i.fromJS)(s.data.hits),a=s.data.numHits;case 34:return m.next=36,(0,Za.put)(er.success(t,{searchedOrganizations:r,totalHits:a}));case 36:m.next=43;break;case 38:return m.prev=38,m.t0=m.catch(4),zm.error(e.type,m.t0),m.next=43,(0,Za.put)(er.failure(t,m.t0));case 43:return m.prev=43,m.next=46,(0,Za.put)(er.finally(t));case 46:return m.finish(43);case 47:case"end":return m.stop()}}),jm,null,[[4,38,43,47]])}function Hm(){return Qa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Za.takeEvery)($n,Bm);case 2:case"end":return e.stop()}}),km)}var Vm=Qa().mark(rg),Ym=Qa().mark(ag),Qm=g.LangUtils.isNonEmptyString,Wm=Xa.SearchApiActions.searchEntitySetData,Jm=Xa.SearchApiSagas.searchEntitySetDataWorker,Zm=Se.PEOPLE,Xm=Se.STAFF,$m=ye.DOB,eg=ye.GIVEN_NAME,tg=ye.SURNAME,ng=new g.Logger("ProfileSagas");function rg(e){var t,n,r,a,s,o,c,u,l,p,d,f,m,g,E,h,S,I,y,v,x;return Qa().wrap((function(N){for(;;)switch(N.prev=N.next){case 0:return t=e.id,n=e.value,r=(0,i.List)(),a=0,s={},N.prev=4,N.next=7,(0,Za.put)(nr.request(t,n));case 7:return o=n.dob,c=n.firstName,u=n.lastName,l=n.maxHits,p=n.searchContext,d=n.start,N.next=10,(0,Za.select)(mi(Zm));case 10:return f=N.sent,N.next=13,(0,Za.select)(mi(Xm));case 13:return m=N.sent,g="crcPeople"===p?f:m,N.next=17,(0,Za.select)(gi(eg));case 17:return E=N.sent,N.next=20,(0,Za.select)(gi(tg));case 20:return h=N.sent,N.next=23,(0,Za.select)(gi($m));case 23:if(S=N.sent,I={entitySetIds:[g],start:d,maxHits:l,constraints:[]},"*"!==c||"*"!==u){N.next=36;break}return I.constraints.push({constraints:[{type:"advanced",searchFields:[{searchTerm:"*",property:E},{searchTerm:"*",property:h}]}]}),N.next=29,(0,Za.call)(Jm,Wm(I));case 29:if(!(s=N.sent).error){N.next=32;break}throw s.error;case 32:r=(0,i.fromJS)(s.data.hits),a=s.data.numHits,N.next=46;break;case 36:return Qm(c)&&(y=yo(E,c),I.constraints.push({min:1,constraints:[{searchTerm:y,fuzzy:!0}]})),Qm(u)&&(v=yo(h,u),I.constraints.push({min:1,constraints:[{searchTerm:v,fuzzy:!0}]})),vo.DateTime.fromISO(o).isValid&&(x=yo(S,o),I.constraints.push({min:1,constraints:[{searchTerm:x,fuzzy:!0}]})),N.next=41,(0,Za.call)(Jm,Wm(I));case 41:if(!(s=N.sent).error){N.next=44;break}throw s.error;case 44:r=(0,i.fromJS)(s.data.hits),a=s.data.numHits;case 46:return N.next=48,(0,Za.put)(nr.success(t,{searchedPeople:r,totalHits:a}));case 48:N.next=55;break;case 50:return N.prev=50,N.t0=N.catch(4),ng.error(e.type,N.t0),N.next=55,(0,Za.put)(nr.failure(t,N.t0));case 55:return N.prev=55,N.next=58,(0,Za.put)(nr.finally(t));case 58:return N.finish(55);case 59:case"end":return N.stop()}}),Vm,null,[[4,50,55,59]])}function ag(){return Qa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Za.takeEvery)(tr,rg);case 2:case"end":return e.stop()}}),Ym)}var sg=Qa().mark(ug),ig=Qa().mark(lg),og=Se.LOCATION,cg=new g.Logger("ProfileSagas");function ug(e){var t,n,r,a,s,o,c,u,l,p,d;return Qa().wrap((function(f){for(;;)switch(f.prev=f.next){case 0:return t=e.id,n={},f.prev=2,f.next=5,(0,Za.put)(sr.request(t));case 5:return r=e.value,f.next=8,(0,Za.call)(ti,js(r));case 8:if(!(a=f.sent).error){f.next=11;break}throw a.error;case 11:return s=r.entityData,f.next=14,(0,Za.select)(mi(og));case 14:return o=f.sent,f.next=17,(0,Za.select)((function(e){return e.getIn([_,H])}));case 17:return c=f.sent,u=(0,i.get)(s,o),l=u?ai()(u)[0]:void 0,p=u&&l?u[l]:void 0,d=Ii(p,c,l),f.next=24,(0,Za.put)(sr.success(t,d));case 24:f.next=32;break;case 26:return f.prev=26,f.t0=f.catch(2),n.error=f.t0,cg.error(e.type,f.t0),f.next=32,(0,Za.put)(sr.failure(t,f.t0));case 32:return f.prev=32,f.next=35,(0,Za.put)(sr.finally(t));case 35:return f.finish(32);case 36:return f.abrupt("return",n);case 37:case"end":return f.stop()}}),sg,null,[[2,26,32,36]])}function lg(){return Qa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Za.takeEvery)(ar,ug);case 2:case"end":return e.stop()}}),ig)}var pg=Qa().mark(gg),dg=Qa().mark(Eg),fg=Se.CONTACT_INFO,mg=new g.Logger("ProfileSagas");function gg(e){var t,n,r,a,s,o,c,u,l,p,d;return Qa().wrap((function(f){for(;;)switch(f.prev=f.next){case 0:return t=e.id,n={},f.prev=2,f.next=5,(0,Za.put)(or.request(t));case 5:return r=e.value,f.next=8,(0,Za.call)(ti,js(r));case 8:if(!(a=f.sent).error){f.next=11;break}throw a.error;case 11:return s=r.entityData,f.next=14,(0,Za.select)(mi(fg));case 14:return o=f.sent,f.next=17,(0,Za.select)((function(e){return e.getIn([_,H])}));case 17:return c=f.sent,u=(0,i.get)(s,o),l=u?ai()(u)[0]:void 0,p=u&&l?u[l]:void 0,d=Ii(p,c,l),f.next=24,(0,Za.put)(or.success(t,d));case 24:f.next=32;break;case 26:return f.prev=26,f.t0=f.catch(2),n.error=f.t0,mg.error(e.type,f.t0),f.next=32,(0,Za.put)(or.failure(t,f.t0));case 32:return f.prev=32,f.next=35,(0,Za.put)(or.finally(t));case 35:return f.finish(32);case 36:return f.abrupt("return",n);case 37:case"end":return f.stop()}}),pg,null,[[2,26,32,36]])}function Eg(){return Qa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Za.takeEvery)(ir,gg);case 2:case"end":return e.stop()}}),dg)}var hg=Qa().mark(yg),Sg=Qa().mark(vg),Ig=new g.Logger("RepairHarmSagas");function yg(e){var t,n,r,a;return Qa().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.id,s.prev=1,s.next=4,(0,Za.put)(ct.request(t));case 4:return r=e.value,s.next=7,(0,Za.call)(ti,js(r));case 7:if(!(a=s.sent).error){s.next=10;break}throw a.error;case 10:return n={data:a.data},s.next=13,(0,Za.put)(ct.success(t));case 13:s.next=21;break;case 15:return s.prev=15,s.t0=s.catch(1),n={error:s.t0},Ig.error(e.type,s.t0),s.next=21,(0,Za.put)(ct.failure(t,s.t0));case 21:return s.prev=21,s.next=24,(0,Za.put)(ct.finally(t));case 24:return s.finish(21);case 25:return s.abrupt("return",n);case 26:case"end":return s.stop()}}),hg,null,[[1,15,21,25]])}function vg(){return Qa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Za.takeEvery)(ot,yg);case 2:case"end":return e.stop()}}),Sg)}var xg=Qa().mark(Tg),Ng=Qa().mark(Cg),Ag=new g.Logger("RestitutionReferralSagas");function Tg(e){var t,n,r,a;return Qa().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.id,s.prev=1,s.next=4,(0,Za.put)(pt.request(t));case 4:return r=e.value,s.next=7,(0,Za.call)(ti,js(r));case 7:if(!(a=s.sent).error){s.next=10;break}throw a.error;case 10:return n={data:a.data},s.next=13,(0,Za.put)(pt.success(t));case 13:s.next=21;break;case 15:return s.prev=15,s.t0=s.catch(1),n={error:s.t0},Ag.error(e.type,s.t0),s.next=21,(0,Za.put)(pt.failure(t,s.t0));case 21:return s.prev=21,s.next=24,(0,Za.put)(pt.finally(t));case 24:return s.finish(21);case 25:return s.abrupt("return",n);case 26:case"end":return s.stop()}}),xg,null,[[1,15,21,25]])}function Cg(){return Qa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Za.takeEvery)(lt,Tg);case 2:case"end":return e.stop()}}),Ng)}var Dg,Rg,Mg,bg=Qa().mark(qg),Lg=Qa().mark(Gg),_g=Y,Og=g.ValidationUtils.isValidUUID,wg=g.LangUtils.isDefined,Ug=(Ee.Models.FQN,Xa.AppApiActions.getApp),jg=Xa.AppApiActions.getAppConfigs,kg=Xa.AppApiSagas.getAppWorker,Pg=Xa.AppApiSagas.getAppConfigsWorker,Fg=new g.Logger("AppSagas");function qg(e){var t,n,r,a,s,o,c,u,l,p,d,f,m,g,E,h;return Qa().wrap((function(S){for(;;)switch(S.prev=S.next){case 0:return t={},S.prev=1,S.next=4,(0,Za.put)(ee.request(e.id));case 4:if(a=e.value,s=a.match,o=a.organizationId,c=a.root,Og(o)&&"string"==typeof c&&wg(s)){S.next=7;break}throw El;case 7:return S.next=9,(0,Za.all)([(0,Za.call)(kg,Ug("Community Restorative Court")),(0,Za.call)(os,Va())]);case 9:if(u=S.sent,l=Io()(u,2),p=l[0],d=l[1],!p.error){S.next=15;break}throw p.error;case 15:if(!d.error){S.next=17;break}throw d.error;case 17:return f=p.data,S.next=20,(0,Za.call)(Pg,jg(f.id));case 20:if(!(m=S.sent).error){S.next=23;break}throw m.error;case 23:return g=Ja()(n=m.data).call(n,(function(e,t){var n,r=e;return(null==t||null===(n=t.organization)||void 0===n?void 0:n.id)===o&&(r=t),r}),{}),E=(0,i.Map)().withMutations((function(e){var t;ls()(t=(0,i.fromJS)(Se)).call(t,(function(t){e.set((0,i.getIn)(g,["config",t,_g]),t)}))})),h=Li()(r=(0,i.fromJS)(g).get("config",(0,i.Map)())).call(r,(function(e){return e.get(_g,"")})),t.data={appConfig:g,entitySetIdsByFqn:h,fqnsByESID:E,match:s,root:c},S.next=29,(0,Za.put)(ee.success(e.id,t.data));case 29:S.next=37;break;case 31:return S.prev=31,S.t0=S.catch(1),t.error=S.t0,Fg.error(e.type,S.t0),S.next=37,(0,Za.put)(ee.failure(e.id,S.t0));case 37:return S.prev=37,S.next=40,(0,Za.put)(ee.finally(e.id));case 40:return S.finish(37);case 41:return S.abrupt("return",t);case 42:case"end":return S.stop()}}),bg,null,[[1,31,37,41]])}function Gg(){return Qa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Za.takeEvery)($,qg);case 2:case"end":return e.stop()}}),Lg)}var Kg=":personId",zg=":formId",Bg=":caseId",Hg="".concat(Kg,"/edit"),Vg="".concat(Bg,"/addpeopletocase"),Yg="intake",Qg="".concat(Kg,"/").concat(Yg),Wg=ge()(Dg="".concat(Kg,"/").concat(Yg,"/")).call(Dg,zg),Jg="".concat(Kg,"/").concat("peacemakerinformation"),Zg="".concat(Kg,"/").concat("referral"),Xg=ge()(Rg="".concat(Kg,"/").concat("completedreferral","/")).call(Rg,zg),$g="".concat(Kg,"/").concat("repairharmagreement"),eE="".concat(Kg,"/").concat("completedrepairharmagreement"),tE="".concat(Kg,"/").concat("restitutionreferral"),nE="".concat(Kg,"/").concat("completedrestitutionreferral"),rE=(Mg={},d()(Mg,mt,eE),d()(Mg,"Intake Form",Wg),d()(Mg,"Peacemaker Information Form",Jg),d()(Mg,"Referral Form",Xg),d()(Mg,gt,nE),Mg),aE="GO_TO_ROOT";var sE="GO_TO_ROUTE";function iE(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{route:e,state:t,type:sE}}function oE(e,t){return{route:t,error:e,type:"ROUTING_FAILURE"}}const cE=require("@babel/runtime-corejs3/core-js-stable/instance/starts-with");var uE=n.n(cE);const lE=require("@babel/runtime-corejs3/core-js-stable/json/stringify");var pE=n.n(lE);const dE=require("connected-react-router");var fE=Qa().mark(SE),mE=Qa().mark(IE),gE=Qa().mark(yE),EE=new g.Logger("RoutingSagas"),hE='invalid route: a route must be a non-empty string that starts with "/"';function SE(e){var t,n,r;return Qa().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t=e.route,n=e.state,r=void 0===n?{}:n,null!=t&&uE()(t).call(t,"/",0)){a.next=6;break}return EE.error(hE,t),a.next=5,(0,Za.put)(oE(hE,t));case 5:return a.abrupt("return");case 6:return a.next=8,(0,Za.put)((0,dE.push)({state:pE()(r),pathname:t}));case 8:case"end":return a.stop()}}),fE)}function IE(){return Qa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Za.takeEvery)(sE,SE);case 2:case"end":return e.stop()}}),mE)}function yE(){return Qa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Za.takeEvery)(aE,SE);case 2:case"end":return e.stop()}}),gE)}var vE=Qa().mark(xE);function xE(){return Qa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Za.all)([(0,Za.fork)(f.AuthSagas.watchAuthAttempt),(0,Za.fork)(f.AuthSagas.watchAuthSuccess),(0,Za.fork)(f.AuthSagas.watchAuthFailure),(0,Za.fork)(f.AuthSagas.watchAuthExpired),(0,Za.fork)(f.AuthSagas.watchLogout),(0,Za.fork)(Gg),(0,Za.fork)(Mi),(0,Za.fork)(Yi),(0,Za.fork)(ho),(0,Za.fork)(zo),(0,Za.fork)(ni),(0,Za.fork)(di),(0,Za.fork)(_c),(0,Za.fork)(pu),(0,Za.fork)(ul),(0,Za.fork)(cs),(0,Za.fork)(ml),(0,Za.fork)(Cl),(0,Za.fork)(Gl),(0,Za.fork)(Ql),(0,Za.fork)(tp),(0,Za.fork)(Rp),(0,Za.fork)(wp),(0,Za.fork)(qp),(0,Za.fork)(Vp),(0,Za.fork)(Xp),(0,Za.fork)(ad),(0,Za.fork)(Lf),(0,Za.fork)(Zf),(0,Za.fork)(fd),(0,Za.fork)(sm),(0,Za.fork)(vm),(0,Za.fork)(Um),(0,Za.fork)(Hm),(0,Za.fork)(ag),(0,Za.fork)(lg),(0,Za.fork)(Eg),(0,Za.fork)(vd),(0,Za.fork)(Md),(0,Za.fork)(kd),(0,Za.fork)(Hd),(0,Za.fork)(rf),(0,Za.fork)(uf),(0,Za.fork)(vg),(0,Za.fork)(Cg),(0,Za.fork)(yE),(0,Za.fork)(IE)]);case 2:case"end":return e.stop()}}),vE)}const NE=require("history");const AE=require("react/jsx-runtime");var TE=(0,NE.createHashHistory)(),CE=function(e){var t=u()(),n=[t,(0,a.routerMiddleware)(e)],r=[l.applyMiddleware.apply(void 0,n)],s=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({stateSanitizer:function(e){return e.setIn(["edm","entityTypes"],"HIDDEN").setIn(["edm","entityTypesIndexMap"],"HIDDEN").setIn(["edm","propertyTypes"],"HIDDEN").setIn(["edm","propertyTypesIndexMap"],"HIDDEN")},maxAge:100,serialize:!0}):l.compose,i=(0,l.createStore)(function(e){var t;return(0,m.combineReducers)((t={},d()(t,b,fe),d()(t,L,f.AuthReducer),d()(t,"dashboard",Yt),d()(t,"downloads",sn),d()(t,_,bs),d()(t,"intake",pn),d()(t,Ba,yn),d()(t,"profile",Na),d()(t,"referral",Oa),d()(t,"repairHarm",Pa),d()(t,"restitutionReferral",za),d()(t,"router",(0,a.connectRouter)(e)),t))}(e),o().Map(),s.apply(void 0,r));return t.run(xE),i}(TE),DE=t().createContext(null),RE=((0,s.createStoreHook)(DE),(0,s.createDispatchHook)(DE)),ME=(0,s.createSelectorHook)(DE);const bE=function(e){var t=e.children;return(0,AE.jsx)(s.Provider,{context:DE,store:CE,children:(0,AE.jsx)(a.ConnectedRouter,{history:TE,context:DE,children:t})})},LE=require("lattice-ui-kit"),_E=require("react-router-dom"),OE=require("@babel/runtime-corejs3/core-js-stable/object/get-own-property-symbols");var wE=n.n(OE);const UE=require("@babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptor");var jE=n.n(UE);const kE=require("@babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptors");var PE=n.n(kE);const FE=require("@babel/runtime-corejs3/core-js-stable/object/define-properties");var qE=n.n(FE);const GE=require("@babel/runtime-corejs3/core-js-stable/object/define-property");var KE=n.n(GE);const zE=require("styled-components");var BE,HE,VE=n.n(zE),YE=np.DataProcessingUtils.getEntityAddressKey,QE=np.DataProcessingUtils.getPageSectionKey,WE=Se.APPEARS_IN,JE=ye.GENERAL_DATETIME,ZE=ye.ROLE,XE={type:"object",title:"",properties:d()({},QE(1,1),{type:"object",title:"",properties:(BE={},d()(BE,YE(0,WE,ZE),{type:"string",title:"Role",enum:["Peacemaker","Victim","Case Manager"]}),d()(BE,YE(0,WE,JE),{type:"string",title:"Date Assigned",format:"date"}),BE),required:[YE(0,WE,ZE),YE(0,WE,JE)]})},$E=d()({},QE(1,1),(HE={classNames:"column-span-12 grid-container"},d()(HE,YE(0,WE,ZE),{classNames:"column-span-12"}),d()(HE,YE(0,WE,JE),{classNames:"column-span-12"}),HE)),eh=ye.NOTES,th=A,nh=g.DataUtils.getEntityKeyId,rh=g.DataUtils.getPropertyValue,ah=g.ReduxUtils.isPending,sh=g.ReduxUtils.isSuccess;const ih=function(t){var n=t.isVisible,r=t.onClose,a=t.searchContext,s=t.selectedOrganization,i=t.selectedPerson,o=(0,e.useState)({}),c=Io()(o,2),u=c[0],l=c[1],p=ME((function(e){return e.getIn([th,"selectedCase"])})),d=nh(p),f=rh(p,[eh,0]),m="Case #: ".concat(f),g=nh("organizations"===a?s:i),E=RE(),h=function(){E(Rn({caseEKID:d,entityEKID:g,formData:u,searchContext:a,selectedPerson:i}))},S=ME((function(e){return e.getIn([th,Dn,q])}));(0,e.useEffect)((function(){sh(S)&&(E(Gt([Dn])),r())}),[E,r,S]);var I=(0,AE.jsx)(LE.ModalFooter,{isPendingPrimary:ah(S),onClickPrimary:h,onClickSecondary:r,textPrimary:"Submit",textSecondary:"Discard"});return(0,AE.jsxs)(LE.Modal,{isVisible:n,onClose:r,textTitle:"Add Person to Case",viewportScrolling:!0,withFooter:I,children:[(0,AE.jsx)(LE.Typography,{variant:"body2",gutterBottom:!0,children:m}),(0,AE.jsx)(LE.Typography,{gutterBottom:!0,children:"Select the role this person plays in the case."}),(0,AE.jsx)(np.Form,{formData:u,hideSubmit:!0,noPadding:!0,onChange:function(e){var t=e.formData;l(t)},onSubmit:h,schema:XE,uiSchema:$E})]})};var oh=VE().div.withConfig({displayName:"BasicErrorComponent__Error",componentId:"sc-1okzxat-0"})(["align-items:center;display:flex;flex:0;flex-direction:column;justify-content:center;padding:30px;text-align:center;> span{margin:10px 0;&:first-child{margin-top:0;}&:last-child{margin-bottom:0;}}"]),ch=function(e){var t=e.children,n=e.error,r=e.message;return!n||401!==n.status&&403!==n.status||(r="You are not authorized to view this page."),r||(r="Sorry, something went wrong. Please try again."),(0,AE.jsx)(oh,{children:t||(0,AE.jsx)("span",{children:r})})};ch.defaultProps={children:void 0,error:void 0,message:void 0};const uh=ch;var lh=g.DataUtils.getEntityKeyId,ph=g.ReduxUtils.isFailure,dh=g.ReduxUtils.isPending,fh=g.ReduxUtils.isSuccess;const mh=function(t){var n=t.caseEKID,r=t.isVisible,a=t.onClose,s=t.selectedPerson,i=RE(),o=ME((function(e){return e.getIn(["profile",Zn,q])}));(0,e.useEffect)((function(){fh(o)&&(i(Gt([Zn])),a())}),[o,i,a]);var c=(0,AE.jsx)(LE.ModalFooter,{isPendingPrimary:dh(o),onClickPrimary:function(){i(Xn({caseEKID:n,personEKID:lh(s)}))},onClickSecondary:a,textPrimary:"Yes",textSecondary:"No"});return(0,AE.jsxs)(LE.Modal,{isVisible:r,onClose:a,textTitle:"Remove Person from Case",viewportScrolling:!0,withFooter:c,children:[(0,AE.jsx)(LE.Typography,{gutterBottom:!0,children:"Are you sure you want to remove this person from the case?"}),(0,AE.jsx)(LE.Typography,{gutterBottom:!0,children:Ce(s)}),ph(o)&&(0,AE.jsx)(uh,{})]})};var gh=LE.Colors.NEUTRAL;const Eh=VE().span.withConfig({displayName:"CrumbItem",componentId:"sc-1yjdpml-0"})(["color:",";display:flex;font-size:12px;font-weight:500;text-decoration:none;text-transform:",";"],gh.N500,(function(e){var t=e.toUpperCase;return void 0!==t&&t?"uppercase":"none"}));var hh=LE.Colors.PURPLE;const Sh=VE()(_E.Link).withConfig({displayName:"CrumbLink",componentId:"tbrfcg-0"})(["color:",";display:flex;font-size:12px;font-weight:500;text-decoration:none;text-transform:",";:hover{text-decoration:underline;}"],hh.P300,(function(e){var t=e.toUpperCase;return void 0!==t&&t?"uppercase":"none"})),Ih=require("@fortawesome/pro-regular-svg-icons/faChevronRight"),yh=require("@fortawesome/react-fontawesome");var vh=function(e){var t=e.icon,n=e.size;return(0,AE.jsx)(yh.FontAwesomeIcon,{icon:t,fixedWidth:!0,size:n})};vh.defaultProps={icon:Ih.faChevronRight,size:"sm"};const xh=vh;var Nh=(0,AE.jsx)(xh,{size:"xs"}),Ah=VE()(LE.Breadcrumbs).attrs({separator:Nh}).withConfig({displayName:"Crumbs__CrumbsWrapper",componentId:"sc-12ashrb-0"})(["margin-bottom:24px;"]);const Th=function(e){var t=e.children;return(0,AE.jsx)(Ah,{children:t})},Ch=require("@babel/runtime-corejs3/core-js-stable/object/entries");var Dh=n.n(Ch);const Rh=function(e,t){var n;return t.params?Ja()(n=Dh()(t.params)).call(n,(function(e,t){var n=Io()(t,2),r=n[0],a=n[1];return e.replace(RegExp(":".concat(r),"g"),a)}),e):e};function Mh(e,t){var n=ai()(e);if(wE()){var r=wE()(e);t&&(r=Wi()(r).call(r,(function(t){return jE()(e,t).enumerable}))),n.push.apply(n,r)}return n}function bh(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)ls()(n=Mh(Object(r),!0)).call(n,(function(t){d()(e,t,r[t])}));else if(PE())qE()(e,PE()(r));else{var a;ls()(a=Mh(Object(r))).call(a,(function(t){KE()(e,t,jE()(r,t))}))}}return e}var Lh=g.LangUtils.isDefined,_h=g.DataUtils.getEntityKeyId,Oh=g.DataUtils.getPropertyValue,wh=g.ReduxUtils.isFailure,Uh=g.ReduxUtils.isPending,jh=g.ReduxUtils.isSuccess,kh=g.ReduxUtils.reduceRequestStates,Ph=Se.DA_CASE,Fh=Se.REFERRAL_REQUEST,qh=ye.DA_CASE_NUMBER,Gh=ye.DOB,Kh=ye.NOTES,zh=ye.ORGANIZATION_NAME,Bh=ye.ROLE,Hh=x,Vh=A,Yh=xt,Qh="crcPeople",Wh=vt,Jh=(0,i.Map)({name:"Name",personDOB:"Date of Birth"}),Zh=(0,i.Map)({name:"Organization Name"}),Xh=VE().div.withConfig({displayName:"AddPeopleToCaseForm__OuterWrapper",componentId:"sc-147hkss-0"})(["display:flex;flex-direction:column;"]),$h=VE().div.withConfig({displayName:"AddPeopleToCaseForm__SearchGrid",componentId:"sc-147hkss-1"})(["display:grid;grid-gap:20px;grid-template-columns:repeat(4,1fr);margin-top:20px;margin-bottom:20px;width:100%;span:last-child{display:flex;flex-direction:column;justify-content:flex-end;}"]),eS=VE().div.withConfig({displayName:"AddPeopleToCaseForm__CaseRoleTextWrapper",componentId:"sc-147hkss-2"})(["display:flex;grid-gap:10px;grid-template-columns:auto;margin-bottom:10px;width:100%;"]),tS=VE().div.withConfig({displayName:"AddPeopleToCaseForm__ButtonGrid",componentId:"sc-147hkss-3"})(["display:grid;grid-gap:15px;grid-template-columns:repeat(3,200px);margin-bottom:40px;"]);const nS=function(){var t=ME((function(e){return e.getIn([Vh,"selectedCase"])})),n=_h(t),r=Oh(t,[Kh,0]),a=ME((function(e){return e.getIn([Vh,Hh,Fh,n],(0,i.List)())})).get(0,(0,i.Map)()),s=_h(a),o=ME((function(e){return e.getIn(["referral","referralRequestNeighborMap",Ph,s,0],(0,i.Map)())}));if(Lh(o)&&!o.isEmpty()){var c=Oh(o,[qh,0]);c&&(r=c)}var u="Case #: ".concat(r),l=ME((function(e){return e.getIn([Vh,Hh,Bh,n],(0,i.Map)())})),p=l.getIn(["Respondent",0],(0,i.Map)()),f=Ce(p),m=l.getIn(["Peacemaker",0],(0,i.Map)()),g=Ce(m),E=l.get("Victim",(0,i.List)()),h=Li()(E).call(E,(function(e){return e.has(zh)?Oh(e,[zh,0]):Ce(e)})).toJS(),S=l.get("Case Manager",(0,i.List)()),I=(0,e.useState)(Qh),y=Io()(I,2),v=y[0],x=y[1],N=(0,e.useState)({firstName:"",lastName:"",organizationName:""}),A=Io()(N,2),T=A[0],C=A[1],D=(0,e.useState)(""),R=Io()(D,2),M=R[0],b=R[1],L=(0,e.useState)(1),_=Io()(L,2),O=_[0],w=_[1],U=(0,e.useState)(!1),j=Io()(U,2),k=j[0],P=j[1],F=(0,e.useState)((0,i.Map)()),G=Io()(F,2),K=G[0],z=G[1],B=(0,e.useState)((0,i.Map)()),H=Io()(B,2),V=H[0],Y=H[1],Q=(0,e.useState)(!1),W=Io()(Q,2),J=W[0],Z=W[1],$=(0,e.useState)((0,i.Map)()),ee=Io()($,2),te=ee[0],ne=ee[1],re=v===Qh||v===Wh,ae=v===Yh,se=function(e){var t=e.currentTarget,n=t.name,r=t.value;C(bh(bh({},T),{},d()({},n,r)))},ie=RE(),oe=function(e,t){var n=t||0;ie(nr({dob:M,firstName:T.firstName,lastName:T.lastName,maxHits:10,searchContext:v,start:n}))},ce=function(e,t){var n=t||0;ie(er({organizationName:T.organizationName,maxHits:10,start:n}))},ue=ME((function(e){return e.getIn(["profile","person"])})),le=Ce(ue),pe=ME((function(e){return e.getIn(X.ROOT)})),de=ME((function(e){return e.getIn(X.MATCH)})),fe=Rh(pe,de),me=ME((function(e){return e.getIn([Vh,"searchedPeople"])})),ge=ME((function(e){return e.getIn([Vh,"searchedOrganizations"])})),Ee=ME((function(e){return e.getIn([Vh,"totalHits"])})),he=re?Li()(me).call(me,(function(e){var t=Ce(e),n=Oh(e,[Gh,0]);return(0,i.Map)({name:t,person:e,personDOB:n})})):Li()(ge).call(ge,(function(e){var t=Oh(e,[zh,0]);return(0,i.Map)({name:t,organization:e})})),Se=ME((function(e){return e.getIn([Vh,tr,q])})),Ie=ME((function(e){return e.getIn([Vh,$n,q])})),ye=kh([Se,Ie]),ve=Uh(ye),xe=jh(Se)||jh(Ie)||wh(ye);return(0,e.useEffect)((function(){return function(){ie({type:bn})}}),[]),(0,e.useEffect)((function(){return function(){ie({type:Mn})}}),[]),(0,AE.jsxs)(Xh,{children:[(0,AE.jsxs)(LE.CardSegment,{children:[(0,AE.jsxs)(Th,{children:[(0,AE.jsx)(Sh,{to:fe,children:(0,AE.jsx)(LE.Typography,{color:"inherit",variant:"body2",children:le})}),(0,AE.jsx)(Eh,{children:(0,AE.jsx)(LE.Typography,{color:"inherit",variant:"body2",children:"Add People to Case"})})]}),(0,AE.jsx)(LE.Typography,{variant:"h1",children:"Add People to Case"}),(0,AE.jsx)(LE.Typography,{gutterBottom:!0,children:"Search for someone to add as a victim, peacemaker, or case manager to this case."}),(0,AE.jsx)(LE.Typography,{variant:"body2",gutterBottom:!0,children:u}),(0,AE.jsxs)(eS,{children:[(0,AE.jsx)(LE.Typography,{color:"inherit",variant:"body2",gutterBottom:!0,children:"Respondent:"}),(0,AE.jsx)(LE.Chip,{color:"red",label:f})]}),(0,AE.jsxs)(eS,{children:[(0,AE.jsx)(LE.Typography,{color:"inherit",variant:"body2",gutterBottom:!0,children:"Peacemaker:"}),(0,AE.jsx)(LE.Chip,{color:"blue",label:g})]}),(0,AE.jsxs)(eS,{children:[(0,AE.jsx)(LE.Typography,{color:"inherit",variant:"body2",gutterBottom:!0,children:"Victims:"}),Li()(h).call(h,(function(e){return(0,AE.jsx)(LE.Chip,{color:"green",label:e})}))]}),(0,AE.jsxs)(eS,{children:[(0,AE.jsx)(LE.Typography,{color:"inherit",variant:"body2",gutterBottom:!0,children:"Case Manager:"}),Li()(S).call(S,(function(e){return(0,AE.jsx)(LE.Chip,{color:"violet",label:Ce(e),onDelete:function(){ne(e),Z(!0)}})}))]})]}),(0,AE.jsx)(LE.Card,{children:(0,AE.jsxs)(LE.CardSegment,{padding:"30px",children:[(0,AE.jsxs)(tS,{children:[(0,AE.jsx)(LE.Radio,{checked:v===Qh,label:"Search People",mode:"button",onChange:function(){return x(Qh)},name:Qh}),(0,AE.jsx)(LE.Radio,{checked:ae,label:"Search Organizations",mode:"button",onChange:function(){return x(Yh)},name:Yh}),(0,AE.jsx)(LE.Radio,{checked:v===Wh,label:"Search Staff",mode:"button",onChange:function(){return x(Wh)},name:Wh})]}),re&&(0,AE.jsxs)($h,{children:[(0,AE.jsxs)("span",{children:[(0,AE.jsx)(LE.Label,{children:"First name"}),(0,AE.jsx)(LE.Input,{name:"firstName",onChange:se})]}),(0,AE.jsxs)("span",{children:[(0,AE.jsx)(LE.Label,{children:"Last name"}),(0,AE.jsx)(LE.Input,{name:"lastName",onChange:se})]}),(0,AE.jsxs)("span",{children:[(0,AE.jsx)(LE.Label,{children:"Date of birth"}),(0,AE.jsx)(LE.DatePicker,{onChange:function(e){return b(e)}})]}),(0,AE.jsx)("span",{children:(0,AE.jsx)(LE.Button,{arialabelledby:"searchPeople",isLoading:ve,onClick:oe,children:"Search"})})]}),ae&&(0,AE.jsxs)($h,{children:[(0,AE.jsxs)("span",{children:[(0,AE.jsx)(LE.Label,{children:"Organization Name"}),(0,AE.jsx)(LE.Input,{name:"organizationName",onChange:se})]}),(0,AE.jsx)("span",{children:(0,AE.jsx)(LE.Button,{arialabelledby:"searchOrganizations",isLoading:ve,onClick:ce,children:"Search"})})]})]})}),xe&&!he.isEmpty()&&(0,AE.jsxs)(LE.CardSegment,{children:[(0,AE.jsx)(LE.Typography,{gutterBottom:!0,children:"Click on a result to select a role and add them to the case."}),(0,AE.jsx)(LE.PaginationToolbar,{count:Ee,onPageChange:function(e){var t=e.page,n=e.start;re&&oe(0,n),ae&&ce(0,n),w(t)},page:O,rowsPerPage:10})]}),(0,AE.jsx)(LE.SearchResults,{hasSearched:xe,isLoading:ve,onResultClick:function(e){re&&z(e.get("person")),ae&&Y(e.get("organization")),P(!0)},resultLabels:ae?Zh:Jh,results:he}),(0,AE.jsx)(ih,{isVisible:k,onClose:function(){return P(!1)},personCase:t,searchContext:v,selectedOrganization:V,selectedPerson:K}),(0,AE.jsx)(mh,{caseEKID:n||"",isVisible:J,onClose:function(){return Z(!1)},selectedPerson:te})]})};var rS,aS,sS,iS,oS,cS,uS,lS,pS,dS,fS=["Female","Male","Nonbinary","Transgender (Male to Female)","Transgender (Female to Male)","Unknown","Decline to State","Other","Not Asked"],mS=["Asian","Black","Native American","Pacific Islander","White","Multi-Racial","Other","Unknown"],gS=["Hispanic or Latino","Not Hispanic or Latino","Other","Unknown"],ES=np.DataProcessingUtils.getEntityAddressKey,hS=np.DataProcessingUtils.getPageSectionKey,SS=Ee.Constants.OPENLATTICE_ID_FQN,IS=Se.AGENCY,yS=Se.CHARGES,vS=Se.CHARGE_EVENT,xS=Se.DA_CASE,NS=Se.FORM,AS=Se.OFFICERS,TS=Se.ORGANIZATIONS,CS=Se.PEOPLE,DS=Se.PERSON_DETAILS,RS=Se.REFERRAL_REQUEST,MS=Se.STAFF,bS=Se.STATUS,LS=ye.CASE_NUMBER,_S=ye.DATETIME_ADMINISTERED,OS=ye.DATETIME_COMPLETED,wS=ye.DA_CASE_NUMBER,US=ye.DOB,jS=ye.EFFECTIVE_DATE,kS=ye.ETHNICITY,PS=ye.GENDER,FS=ye.GENERAL_DATETIME,qS=ye.GIVEN_NAME,GS=ye.MIDDLE_NAME,KS=ye.NAME,zS=ye.ORGANIZATION_NAME,BS=ye.PRONOUN,HS=ye.RACE,VS=ye.SURNAME,YS={type:"object",title:"",properties:(oS={},d()(oS,hS(1,1),{type:"object",title:"",properties:d()({},ES(0,NS,_S),{type:"string",title:"Intake Date",format:"date",default:vo.DateTime.local().toISODate()}),required:[ES(0,NS,_S)]}),d()(oS,hS(1,2),{type:"object",title:"Client Information",properties:(rS={},d()(rS,ES(0,CS,qS),{type:"string",title:"First Name"}),d()(rS,ES(0,CS,GS),{type:"string",title:"Middle Name"}),d()(rS,ES(0,CS,VS),{type:"string",title:"Last Name"}),d()(rS,ES(0,CS,US),{type:"string",title:"Date of Birth",format:"date"}),d()(rS,ES(0,CS,HS),{type:"string",title:"Race",enum:mS}),d()(rS,ES(0,CS,kS),{type:"string",title:"Ethnicity",enum:gS}),rS)}),d()(oS,hS(1,3),{type:"array",title:"Victim Information",items:{type:"object",properties:(aS={},d()(aS,ES(-1,CS,qS),{type:"string",title:"First Name"}),d()(aS,ES(-1,CS,GS),{type:"string",title:"Middle Name"}),d()(aS,ES(-1,CS,VS),{type:"string",title:"Last Name"}),d()(aS,ES(-1,CS,US),{type:"string",title:"Date of Birth",format:"date"}),d()(aS,ES(-1,DS,PS),{type:"string",title:"Gender",enum:fS}),d()(aS,ES(-1,DS,BS),{type:"string",title:"Preferred Pronouns"}),d()(aS,ES(-1,CS,HS),{type:"string",title:"Race",enum:mS}),d()(aS,ES(-1,CS,kS),{type:"string",title:"Ethnicity",enum:gS}),aS)}}),d()(oS,hS(1,4),{type:"array",title:"",items:{type:"object",properties:d()({},ES(-1,TS,zS),{type:"string",title:"Organization Name"}),required:[ES(-1,TS,zS)]}}),d()(oS,hS(1,5),{type:"object",title:"Respondent Information",properties:(sS={},d()(sS,ES(0,RS,OS),{type:"string",title:"Date of Referral",format:"date"}),d()(sS,ES(0,AS,qS),{type:"string",title:"Officer First Name"}),d()(sS,ES(0,AS,VS),{type:"string",title:"Officer Last Name"}),d()(sS,ES(0,IS,KS),{type:"string",title:"Referring Agency"}),d()(sS,ES(0,xS,wS),{type:"string",title:"DA Case Number"}),d()(sS,ES(0,xS,LS),{type:"string",title:"Case Number"}),d()(sS,ES(0,xS,FS),{type:"string",title:"Date of Incident",format:"date"}),d()(sS,ES(0,yS,KS),{type:"string",title:"Charge",enum:[],enumNames:[]}),d()(sS,ES(0,vS,OS),{type:"string",title:"Charge date",format:"date"}),sS)}),d()(oS,hS(1,6),{type:"object",title:"",properties:d()({},ES(0,MS,SS),{type:"string",title:"Staff Member",enum:[],enumNames:[]}),required:[ES(0,MS,SS)]}),d()(oS,hS(1,7),{type:"object",title:"",properties:(iS={},d()(iS,ES(0,NS,KS),{type:"string",title:"Form Name",default:"Intake Form"}),d()(iS,ES(0,bS,ye.STATUS),{type:"string",title:"Status",default:"Intake"}),d()(iS,ES(0,bS,jS),{type:"string",title:"Intake Date"}),iS)}),oS)},QS=(dS={},d()(dS,hS(1,1),d()({classNames:"column-span-12 grid-container"},ES(0,NS,_S),{classNames:"column-span-4"})),d()(dS,hS(1,2),(cS={"ui:disabled":!0,classNames:"column-span-12 grid-container"},d()(cS,ES(0,CS,qS),{classNames:"column-span-4"}),d()(cS,ES(0,CS,GS),{classNames:"column-span-4"}),d()(cS,ES(0,CS,VS),{classNames:"column-span-4"}),d()(cS,ES(0,CS,US),{classNames:"column-span-4"}),d()(cS,ES(0,CS,HS),{classNames:"column-span-4"}),d()(cS,ES(0,CS,kS),{classNames:"column-span-4"}),cS)),d()(dS,hS(1,3),{"ui:disabled":!0,classNames:"column-span-12","ui:options":{addable:!1,orderable:!1,removable:!1},items:(uS={classNames:"grid-container"},d()(uS,ES(-1,CS,qS),{classNames:"column-span-4"}),d()(uS,ES(-1,CS,GS),{classNames:"column-span-4"}),d()(uS,ES(-1,CS,VS),{classNames:"column-span-4"}),d()(uS,ES(-1,CS,US),{classNames:"column-span-4"}),d()(uS,ES(-1,DS,PS),{classNames:"column-span-4"}),d()(uS,ES(-1,DS,BS),{classNames:"column-span-4"}),d()(uS,ES(-1,CS,HS),{classNames:"column-span-4"}),d()(uS,ES(-1,CS,kS),{classNames:"column-span-4"}),uS)}),d()(dS,hS(1,4),{"ui:disabled":!0,classNames:"column-span-12","ui:options":{addable:!1,orderable:!1,removable:!1},items:d()({classNames:"grid-container"},ES(-1,TS,zS),{classNames:"column-span-4"})}),d()(dS,hS(1,5),(lS={"ui:disabled":!0,classNames:"column-span-12 grid-container"},d()(lS,ES(0,RS,OS),{classNames:"column-span-4"}),d()(lS,ES(0,AS,qS),{classNames:"column-span-4"}),d()(lS,ES(0,AS,VS),{classNames:"column-span-4"}),d()(lS,ES(0,IS,KS),{classNames:"column-span-4"}),d()(lS,ES(0,xS,wS),{classNames:"column-span-4"}),d()(lS,ES(0,xS,LS),{classNames:"column-span-4"}),d()(lS,ES(0,xS,FS),{classNames:"column-span-4"}),d()(lS,ES(0,yS,KS),{classNames:"column-span-4"}),d()(lS,ES(0,vS,OS),{classNames:"column-span-4"}),lS)),d()(dS,hS(1,6),d()({classNames:"column-span-12 grid-container"},ES(0,MS,SS),{classNames:"column-span-4"})),d()(dS,hS(1,7),(pS={classNames:"column-span-12 grid-container"},d()(pS,ES(0,NS,KS),{"ui:widget":"hidden"}),d()(pS,ES(0,bS,ye.STATUS),{"ui:widget":"hidden"}),d()(pS,ES(0,bS,jS),{"ui:widget":"hidden"}),pS)),dS),WS=JSON.parse(pE()(YS)),JS=JSON.parse(pE()(QS)),ZS=Se.AGENCY,XS=Se.CHARGES,$S=Se.CHARGE_EVENT,eI=Se.DA_CASE,tI=Se.OFFICERS,nI=Se.ORGANIZATIONS,rI=Se.PEOPLE,aI=Se.REFERRAL_REQUEST,sI=ye.CASE_NUMBER,iI=ye.DATETIME_COMPLETED,oI=ye.DA_CASE_NUMBER,cI=ye.DOB,uI=ye.ETHNICITY,lI=ye.GENERAL_DATETIME,pI=ye.GIVEN_NAME,dI=ye.MIDDLE_NAME,fI=ye.NAME,mI=ye.ORGANIZATION_NAME,gI=ye.RACE,EI=ye.ROLE,hI=ye.SURNAME,SI=np.DataProcessingUtils.getEntityAddressKey,II=np.DataProcessingUtils.getPageSectionKey,yI=g.DataUtils.getEntityKeyId,vI=g.DataUtils.getPropertyValue,xI=function(e,t){var n=[pI,dI,hI,cI,gI,uI],r={};return ls()(n).call(n,(function(n){var a=vI(e,[n,0],Nt);r[SI(t,rI,n)]=a})),r},NI=function(e,t,n,r,a){var s,o,c,u,l=yI(n),p=vI(n,[iI,0],Nt),f=vo.DateTime.fromISO(p).toISODate(),m=a.getIn([ZS,l],(0,i.List)()).get(0,(0,i.Map)()),g=vI(m,[fI,0],Nt),E=a.getIn([tI,l],(0,i.List)()).get(0,(0,i.Map)()),h=vI(E,[pI,0],Nt),S=vI(E,[hI,0],Nt),I=a.getIn([eI,l],(0,i.List)()).get(0,(0,i.Map)()),y=vI(I,[oI,0],Nt),v=vI(I,[sI,0],Nt),x=vI(I,[lI,0],Nt),N=vo.DateTime.fromISO(x),A=N.isValid?N.toISODate():void 0,T=r.getIn([XS,t],(0,i.List)()).get(0,(0,i.Map)()),C=vI(T,[fI,0],Nt),D=r.getIn([$S,t],(0,i.List)()).get(0,(0,i.Map)()),R=vI(D,[iI,0]),M=vo.DateTime.fromISO(R),b=M.isValid?M.toISODate():void 0,L=r.getIn([EI,t,"Victim"],(0,i.List)()),_=Wi()(L).call(L,(function(e){return!e.has(mI)})),O=Li()(s=_.toJS()).call(s,(function(e){return xI(e,-1)})),w=Wi()(L).call(L,(function(e){return e.has(mI)})),U=Li()(o=w.toJS()).call(o,(function(e){var t=vI(e,[mI,0],Nt);return d()({},SI(-1,nI,mI),t)}));return u={},d()(u,II(1,2),xI(e,0)),d()(u,II(1,3),O),d()(u,II(1,4),U),d()(u,II(1,5),(c={},d()(c,SI(0,aI,iI),f),d()(c,SI(0,tI,pI),h),d()(c,SI(0,tI,hI),S),d()(c,SI(0,ZS,fI),g),d()(c,SI(0,eI,oI),y),d()(c,SI(0,eI,sI),v),d()(c,SI(0,eI,lI),A),d()(c,SI(0,XS,fI),C),d()(c,SI(0,$S,iI),b),c)),u},AI=Ee.Constants.OPENLATTICE_ID_FQN,TI=Se.CRC_CASE,CI=Se.FORM,DI=Se.REFERRAL_REQUEST,RI=Se.STAFF,MI=ye.DATETIME_ADMINISTERED,bI=g.DataUtils.getEntityKeyId,LI=g.DataUtils.getPropertyValue,_I=g.LangUtils.isDefined,OI=np.DataProcessingUtils.getEntityAddressKey,wI=np.DataProcessingUtils.getPageSectionKey;const UI=function(){var e=ME((function(e){return e.getIn(["profile","person"])})),t=Ce(e),n=ME((function(e){return e.getIn(X.ROOT)})),r=ME((function(e){return e.getIn(X.MATCH)})),a=Rh(n,r),s=ME((function(e){return e.getIn(["profile","personCaseNeighborMap"])})),o=ME((function(e){return e.getIn(["intake","selectedIntake"])})),c=bI(o),u=s.get("formNeighborMap",(0,i.Map)()),l=u.getIn([c,TI],(0,i.List)()).get(0,(0,i.Map)()),p=bI(l),f=u.getIn([c,DI],(0,i.List)()).get(0,(0,i.Map)()),m=ME((function(e){return e.getIn(["referral","referralRequestNeighborMap"])})),g=NI(e,p,f,s,m),E=u.getIn([c,RI],(0,i.List)()).get(0,(0,i.Map)()),h=Ce(E);g[wI(1,6)]=d()({},OI(0,RI,AI),h);var S=LI(o,[MI,0]),I=_I(S)?vo.DateTime.fromISO(S).toISODate():Nt;return g[wI(1,1)]=d()({},OI(0,CI,MI),I),(0,AE.jsxs)(AE.Fragment,{children:[(0,AE.jsxs)(LE.CardSegment,{children:[(0,AE.jsxs)(Th,{children:[(0,AE.jsx)(Sh,{to:a,children:(0,AE.jsx)(LE.Typography,{color:"inherit",variant:"body2",children:t})}),(0,AE.jsx)(Eh,{children:(0,AE.jsx)(LE.Typography,{color:"inherit",variant:"body2",children:"Intake Form"})})]}),(0,AE.jsx)(LE.Typography,{variant:"h1",children:"Intake Form"})]}),(0,AE.jsx)(np.Form,{disabled:!0,formData:g,hideSubmit:!0,readOnly:!0,schema:WS,uiSchema:JS})]})};var jI,kI,PI,FI,qI,GI,KI,zI,BI=np.DataProcessingUtils.getEntityAddressKey,HI=np.DataProcessingUtils.getPageSectionKey,VI=Ee.Constants.OPENLATTICE_ID_FQN,YI=Se.AGENCY,QI=Se.CHARGES,WI=Se.CHARGE_EVENT,JI=Se.CRC_CASE,ZI=Se.DA_CASE,XI=Se.FORM,$I=Se.OFFICERS,ey=Se.ORGANIZATIONS,ty=Se.PEOPLE,ny=Se.PERSON_DETAILS,ry=Se.REFERRAL_REQUEST,ay=Se.STAFF,sy=Se.STATUS,iy=ye.CASE_NUMBER,oy=ye.DATETIME_ADMINISTERED,cy=ye.DATETIME_COMPLETED,uy=ye.DATETIME_RECEIVED,ly=ye.DA_CASE_NUMBER,py=ye.DOB,dy=ye.EFFECTIVE_DATE,fy=ye.ETHNICITY,my=ye.GENDER,gy=ye.GENERAL_DATETIME,Ey=ye.GIVEN_NAME,hy=ye.MIDDLE_NAME,Sy=ye.NAME,Iy=ye.ORGANIZATION_NAME,yy=ye.PRONOUN,vy=ye.RACE,xy=ye.SURNAME,Ny=vo.DateTime.local().toISO(),Ay={type:"object",title:"",properties:(FI={},d()(FI,HI(1,1),{type:"object",title:"Respondent Profile",properties:(jI={},d()(jI,BI(0,ry,cy),{type:"string",title:"Date of Referral",format:"date"}),d()(jI,BI(0,$I,Ey),{type:"string",title:"Officer First Name"}),d()(jI,BI(0,$I,xy),{type:"string",title:"Officer Last Name"}),d()(jI,BI(0,YI,Sy),{type:"string",title:"Referring Agency",enum:[],enumNames:[]}),d()(jI,BI(0,ZI,ly),{type:"string",title:"DA Case Number"}),d()(jI,BI(0,ZI,iy),{type:"string",title:"Case Number"}),d()(jI,BI(0,ZI,gy),{type:"string",title:"Date of Incident",format:"date"}),d()(jI,BI(0,QI,Sy),{type:"string",title:"Charge",enum:[],enumNames:[]}),d()(jI,BI(0,WI,cy),{type:"string",title:"Charge date",format:"date"}),jI),required:[BI(0,ry,cy),BI(0,ZI,iy),BI(0,YI,Sy)]}),d()(FI,HI(1,2),{type:"object",title:"Victim Information",properties:d()({},BI(0,ty,VI),{type:"array",title:"People Already in Database",items:{enum:[],enumNames:[],type:"string"},uniqueItems:!0})}),d()(FI,HI(1,3),{type:"array",title:"",items:{type:"object",properties:(kI={},d()(kI,BI(-1,ty,xy),{type:"string",title:"Last Name"}),d()(kI,BI(-1,ty,Ey),{type:"string",title:"First Name"}),d()(kI,BI(-1,ty,hy),{type:"string",title:"Middle Name"}),d()(kI,BI(-1,ty,py),{type:"string",title:"Date of Birth",format:"date"}),d()(kI,BI(-1,ny,my),{type:"string",title:"Gender",enum:fS}),d()(kI,BI(-1,ny,yy),{type:"string",title:"Preferred Pronouns"}),d()(kI,BI(-1,ty,vy),{type:"string",title:"Race",enum:mS}),d()(kI,BI(-1,ty,fy),{type:"string",title:"Ethnicity",enum:gS}),kI),required:[BI(-1,ty,xy),BI(-1,ty,Ey),BI(-1,ty,py),BI(-1,ny,my)]}}),d()(FI,HI(1,4),{type:"object",title:"",properties:d()({},BI(0,ey,VI),{type:"array",title:"Organizations Already in Database",items:{enum:[],enumNames:[],type:"string"},uniqueItems:!0})}),d()(FI,HI(1,5),{type:"array",title:"",items:{type:"object",properties:d()({},BI(-1,ey,Iy),{type:"string",title:"Organization Name"}),required:[BI(-1,ey,Iy)]}}),d()(FI,HI(1,6),{type:"object",title:"",properties:d()({},BI(0,ay,VI),{type:"string",title:"Staff Member",enum:[],enumNames:[]}),required:[BI(0,ay,VI)]}),d()(FI,HI(1,7),{type:"object",title:"",properties:(PI={},d()(PI,BI(0,XI,oy),{type:"string",title:"Date of Form Completion",default:Ny}),d()(PI,BI(0,XI,Sy),{type:"string",title:"Form Name",default:"Referral Form"}),d()(PI,BI(0,sy,ye.STATUS),{type:"string",title:"Status",default:"Referral"}),d()(PI,BI(0,sy,dy),{type:"string",title:"Referral Date"}),d()(PI,BI(0,JI,uy),{type:"string",title:"Date Case Received",default:Ny}),PI)}),FI)},Ty=(zI={},d()(zI,HI(1,1),(qI={classNames:"column-span-12 grid-container"},d()(qI,BI(0,ry,cy),{classNames:"column-span-4"}),d()(qI,BI(0,$I,Ey),{classNames:"column-span-4"}),d()(qI,BI(0,$I,xy),{classNames:"column-span-4"}),d()(qI,BI(0,YI,Sy),{classNames:"column-span-4","ui:options":{creatable:!0}}),d()(qI,BI(0,ZI,ly),{classNames:"column-span-4"}),d()(qI,BI(0,ZI,iy),{classNames:"column-span-4"}),d()(qI,BI(0,ZI,gy),{classNames:"column-span-4"}),d()(qI,BI(0,QI,Sy),{classNames:"column-span-4","ui:options":{creatable:!0}}),d()(qI,BI(0,WI,cy),{classNames:"column-span-4"}),qI)),d()(zI,HI(1,2),d()({classNames:"column-span-12 grid-container"},BI(0,ty,VI),{classNames:"column-span-4","ui:options":{multiple:!0}})),d()(zI,HI(1,3),{classNames:"column-span-12","ui:options":{addButtonText:"+ Add New Victim Person",orderable:!1,addActionKey:"addVictim"},items:(GI={classNames:"grid-container"},d()(GI,BI(-1,ty,xy),{classNames:"column-span-4"}),d()(GI,BI(-1,ty,Ey),{classNames:"column-span-4"}),d()(GI,BI(-1,ty,hy),{classNames:"column-span-4"}),d()(GI,BI(-1,ty,py),{classNames:"column-span-4"}),d()(GI,BI(-1,ny,my),{classNames:"column-span-4"}),d()(GI,BI(-1,ny,yy),{classNames:"column-span-4"}),d()(GI,BI(-1,ty,vy),{classNames:"column-span-4"}),d()(GI,BI(-1,ty,fy),{classNames:"column-span-4"}),GI)}),d()(zI,HI(1,4),d()({classNames:"column-span-12 grid-container"},BI(0,ey,VI),{classNames:"column-span-4","ui:options":{multiple:!0}})),d()(zI,HI(1,5),{classNames:"column-span-12","ui:options":{addButtonText:"+ Add New Victim Organization",orderable:!1,addActionKey:"addVictimOrg"},items:d()({classNames:"grid-container"},BI(-1,ey,Iy),{classNames:"column-span-4"})}),d()(zI,HI(1,6),d()({classNames:"column-span-12 grid-container"},BI(0,ay,VI),{classNames:"column-span-4"})),d()(zI,HI(1,7),(KI={classNames:"column-span-12 grid-container"},d()(KI,BI(0,XI,oy),{"ui:widget":"hidden"}),d()(KI,BI(0,XI,Sy),{"ui:widget":"hidden"}),d()(KI,BI(0,sy,ye.STATUS),{"ui:widget":"hidden"}),d()(KI,BI(0,sy,dy),{"ui:widget":"hidden"}),d()(KI,BI(0,JI,uy),{"ui:widget":"hidden"}),KI)),zI),Cy=np.DataProcessingUtils.getEntityAddressKey,Dy=np.DataProcessingUtils.getPageSectionKey,Ry=Se.FORM,My=Se.PERSON_DETAILS,by=ye.DATETIME_ADMINISTERED,Ly=ye.GENDER,_y=ye.PRONOUN,Oy=JSON.parse(pE()(Ay)),wy=JSON.parse(pE()(Ty));delete Oy.properties[Dy(1,2)],delete wy[Dy(1,2)],delete Oy.properties[Dy(1,3)].items.properties[Cy(-1,My,Ly)],delete Oy.properties[Dy(1,3)].items.properties[Cy(-1,My,_y)],delete wy[Dy(1,3)].items[Cy(-1,My,Ly)],delete wy[Dy(1,3)].items[Cy(-1,My,_y)],Oy.properties[Dy(1,3)].title="Victim Information",wy[Dy(1,3)]["ui:options"]={addable:!1,orderable:!1,removable:!1},delete Oy.properties[Dy(1,4)],delete wy[Dy(1,4)],wy[Dy(1,5)]["ui:options"]={addable:!1,orderable:!1,removable:!1},Oy.properties[Dy(1,7)].properties[Cy(0,Ry,by)].format="date",wy[Dy(1,7)][Cy(0,Ry,by)]={classNames:"column-span-4"};var Uy=Ee.Constants.OPENLATTICE_ID_FQN,jy=Se.AGENCY,ky=Se.CHARGES,Py=Se.CHARGE_EVENT,Fy=Se.CRC_CASE,qy=Se.DA_CASE,Gy=Se.FORM,Ky=Se.OFFICERS,zy=Se.ORGANIZATIONS,By=Se.PEOPLE,Hy=Se.REFERRAL_REQUEST,Vy=Se.STAFF,Yy=ye.CASE_NUMBER,Qy=ye.DATETIME_ADMINISTERED,Wy=ye.DATETIME_COMPLETED,Jy=ye.DA_CASE_NUMBER,Zy=ye.DOB,Xy=ye.ETHNICITY,$y=ye.GENERAL_DATETIME,ev=ye.GIVEN_NAME,tv=ye.MIDDLE_NAME,nv=ye.NAME,rv=ye.ORGANIZATION_NAME,av=ye.RACE,sv=ye.ROLE,iv=ye.SURNAME,ov=np.DataProcessingUtils.getEntityAddressKey,cv=np.DataProcessingUtils.getPageSectionKey,uv=g.DataUtils.getEntityKeyId,lv=g.DataUtils.getPropertyValue,pv=Ee.Constants.OPENLATTICE_ID_FQN,dv=Se.AGENCY,fv=Se.APPEARS_IN,mv=Se.CHARGES,gv=Se.CHARGE_EVENT,Ev=Se.CRC_CASE,hv=Se.DA_CASE,Sv=Se.HAS,Iv=Se.OFFICERS,yv=Se.ORGANIZATIONS,vv=Se.PEOPLE,xv=Se.PERSON_DETAILS,Nv=Se.REFERRAL_REQUEST,Av=Se.REGISTERED_FOR,Tv=Se.SENT_FROM,Cv=Se.STAFF,Dv=ye.CASE_NUMBER,Rv=ye.DATETIME_COMPLETED,Mv=ye.GENERAL_DATETIME,bv=ye.NAME,Lv=ye.NOTES,_v=ye.ROLE,Ov=It,wv=np.DataProcessingUtils.getEntityAddressKey,Uv=np.DataProcessingUtils.getPageSectionKey,jv=np.DataProcessingUtils.parseEntityAddressKey,kv=g.LangUtils.isDefined,Pv=g.DataUtils.getEntityKeyId,Fv=g.ValidationUtils.isValidUUID,qv=M;const Gv=function(){var e=ME((function(e){return e.getIn(["profile","person"])})),t=Ce(e),n=ME((function(e){return e.getIn(X.ROOT)})),r=ME((function(e){return e.getIn(X.MATCH)})),a=Rh(n,r),s=ME((function(e){return e.getIn([qv,"selectedReferralForm"])})),o=ME((function(e){return e.getIn(["profile","personCaseNeighborMap"])})),c=function(e,t,n,r){var a,s,o,c,u=uv(e),l=lv(e,[Qy,0],Nt),p=vo.DateTime.fromISO(l).toISODate(),f=t.getIn([u,Fy],(0,i.List)()).get(0,(0,i.Map)()),m=uv(f),g=t.getIn([u,Hy],(0,i.List)()).get(0,(0,i.Map)()),E=uv(g),h=lv(g,[Wy,0],Nt),S=vo.DateTime.fromISO(h).toISODate(),I=r.getIn([jy,E],(0,i.List)()).get(0,(0,i.Map)()),y=lv(I,[nv,0],Nt),v=r.getIn([Ky,E],(0,i.List)()).get(0,(0,i.Map)()),x=lv(v,[ev,0],Nt),N=lv(v,[iv,0],Nt),A=r.getIn([qy,E],(0,i.List)()).get(0,(0,i.Map)()),T=lv(A,[Jy,0],Nt),C=lv(A,[Yy,0],Nt),D=lv(A,[$y,0],Nt),R=vo.DateTime.fromISO(D),M=R.isValid?R.toISODate():void 0,b=n.getIn([ky,m],(0,i.List)()).get(0,(0,i.Map)()),L=lv(b,[nv,0],Nt),_=n.getIn([Py,m],(0,i.List)()).get(0,(0,i.Map)()),O=lv(_,[Wy,0]),w=vo.DateTime.fromISO(O),U=w.isValid?w.toISODate():void 0,j=n.getIn([sv,m,"Victim"],(0,i.List)()),k=Wi()(j).call(j,(function(e){return!e.has(rv)})),P=Li()(a=k.toJS()).call(a,(function(e){var t,n=lv(e,[iv,0],Nt),r=lv(e,[ev,0],Nt),a=lv(e,[tv,0],Nt),s=lv(e,[Zy,0],Nt),i=lv(e,[av,0],Nt),o=lv(e,[Xy,0],Nt);return t={},d()(t,ov(-1,By,iv),n),d()(t,ov(-1,By,ev),r),d()(t,ov(-1,By,tv),a),d()(t,ov(-1,By,Zy),s),d()(t,ov(-1,By,av),i),d()(t,ov(-1,By,Xy),o),t})),F=Wi()(j).call(j,(function(e){return e.has(rv)})),q=Li()(s=F.toJS()).call(s,(function(e){var t=lv(e,[rv,0],Nt);return d()({},ov(-1,zy,rv),t)})),G=t.getIn([u,Vy],(0,i.List)()).get(0,(0,i.Map)()),K=Ce(G);return c={},d()(c,cv(1,1),(o={},d()(o,ov(0,Hy,Wy),S),d()(o,ov(0,Ky,ev),x),d()(o,ov(0,Ky,iv),N),d()(o,ov(0,jy,nv),y),d()(o,ov(0,qy,Jy),T),d()(o,ov(0,qy,Yy),C),d()(o,ov(0,qy,$y),M),d()(o,ov(0,ky,nv),L),d()(o,ov(0,Py,Wy),U),o)),d()(c,cv(1,3),P),d()(c,cv(1,5),q),d()(c,cv(1,6),d()({},ov(0,Vy,Uy),K)),d()(c,cv(1,7),d()({},ov(0,Gy,Qy),p)),c}(s,o.get("formNeighborMap",(0,i.Map)()),o,ME((function(e){return e.getIn([qv,"referralRequestNeighborMap"])})));return(0,AE.jsxs)(AE.Fragment,{children:[(0,AE.jsxs)(LE.CardSegment,{children:[(0,AE.jsxs)(Th,{children:[(0,AE.jsx)(Sh,{to:a,children:(0,AE.jsx)(LE.Typography,{color:"inherit",variant:"body2",children:t})}),(0,AE.jsx)(Eh,{children:(0,AE.jsx)(LE.Typography,{color:"inherit",variant:"body2",children:"Referral Information"})})]}),(0,AE.jsx)(LE.Typography,{variant:"h1",children:"Referral Information"})]}),(0,AE.jsx)(np.Form,{disabled:!0,formData:c,hideSubmit:!0,readOnly:!0,schema:Oy,uiSchema:wy})]})};var Kv,zv,Bv,Hv,Vv,Yv,Qv,Wv,Jv=np.DataProcessingUtils.getEntityAddressKey,Zv=np.DataProcessingUtils.getPageSectionKey,Xv=Ee.Constants.OPENLATTICE_ID_FQN,$v=Se.CRC_CASE,ex=Se.FORM,tx=Se.PEOPLE,nx=Se.STAFF,rx=ye.DATETIME_ADMINISTERED,ax=ye.DUE_DATE,sx=ye.GIVEN_NAME,ix=ye.MIDDLE_NAME,ox=ye.NAME,cx=ye.SURNAME,ux=ye.TEXT,lx={type:"object",title:"",properties:(Bv={},d()(Bv,Zv(1,1),{type:"object",title:"Respondent Information",properties:(Kv={},d()(Kv,Jv(0,tx,sx),{type:"string",title:"First Name"}),d()(Kv,Jv(0,tx,ix),{type:"string",title:"Middle Name"}),d()(Kv,Jv(0,tx,cx),{type:"string",title:"Last Name"}),Kv)}),d()(Bv,Zv(1,2),{type:"object",title:"Conditions",properties:(zv={},d()(zv,Jv(0,ex,ux),{type:"array",title:"Conditions",items:{type:"string",enum:["Restitution","Retail Theft Group","Community Service","Therapy","AODA Assessment","AODA Therapy","Medication Maintenance","Reflection Paper","Ride Along with the Police","Meeting with Police","AA Meeting","NA Meeting","Monthly Check-In with CRC","Weekly Check-In with CRC","Reading Assignment","Inpatient Treatment","Movie Assigment","Write a song","Create a piece of art","Other"]},uniqueItems:!0}),d()(zv,Jv(0,ex,ax),{type:"string",title:"Required Date of Completion",format:"date"}),d()(zv,Jv(0,$v,Xv),{type:"string",title:"CRC Case",enum:[],enumNames:[]}),d()(zv,Jv(0,nx,Xv),{type:"string",title:"Staff Member",enum:[],enumNames:[]}),d()(zv,Jv(0,ex,rx),{type:"string",title:"Repair Harm Agreement Date",format:"date"}),d()(zv,Jv(0,ex,ox),{type:"string",title:"Form Name",default:"Repair Harm Agreement"}),zv),required:[Jv(0,ex,ux),Jv(0,ex,ax),Jv(0,$v,Xv),Jv(0,nx,Xv)]}),Bv)},px=(Yv={},d()(Yv,Zv(1,1),(Hv={"ui:disabled":!0,classNames:"column-span-12 grid-container"},d()(Hv,Jv(0,tx,sx),{classNames:"column-span-4"}),d()(Hv,Jv(0,tx,ix),{classNames:"column-span-4"}),d()(Hv,Jv(0,tx,cx),{classNames:"column-span-4"}),Hv)),d()(Yv,Zv(1,2),(Vv={classNames:"column-span-12 grid-container"},d()(Vv,Jv(0,ex,ux),{classNames:"column-span-4","ui:options":{multiple:!0}}),d()(Vv,Jv(0,ex,ax),{classNames:"column-span-4"}),d()(Vv,Jv(0,$v,Xv),{classNames:"column-span-4"}),d()(Vv,Jv(0,nx,Xv),{classNames:"column-span-4"}),d()(Vv,Jv(0,ex,rx),{classNames:"column-span-4"}),d()(Vv,Jv(0,ex,ox),{"ui:widget":"hidden"}),Vv)),Yv),dx=np.DataProcessingUtils.getEntityAddressKey,fx=np.DataProcessingUtils.getPageSectionKey,mx=Se.PEOPLE,gx=ye.GIVEN_NAME,Ex=ye.MIDDLE_NAME,hx=ye.SURNAME,Sx=JSON.parse(pE()(lx)),Ix=JSON.parse(pE()(px));Sx.properties[fx(1,3)]={type:"array",title:"Peacemakers",items:{type:"object",properties:(Qv={},d()(Qv,dx(-1,mx,gx),{type:"string",title:"First Name"}),d()(Qv,dx(-1,mx,Ex),{type:"string",title:"Middle Name"}),d()(Qv,dx(-1,mx,hx),{type:"string",title:"Last Name"}),Qv)}},Ix[fx(1,3)]={"ui:disabled":!0,classNames:"column-span-12","ui:options":{addable:!1,orderable:!1,removable:!1},items:(Wv={classNames:"grid-container"},d()(Wv,dx(-1,mx,gx),{classNames:"column-span-4"}),d()(Wv,dx(-1,mx,Ex),{classNames:"column-span-4"}),d()(Wv,dx(-1,mx,hx),{classNames:"column-span-4"}),Wv)};var yx=Se.CRC_CASE,vx=Se.FORM,xx=Se.PEOPLE,Nx=Se.STAFF,Ax=ye.DATETIME_ADMINISTERED,Tx=ye.DUE_DATE,Cx=ye.GIVEN_NAME,Dx=ye.MIDDLE_NAME,Rx=ye.NOTES,Mx=ye.ROLE,bx=ye.SURNAME,Lx=ye.TEXT,_x=Ee.Constants.OPENLATTICE_ID_FQN,Ox=g.LangUtils.isDefined,wx=g.DataUtils.getEntityKeyId,Ux=g.DataUtils.getPropertyValue,jx=np.DataProcessingUtils.getEntityAddressKey,kx=np.DataProcessingUtils.getPageSectionKey;const Px=function(){var e=ME((function(e){return e.getIn(["profile","person"])})),t=Ce(e),n=ME((function(e){return e.getIn(X.ROOT)})),r=ME((function(e){return e.getIn(X.MATCH)})),a=Rh(n,r),s=ME((function(e){return e.getIn(["repairHarm","selectedRepairHarmAgreement"])})),o=ME((function(e){return e.getIn(["profile","personCaseNeighborMap"])})),c=function(e,t,n,r){var a,s,o,c,u,l=Ux(n,[Cx,0],Nt),p=Ux(n,[Dx,0],Nt),f=Ux(n,[bx,0],Nt),m=Ux(e,Lx),g=Ux(e,[Tx,0],Nt),E=Ux(e,[Ax,0]),h=Ox(E)?vo.DateTime.fromISO(E).toISODate():Nt,S=wx(e),I=t.getIn([S,Nx],(0,i.List)()).get(0,(0,i.Map)()),y=Ce(I),v=t.getIn([S,yx],(0,i.List)()).get(0,(0,i.Map)()),x=wx(v),N=Ux(v,[Rx,0]),A=r.getIn([Mx,x,"Respondent",0],(0,i.Map)()),T=Ce(A),C=ge()(a="".concat(N," - ")).call(a,T),D=r.getIn([Mx,x,"Peacemaker"],(0,i.List)()),R=Li()(s=D.toJS()).call(s,(function(e){var t,n=Ux(e,[bx,0],Nt),r=Ux(e,[Cx,0],Nt),a=Ux(e,[Dx,0],Nt);return t={},d()(t,jx(-1,xx,Cx),r),d()(t,jx(-1,xx,Dx),a),d()(t,jx(-1,xx,bx),n),t}));return u={},d()(u,kx(1,1),(o={},d()(o,jx(0,xx,Cx),l),d()(o,jx(0,xx,Dx),p),d()(o,jx(0,xx,bx),f),o)),d()(u,kx(1,2),(c={},d()(c,jx(0,vx,Lx),m.toJS()),d()(c,jx(0,vx,Tx),g),d()(c,jx(0,yx,_x),C),d()(c,jx(0,Nx,_x),y),d()(c,jx(0,vx,Ax),h),c)),d()(u,kx(1,3),R),u}(s,o.get("formNeighborMap",(0,i.Map)()),e,o);return(0,AE.jsxs)(AE.Fragment,{children:[(0,AE.jsxs)(LE.CardSegment,{children:[(0,AE.jsxs)(Th,{children:[(0,AE.jsx)(Sh,{to:a,children:(0,AE.jsx)(LE.Typography,{color:"inherit",variant:"body2",children:t})}),(0,AE.jsx)(Eh,{children:(0,AE.jsx)(LE.Typography,{color:"inherit",variant:"body2",children:"Repair Harm Agreement"})})]}),(0,AE.jsx)(LE.Typography,{variant:"h1",children:"Repair Harm Agreement"})]}),(0,AE.jsx)(np.Form,{disabled:!0,formData:c,hideSubmit:!0,readOnly:!0,schema:Sx,uiSchema:Ix})]})};var Fx,qx,Gx,Kx,zx,Bx,Hx,Vx,Yx=np.DataProcessingUtils.getEntityAddressKey,Qx=np.DataProcessingUtils.getPageSectionKey,Wx=Ee.Constants.OPENLATTICE_ID_FQN,Jx=Se.CRC_CASE,Zx=Se.FORM,Xx=Se.PEOPLE,$x=Se.STAFF,eN=ye.DATETIME_ADMINISTERED,tN=ye.DUE_DATE,nN=ye.GENERAL_DATETIME,rN=ye.GIVEN_NAME,aN=ye.MIDDLE_NAME,sN=ye.NAME,iN=ye.SURNAME,oN=ye.TEXT,cN=vo.DateTime.local().toISO(),uN={type:"object",title:"",properties:(Gx={},d()(Gx,Qx(1,1),{type:"object",title:"Respondent Information",properties:(Fx={},d()(Fx,Yx(0,Xx,rN),{type:"string",title:"First Name"}),d()(Fx,Yx(0,Xx,aN),{type:"string",title:"Middle Name"}),d()(Fx,Yx(0,Xx,iN),{type:"string",title:"Last Name"}),Fx)}),d()(Gx,Qx(1,2),{type:"object",title:"Restitution",properties:(qx={},d()(qx,Yx(0,Zx,oN),{type:"string",title:"Amount of Restitution Owed"}),d()(qx,Yx(0,Zx,tN),{type:"string",title:"Date Required of Completion",format:"date"}),d()(qx,Yx(0,Zx,nN),{type:"string",title:"Date of Disposition",format:"date"}),d()(qx,Yx(0,Jx,Wx),{type:"string",title:"CRC Case",enum:[],enumNames:[]}),d()(qx,Yx(0,$x,Wx),{type:"string",title:"CRC Staff Member",enum:[],enumNames:[]}),d()(qx,Yx(0,Zx,eN),{type:"string",title:"Date of Form Completion",default:cN}),d()(qx,Yx(0,Zx,sN),{type:"string",title:"Form Name",default:"Restitution Referral"}),qx),required:[Yx(0,Zx,oN),Yx(0,Zx,tN),Yx(0,Zx,nN),Yx(0,Jx,Wx),Yx(0,$x,Wx)]}),d()(Gx,Qx(1,3),{type:"object",title:"Victim Information",properties:d()({},Yx(1,Xx,Wx),{type:"string",title:"Choose the victim to whom restitution is owed",enum:[],enumNames:[]}),required:[Yx(1,Xx,Wx)]}),Gx)},lN=(Bx={},d()(Bx,Qx(1,1),(Kx={"ui:disabled":!0,classNames:"column-span-12 grid-container"},d()(Kx,Yx(0,Xx,rN),{classNames:"column-span-4"}),d()(Kx,Yx(0,Xx,aN),{classNames:"column-span-4"}),d()(Kx,Yx(0,Xx,iN),{classNames:"column-span-4"}),Kx)),d()(Bx,Qx(1,2),(zx={classNames:"column-span-12 grid-container"},d()(zx,Yx(0,Zx,oN),{classNames:"column-span-4"}),d()(zx,Yx(0,Zx,tN),{classNames:"column-span-4"}),d()(zx,Yx(0,Zx,nN),{classNames:"column-span-4"}),d()(zx,Yx(0,Jx,Wx),{classNames:"column-span-4"}),d()(zx,Yx(0,$x,Wx),{classNames:"column-span-4"}),d()(zx,Yx(0,Zx,eN),{"ui:widget":"hidden"}),d()(zx,Yx(0,Zx,sN),{"ui:widget":"hidden"}),zx)),d()(Bx,Qx(1,3),d()({classNames:"column-span-12 grid-container"},Yx(1,Xx,Wx),{classNames:"column-span-4"})),Bx),pN=np.DataProcessingUtils.getEntityAddressKey,dN=np.DataProcessingUtils.getPageSectionKey,fN=Se.CONTACT_INFO,mN=Se.FORM,gN=Se.OFFENSE,EN=Se.PEOPLE,hN=Se.PERSON_DETAILS,SN=ye.DATETIME_ADMINISTERED,IN=ye.DESCRIPTION,yN=ye.DOB,vN=ye.ETHNICITY,xN=ye.EMAIL,NN=ye.GENDER,AN=ye.PHONE_NUMBER,TN=ye.PRONOUN,CN=ye.RACE,DN=JSON.parse(pE()(uN)),RN=JSON.parse(pE()(lN)),MN=dN(1,1),bN=dN(1,2),LN=dN(1,4);DN.properties[MN].properties[pN(0,EN,yN)]={type:"string",title:"Date of Birth",format:"date"},DN.properties[MN].properties[pN(0,EN,CN)]={type:"string",title:"Race",enum:mS},DN.properties[MN].properties[pN(0,EN,vN)]={type:"string",title:"Ethnicity",enum:gS},DN.properties[MN].properties[pN(0,hN,NN)]={type:"string",title:"Gender",enum:fS},DN.properties[MN].properties[pN(0,hN,TN)]={type:"string",title:"Preferred Pronouns"},RN[MN][pN(0,EN,yN)]={classNames:"column-span-4"},RN[MN][pN(0,EN,CN)]={classNames:"column-span-4"},RN[MN][pN(0,EN,vN)]={classNames:"column-span-4"},RN[MN][pN(0,hN,NN)]={classNames:"column-span-4"},RN[MN][pN(0,hN,TN)]={classNames:"column-span-4"},DN.properties[LN]={type:"object",title:"Contact",properties:(Hx={},d()(Hx,pN(0,fN,AN),{type:"string",title:"Phone number"}),d()(Hx,pN(0,fN,xN),{type:"string",title:"Email"}),Hx)},RN[LN]=(Vx={classNames:"column-span-12 grid-container"},d()(Vx,pN(0,fN,AN),{classNames:"column-span-4"}),d()(Vx,pN(0,fN,xN),{classNames:"column-span-4"}),Vx),DN.properties[bN].properties[pN(0,gN,IN)]={type:"string",title:"Offense"},RN[bN][pN(0,gN,IN)]={classNames:"column-span-4"},DN.properties[bN].properties[pN(0,mN,SN)].format="date",RN[bN][pN(0,mN,SN)]={classNames:"column-span-4"},RN["ui:order"]=[MN,LN,bN,dN(1,3)];var _N=Se.CONTACT_INFO,ON=Se.CRC_CASE,wN=Se.FORM,UN=Se.OFFENSE,jN=Se.PEOPLE,kN=Se.PERSON_DETAILS,PN=Se.REFERRAL_REQUEST,FN=Se.STAFF,qN=ye.DATETIME_ADMINISTERED,GN=ye.DESCRIPTION,KN=ye.DOB,zN=ye.DUE_DATE,BN=ye.EMAIL,HN=ye.ETHNICITY,VN=ye.GENDER,YN=ye.GENERAL_DATETIME,QN=ye.GIVEN_NAME,WN=ye.MIDDLE_NAME,JN=ye.NOTES,ZN=ye.PHONE_NUMBER,XN=ye.PRONOUN,$N=ye.RACE,eA=ye.ROLE,tA=ye.SURNAME,nA=ye.TEXT,rA=Ee.Constants.OPENLATTICE_ID_FQN,aA=g.LangUtils.isDefined,sA=g.DataUtils.getEntityKeyId,iA=g.DataUtils.getPropertyValue,oA=np.DataProcessingUtils.getEntityAddressKey,cA=np.DataProcessingUtils.getPageSectionKey,uA=A,lA=g.DataUtils.getEntityKeyId;const pA=function(){var e=ME((function(e){return e.getIn(["profile","person"])})),t=lA(e),n=Ce(e),r=ME((function(e){return e.getIn(X.ROOT)})),a=ME((function(e){return e.getIn(X.MATCH)})),s=Rh(r,a),o=ME((function(e){return e.getIn(["restitutionReferral","selectedRestitutionReferral"])})),c=ME((function(e){return e.getIn([uA,"personNeighborMap"])})),u=ME((function(e){return e.getIn([uA,"personCaseNeighborMap"])})),l=function(e,t,n,r,a,s,o){var c,u,l,p,f,m=iA(n,[QN,0],Nt),g=iA(n,[WN,0],Nt),E=iA(n,[tA,0],Nt),h=iA(n,[KN,0],Nt),S=iA(n,[$N,0],Nt),I=iA(n,[HN,0],Nt),y=a.get(kN,(0,i.List)()).get(0,(0,i.Map)()),v=iA(y,[VN,0],Nt),x=iA(y,[XN,0],Nt),N=iA(e,[nA,0],Nt),A=iA(e,[zN,0],Nt),T=iA(e,[YN,0],Nt),C=aA(T)?vo.DateTime.fromISO(T).toISODate():Nt,D=iA(e,[qN,0]),R=aA(D)?vo.DateTime.fromISO(D).toISODate():Nt,M=sA(e),b=t.getIn([M,FN],(0,i.List)()).get(0,(0,i.Map)()),L=Ce(b),_=t.getIn([M,ON],(0,i.List)()).get(0,(0,i.Map)()),O=sA(_),w=iA(_,[JN,0]),U=r.getIn([eA,O,"Respondent",0],(0,i.Map)()),j=Ce(U),k=ge()(c="".concat(w," - ")).call(c,j),P=t.getIn([M,jN],(0,i.List)()),F=xn()(P).call(P,(function(e){return sA(e)!==o})),q=Ce(F),G=a.get(_N,(0,i.List)()),K=xn()(G).call(G,(function(e){return e.has(ZN)})),z=iA(K,[ZN,0]),B=xn()(G).call(G,(function(e){return e.has(BN)})),H=iA(B,[BN,0]),V=t.getIn([M,PN],(0,i.List)()).get(0,(0,i.Map)()),Y=sA(V),Q=s.getIn([UN,Y],(0,i.List)()).get(0,(0,i.Map)()),W=iA(Q,[GN,0],Nt);return f={},d()(f,cA(1,1),(u={},d()(u,oA(0,jN,QN),m),d()(u,oA(0,jN,WN),g),d()(u,oA(0,jN,tA),E),d()(u,oA(0,jN,KN),h),d()(u,oA(0,jN,$N),S),d()(u,oA(0,jN,HN),I),d()(u,oA(0,kN,VN),v),d()(u,oA(0,kN,XN),x),u)),d()(f,cA(1,4),(l={},d()(l,oA(0,_N,ZN),z),d()(l,oA(0,_N,BN),H),l)),d()(f,cA(1,2),(p={},d()(p,oA(0,wN,nA),N),d()(p,oA(0,wN,zN),A),d()(p,oA(0,wN,YN),C),d()(p,oA(0,ON,rA),k),d()(p,oA(0,FN,rA),L),d()(p,oA(0,wN,qN),R),d()(p,oA(0,UN,GN),W),p)),d()(f,cA(1,3),d()({},oA(1,jN,rA),q)),f}(o,u.get("formNeighborMap",(0,i.Map)()),e,u,c,ME((function(e){return e.getIn(["referral","referralRequestNeighborMap"])})),t);return(0,AE.jsxs)(AE.Fragment,{children:[(0,AE.jsxs)(LE.CardSegment,{children:[(0,AE.jsxs)(Th,{children:[(0,AE.jsx)(Sh,{to:s,children:(0,AE.jsx)(LE.Typography,{color:"inherit",variant:"body2",children:n})}),(0,AE.jsx)(Eh,{children:(0,AE.jsx)(LE.Typography,{color:"inherit",variant:"body2",children:"Restitution Referral"})})]}),(0,AE.jsx)(LE.Typography,{variant:"h1",children:"Restitution Referral"})]}),(0,AE.jsx)(np.Form,{disabled:!0,formData:l,hideSubmit:!0,readOnly:!0,schema:DN,uiSchema:RN})]})};var dA,fA,mA=np.DataProcessingUtils.getEntityAddressKey,gA=np.DataProcessingUtils.getPageSectionKey,EA=Se.LOCATION,hA=ye.LOCATION_ADDRESS,SA=ye.LOCATION_ADDRESS_LINE_2,IA=ye.LOCATION_CITY,yA=ye.LOCATION_STATE,vA=ye.LOCATION_ZIP,xA={type:"object",title:"",properties:d()({},gA(1,1),{type:"object",title:"",properties:(dA={},d()(dA,mA(0,EA,hA),{type:"string",title:"Address Line 1"}),d()(dA,mA(0,EA,SA),{type:"string",title:"Address Line 2"}),d()(dA,mA(0,EA,IA),{type:"string",title:"City"}),d()(dA,mA(0,EA,yA),{type:"string",title:"State"}),d()(dA,mA(0,EA,vA),{type:"string",title:"Zip"}),dA)})},NA=d()({},gA(1,1),(fA={classNames:"column-span-12 grid-container","ui:options":{editable:!0}},d()(fA,mA(0,EA,hA),{classNames:"column-span-4"}),d()(fA,mA(0,EA,SA),{classNames:"column-span-4"}),d()(fA,mA(0,EA,IA),{classNames:"column-span-4"}),d()(fA,mA(0,EA,yA),{classNames:"column-span-4"}),d()(fA,mA(0,EA,vA),{classNames:"column-span-4"}),fA)),AA=Se.LOCATION,TA=Se.LOCATED_AT,CA=Se.PEOPLE,DA=ye.LOCATION_ADDRESS,RA=ye.LOCATION_ADDRESS_LINE_2,MA=ye.LOCATION_CITY,bA=ye.LOCATION_STATE,LA=ye.LOCATION_ZIP,_A=A,OA=g.DataUtils.getEntityKeyId,wA=g.DataUtils.getPropertyValue,UA=np.DataProcessingUtils.getEntityAddressKey,jA=np.DataProcessingUtils.getPageSectionKey,kA=np.DataProcessingUtils.processAssociationEntityData,PA=np.DataProcessingUtils.processEntityData,FA=g.LangUtils.isDefined,qA=g.ReduxUtils.isPending;const GA=function(){var t=RE(),n=ME((function(e){return e.getIn([_A,"personNeighborMap",AA],(0,i.List)())})).get(0,(0,i.Map)()),r=(0,e.useMemo)((function(){var e=[DA,RA,MA,bA,LA],t={},r=jA(1,1);return ls()(e).call(e,(function(e){var a=UA(0,AA,e);t=(0,i.setIn)(t,[r,a],wA(n,[e,0]))})),t}),[n]),a=(0,e.useState)(r),s=Io()(a,2),o=s[0],c=s[1];(0,e.useEffect)((function(){c(r)}),[r]);var u=ME((function(e){return e.getIn([b,Q])})),l=ME((function(e){return e.getIn([_,B])})),p=ME((function(e){return e.getIn(["profile","person"])})),d=OA(p),f=OA(n),m={editAction:function(e){t(_n(e))},entityIndexToIdMap:(0,i.Map)().withMutations((function(e){e.set(AA,(0,i.List)([f]))})),entitySetIds:u,propertyTypeIds:l},g=ME((function(e){return e.getIn([_A,ar,q])}));return(0,AE.jsx)(np.Form,{disabled:FA(n)&&!n.isEmpty(),formContext:m,formData:o,isSubmitting:qA(g),onChange:function(e){var t=e.formData;c(t)},onSubmit:function(){var e=PA(o,u,l),n=kA([[TA,d,CA,0,AA,{}]],u,l);t(sr({associationEntityData:n,entityData:e}))},schema:xA,uiSchema:NA})};var KA=np.DataProcessingUtils.getEntityAddressKey,zA=np.DataProcessingUtils.getPageSectionKey,BA=Se.CONTACT_INFO,HA=ye.EMAIL,VA={type:"object",title:"",properties:d()({},zA(1,1),{type:"object",title:"",properties:d()({},KA(0,BA,HA),{type:"string",title:"Email Address"})})},YA=d()({},zA(1,1),d()({classNames:"column-span-12 grid-container","ui:options":{editable:!0}},KA(0,BA,HA),{classNames:"column-span-4"})),QA=Se.CONTACT_INFO,WA=Se.CONTACTED_VIA,JA=Se.PEOPLE,ZA=ye.EMAIL,XA=A,$A=g.DataUtils.getEntityKeyId,eT=g.DataUtils.getPropertyValue,tT=np.DataProcessingUtils.getEntityAddressKey,nT=np.DataProcessingUtils.getPageSectionKey,rT=np.DataProcessingUtils.processAssociationEntityData,aT=np.DataProcessingUtils.processEntityData,sT=g.LangUtils.isDefined,iT=g.ReduxUtils.isPending;const oT=function(){var t=RE(),n=ME((function(e){return e.getIn([XA,"personNeighborMap",QA],(0,i.List)())})),r=xn()(n).call(n,(function(e){return e.has(ZA)})),a=(0,e.useMemo)((function(){return sT(r)?d()({},nT(1,1),d()({},tT(0,QA,ZA),eT(r,[ZA,0]))):{}}),[r]),s=(0,e.useState)(a),o=Io()(s,2),c=o[0],u=o[1];(0,e.useEffect)((function(){u(a)}),[a]);var l=ME((function(e){return e.getIn([b,Q])})),p=ME((function(e){return e.getIn([_,B])})),f=ME((function(e){return e.getIn(["profile","person"])})),m=$A(f),g=$A(r),E={editAction:function(e){t(wn(e))},entityIndexToIdMap:(0,i.Map)().withMutations((function(e){e.set(QA,(0,i.List)([g]))})),entitySetIds:l,propertyTypeIds:p},h=ME((function(e){return e.getIn([XA,ir,q])}));return(0,AE.jsx)(np.Form,{disabled:sT(r)&&!r.isEmpty(),formContext:E,formData:c,isSubmitting:iT(h),onChange:function(e){var t=e.formData;u(t)},onSubmit:function(){var e=aT(c,l,p),n=rT([[WA,m,JA,0,QA,{}]],l,p);t(or({associationEntityData:n,entityData:e}))},schema:VA,uiSchema:YA})};var cT,uT,lT=np.DataProcessingUtils.getEntityAddressKey,pT=np.DataProcessingUtils.getPageSectionKey,dT=Se.PERSON_DETAILS,fT=ye.GENDER,mT=ye.PRONOUN,gT={type:"object",title:"",properties:d()({},pT(1,1),{type:"object",title:"",properties:(cT={},d()(cT,lT(-1,dT,fT),{type:"string",title:"Gender",enum:fS}),d()(cT,lT(-1,dT,mT),{type:"string",title:"Preferred Pronouns"}),cT)})},ET=d()({},pT(1,1),(uT={classNames:"column-span-12 grid-container","ui:options":{editable:!0}},d()(uT,lT(-1,dT,fT),{classNames:"column-span-4"}),d()(uT,lT(-1,dT,mT),{classNames:"column-span-4"}),uT)),hT=Se.PERSON_DETAILS,ST=ye.GENDER,IT=ye.PRONOUN,yT=g.DataUtils.getEntityKeyId,vT=g.DataUtils.getPropertyValue,xT=np.DataProcessingUtils.getEntityAddressKey,NT=np.DataProcessingUtils.getPageSectionKey;const AT=function(){var t=RE(),n=ME((function(e){return e.getIn(["profile","personNeighborMap",hT],(0,i.List)())})).get(0,(0,i.Map)()),r=(0,e.useMemo)((function(){var e;return d()({},NT(1,1),(e={},d()(e,xT(-1,hT,ST),vT(n,[ST,0])),d()(e,xT(-1,hT,IT),vT(n,[IT,0])),e))}),[n]),a=(0,e.useState)(r),s=Io()(a,2),o=s[0],c=s[1];(0,e.useEffect)((function(){c(r)}),[r]);var u=ME((function(e){return e.getIn([b,Q])})),l=ME((function(e){return e.getIn([_,B])})),p=yT(n),f={editAction:function(e){t(qn(e))},entityIndexToIdMap:(0,i.Map)().withMutations((function(e){e.set(hT,(0,i.List)([p]))})),entitySetIds:u,propertyTypeIds:l};return(0,AE.jsx)(np.Form,{disabled:!0,formContext:f,formData:o,hideSubmit:!0,onChange:function(e){var t=e.formData;c(t)},schema:gT,uiSchema:ET})};var TT,CT,DT=np.DataProcessingUtils.getEntityAddressKey,RT=np.DataProcessingUtils.getPageSectionKey,MT=Se.PEOPLE,bT=ye.DOB,LT=ye.ETHNICITY,_T=ye.GIVEN_NAME,OT=ye.MIDDLE_NAME,wT=ye.RACE,UT=ye.SURNAME,jT={type:"object",title:"",properties:d()({},RT(1,1),{type:"object",title:"",properties:(TT={},d()(TT,DT(0,MT,_T),{type:"string",title:"First Name"}),d()(TT,DT(0,MT,OT),{type:"string",title:"Middle Name"}),d()(TT,DT(0,MT,UT),{type:"string",title:"Last Name"}),d()(TT,DT(0,MT,bT),{type:"string",title:"Date of Birth",format:"date"}),d()(TT,DT(0,MT,wT),{type:"string",title:"Race",enum:mS}),d()(TT,DT(0,MT,LT),{type:"string",title:"Ethnicity",enum:gS}),TT)})},kT=d()({},RT(1,1),(CT={classNames:"column-span-12 grid-container","ui:options":{editable:!0}},d()(CT,DT(0,MT,_T),{classNames:"column-span-4"}),d()(CT,DT(0,MT,OT),{classNames:"column-span-4"}),d()(CT,DT(0,MT,UT),{classNames:"column-span-4"}),d()(CT,DT(0,MT,bT),{classNames:"column-span-4"}),d()(CT,DT(0,MT,wT),{classNames:"column-span-4"}),d()(CT,DT(0,MT,LT),{classNames:"column-span-4"}),CT)),PT=Se.PEOPLE,FT=ye.DOB,qT=ye.ETHNICITY,GT=ye.GIVEN_NAME,KT=ye.MIDDLE_NAME,zT=ye.RACE,BT=ye.SURNAME,HT=g.DataUtils.getEntityKeyId,VT=g.DataUtils.getPropertyValue,YT=np.DataProcessingUtils.getEntityAddressKey,QT=np.DataProcessingUtils.getPageSectionKey;const WT=function(){var t=RE(),n=ME((function(e){return e.getIn(["profile","person"])})),r=(0,e.useMemo)((function(){var e=[GT,KT,BT,FT,zT,qT],t={},r=QT(1,1);return ls()(e).call(e,(function(e){var a=YT(0,PT,e);t=(0,i.setIn)(t,[r,a],VT(n,[e,0]))})),t}),[n]),a=(0,e.useState)(r),s=Io()(a,2),o=s[0],c=s[1];(0,e.useEffect)((function(){c(r)}),[r]);var u=ME((function(e){return e.getIn([b,Q])})),l=ME((function(e){return e.getIn([_,B])})),p=HT(n),d={editAction:function(e){t(Pn(e))},entityIndexToIdMap:(0,i.Map)().withMutations((function(e){e.set(PT,(0,i.List)([p]))})),entitySetIds:u,propertyTypeIds:l},f=Ce(n),m=ME((function(e){return e.getIn(X.ROOT)})),g=ME((function(e){return e.getIn(X.MATCH)})),E=Rh(m,g);return(0,AE.jsxs)(AE.Fragment,{children:[(0,AE.jsxs)(LE.CardSegment,{children:[(0,AE.jsxs)(Th,{children:[(0,AE.jsx)(Eh,{children:(0,AE.jsx)(Sh,{to:E,children:(0,AE.jsx)(LE.Typography,{color:"inherit",variant:"body2",children:f})})}),(0,AE.jsx)(Eh,{children:(0,AE.jsx)(LE.Typography,{color:"inherit",variant:"body2",children:"Edit Profile"})})]}),(0,AE.jsx)(LE.Typography,{variant:"h1",children:"Edit Profile"}),(0,AE.jsx)(LE.Typography,{variant:"body1",children:"Edit the information below to update the person profile."})]}),(0,AE.jsx)(np.Form,{disabled:!0,formContext:d,formData:o,hideSubmit:!0,onChange:function(e){var t=e.formData;c(t)},schema:jT,uiSchema:kT})]})};var JT=np.DataProcessingUtils.getEntityAddressKey,ZT=np.DataProcessingUtils.getPageSectionKey,XT=Se.CONTACT_INFO,$T=ye.PHONE_NUMBER,eC={type:"object",title:"",properties:d()({},ZT(1,1),{type:"object",title:"",properties:d()({},JT(0,XT,$T),{type:"string",title:"Phone Number"})})},tC=d()({},ZT(1,1),d()({classNames:"column-span-12 grid-container","ui:options":{editable:!0}},JT(0,XT,$T),{classNames:"column-span-4"})),nC=Se.CONTACT_INFO,rC=Se.CONTACTED_VIA,aC=Se.PEOPLE,sC=ye.PHONE_NUMBER,iC=A,oC=g.DataUtils.getEntityKeyId,cC=g.DataUtils.getPropertyValue,uC=np.DataProcessingUtils.getEntityAddressKey,lC=np.DataProcessingUtils.getPageSectionKey,pC=np.DataProcessingUtils.processAssociationEntityData,dC=np.DataProcessingUtils.processEntityData,fC=g.LangUtils.isDefined,mC=g.ReduxUtils.isPending;const gC=function(){var t=RE(),n=ME((function(e){return e.getIn([iC,"personNeighborMap",nC],(0,i.List)())})),r=xn()(n).call(n,(function(e){return e.has(sC)})),a=(0,e.useMemo)((function(){return fC(r)?d()({},lC(1,1),d()({},uC(0,nC,sC),cC(r,[sC,0]))):{}}),[r]),s=(0,e.useState)(a),o=Io()(s,2),c=o[0],u=o[1];(0,e.useEffect)((function(){u(a)}),[a]);var l=ME((function(e){return e.getIn([b,Q])})),p=ME((function(e){return e.getIn([_,B])})),f=ME((function(e){return e.getIn(["profile","person"])})),m=oC(f),g=oC(r),E={editAction:function(e){t(wn(e))},entityIndexToIdMap:(0,i.Map)().withMutations((function(e){e.set(nC,(0,i.List)([g]))})),entitySetIds:l,propertyTypeIds:p},h=ME((function(e){return e.getIn([iC,ir,q])}));return(0,AE.jsx)(np.Form,{disabled:fC(r)&&!r.isEmpty(),formContext:E,formData:c,isSubmitting:mC(h),onChange:function(e){var t=e.formData;u(t)},onSubmit:function(){var e=dC(c,l,p),n=pC([[rC,m,aC,0,nC,{}]],l,p);t(or({associationEntityData:n,entityData:e}))},schema:eC,uiSchema:tC})};const EC=function(){return(0,AE.jsxs)(AE.Fragment,{children:[(0,AE.jsx)(WT,{}),(0,AE.jsx)(AT,{}),(0,AE.jsx)(gC,{}),(0,AE.jsx)(oT,{}),(0,AE.jsx)(GA,{})]})};var hC=JSON.parse(pE()(YS)),SC=JSON.parse(pE()(QS));const IC=require("@fortawesome/pro-light-svg-icons/faFileAlt");var yC=LE.Colors.NEUTRAL,vC=g.DataUtils.getEntityKeyId,xC=VE().div.withConfig({displayName:"ChooseFormTypeModal__ButtonsWrapper",componentId:"vacyzu-0"})(["display:grid;grid-auto-flow:row;grid-gap:10px;padding:30px 0;"]),NC=VE().div.withConfig({displayName:"ChooseFormTypeModal__IconWrapper",componentId:"vacyzu-1"})(["margin-right:10px;"]),AC=(0,AE.jsx)(NC,{children:(0,AE.jsx)(yh.FontAwesomeIcon,{color:yC.N700,icon:IC.faFileAlt})});const TC=function(e){var t=e.isVisible,n=e.onClose,r=ME((function(e){return e.getIn(["profile","person"])})),a=Ce(r),s=vC(r),i="For: ".concat(a),o=RE(),c=ME((function(e){return e.getIn(X.ROOT)})),u=ME((function(e){return e.getIn(X.MATCH)})),l=Rh(c,u);return(0,AE.jsxs)(LE.Modal,{isVisible:t,onClose:n,textTitle:"Select Form Type",viewportScrolling:!0,children:[(0,AE.jsx)("div",{children:i}),(0,AE.jsxs)(xC,{children:[(0,AE.jsxs)(LE.Button,{"aria-label":"Form Button",onClick:function(){var e;s&&o(iE(ge()(e="".concat(l,"/")).call(e,Zg).replace(Kg,s)))},children:[AC,"Referral"]}),(0,AE.jsxs)(LE.Button,{"aria-label":"Form Button",onClick:function(){var e;s&&o(iE(ge()(e="".concat(l,"/")).call(e,Qg).replace(Kg,s)))},children:[AC,"Intake"]}),(0,AE.jsxs)(LE.Button,{"aria-label":"Form Button",onClick:function(){var e;s&&o(iE(ge()(e="".concat(l,"/")).call(e,$g).replace(Kg,s)))},children:[AC,"Repair Harm Agreement"]}),(0,AE.jsxs)(LE.Button,{"aria-label":"Form Button",onClick:function(){var e;s&&o(iE(ge()(e="".concat(l,"/")).call(e,tE).replace(Kg,s)))},children:[AC,"Restitution Referral"]}),(0,AE.jsxs)(LE.Button,{"aria-label":"Form Button",onClick:function(){var e;s&&o(iE(ge()(e="".concat(l,"/")).call(e,Jg).replace(Kg,s)))},children:[AC,"Peacemaker Information Form"]})]})]})};const CC=VE().div.withConfig({displayName:"SubmissionFieldsGrid",componentId:"sc-9qnstq-0"})(["display:grid;grid-gap:10px;grid-template-columns:repeat(2,200px);"]);var DC=A,RC=M,MC=Se.AGENCY,bC=Se.CHARGES,LC=Se.CRC_CASE,_C=Se.DA_CASE,OC=Se.FORM,wC=Se.HAS,UC=Se.PEOPLE,jC=Se.RECORDED_BY,kC=Se.REFERRAL_REQUEST,PC=Se.RELATED_TO,FC=Se.SCREENED_WITH,qC=Se.STAFF,GC=Se.STATUS,KC=ye.DATETIME_ADMINISTERED,zC=ye.DA_CASE_NUMBER,BC=ye.EFFECTIVE_DATE,HC=ye.GIVEN_NAME,VC=ye.NAME,YC=ye.NOTES,QC=ye.ROLE,WC=ye.SURNAME,JC=Ee.Constants.OPENLATTICE_ID_FQN,ZC=np.DataProcessingUtils.getEntityAddressKey,XC=np.DataProcessingUtils.getPageSectionKey,$C=np.DataProcessingUtils.processAssociationEntityData,eD=np.DataProcessingUtils.processEntityData,tD=g.DataUtils.getEntityKeyId,nD=g.DataUtils.getPropertyValue,rD=g.ReduxUtils.isPending,aD=g.ReduxUtils.isSuccess,sD=g.LangUtils.isNonEmptyString;const iD=function(){var t=RE(),n=ME((function(e){return e.getIn(X.APP_CONFIG)}));(0,e.useEffect)((function(){n&&t(Je())}),[n,t]);var r=(0,e.useState)(""),a=Io()(r,2),s=a[0],o=a[1],c=(0,e.useState)({}),u=Io()(c,2),l=u[0],p=u[1],f=ME((function(e){return e.getIn(["profile","person"])})),m=ME((function(e){return e.getIn([DC,"personNeighborMap"])})),g=ME((function(e){return e.getIn([DC,"personCaseNeighborMap"])})),E=g.getIn([kC,s,0],(0,i.Map)()),h=ME((function(e){return e.getIn([RC,"referralRequestNeighborMap"])})),S=h.get(_C,(0,i.Map)()),I=m.get(LC,(0,i.List)()),y=Li()(I).call(I,(function(e){var t,n=tD(e),r=nD(e,[YC,0]),a=g.getIn([QC,n,"Respondent",0],(0,i.Map)()),s=Ce(a),o=g.getIn([kC,n,0],(0,i.Map)()),c=tD(o),u=S.getIn([c,0],(0,i.Map)()),l=nD(u,[zC,0]);return{label:ge()(t="".concat(l||r," - ")).call(t,s),value:n}})).toJS(),v=ME((function(e){return e.getIn([DC,"staffMembers"])})),x=sp(hC,v,[HC,WC],["properties",XC(1,6),"properties",ZC(0,qC,JC)]),N=ME((function(e){return e.getIn([RC,R],(0,i.List)())}));x=sp(x,N,[VC],["properties",XC(1,5),"properties",ZC(0,bC,VC)]);var A=ME((function(e){return e.getIn([RC,"agencies"],(0,i.List)())}));x=sp(x,A,[VC],["properties",XC(1,5),"properties",ZC(0,MC,VC)]);var T=(0,e.useMemo)((function(){return NI(f,s,E,g,h)}),[f,s,E,g,h]);(0,e.useEffect)((function(){p(T)}),[T]);var C=ME((function(e){return e.getIn([b,Q])})),D=ME((function(e){return e.getIn([_,B])})),M=tD(f),L=ME((function(e){return e.getIn(["intake",He,q])})),O=aD(L),w=(0,e.useCallback)((function(){t(Gt([He]))}),[t]);(0,e.useEffect)((function(){return w}),[w]);var U=Ce(f),j=ME((function(e){return e.getIn(X.ROOT)})),k=ME((function(e){return e.getIn(X.MATCH)})),P=Rh(j,k);return(0,AE.jsxs)(AE.Fragment,{children:[(0,AE.jsxs)(LE.CardSegment,{children:[(0,AE.jsxs)(Th,{children:[(0,AE.jsx)(Eh,{children:(0,AE.jsx)(Sh,{to:P,children:(0,AE.jsx)(LE.Typography,{color:"inherit",variant:"body2",children:U})})}),(0,AE.jsx)(Eh,{children:(0,AE.jsx)(LE.Typography,{color:"inherit",variant:"body2",children:"Intake Form"})})]}),(0,AE.jsx)(LE.Typography,{variant:"h1",children:"Intake Form"}),(0,AE.jsx)(LE.Typography,{variant:"body1",children:"Submit the information below to add a new intake for this person."})]}),(0,AE.jsxs)(LE.CardSegment,{children:[(0,AE.jsx)(LE.Typography,{gutterBottom:!0,children:"Choose the CRC case:"}),(0,AE.jsx)(LE.Select,{onChange:function(e){return o(e.value)},options:y})]}),sD(s)&&(0,AE.jsx)(np.Form,{hideSubmit:O,isSubmitting:rD(L),formData:l,onChange:function(e){var t=e.formData;p(t)},onSubmit:function(){var e,n=XC(1,1),r=XC(1,6),a=XC(1,7),o=(e={},d()(e,n,(0,i.get)(l,n)),d()(e,r,(0,i.get)(l,r)),d()(e,a,(0,i.get)(l,a)),e),c=[r,ZC(0,qC,JC)],u=(0,i.getIn)(o,c);o=(0,i.removeIn)(o,c),o=op(o,[n,ZC(0,OC,KC)]);var p=(0,i.getIn)(o,[n,ZC(0,OC,KC)]);o=(0,i.setIn)(o,[a,ZC(0,GC,BC)],p);var f=eD(o,C,D),m=[[FC,M,UC,0,OC,{}],[PC,0,OC,s,LC,{}],[jC,0,OC,u,qC,{}],[jC,0,GC,u,qC,{}],[wC,M,UC,0,GC,{}],[wC,s,LC,0,GC,{}],[PC,0,OC,tD(E),kC,{}]],g=$C(m,C,D);t(Ve({associationEntityData:g,entityData:f}))},schema:x,uiSchema:SC}),O&&(0,AE.jsx)(LE.CardSegment,{children:(0,AE.jsxs)(CC,{children:[(0,AE.jsx)(LE.Typography,{gutterBottom:!0,children:"Submitted!"}),(0,AE.jsx)(LE.Button,{arialabelledby:"intake backToProfile",color:"success",onClick:function(){t(iE(P))},variant:"outlined",children:"Back to Profile"})]})})]})},oD={aa:{name:"Afar",nativeName:"Afaraf"},ab:{name:"Abkhaz",nativeName:"аҧсуа бызшәа"},ae:{name:"Avestan",nativeName:"avesta"},af:{name:"Afrikaans",nativeName:"Afrikaans"},ak:{name:"Akan",nativeName:"Akan"},am:{name:"Amharic",nativeName:"አማርኛ"},an:{name:"Aragonese",nativeName:"aragonés"},ar:{name:"Arabic",nativeName:"اللغة العربية"},as:{name:"Assamese",nativeName:"অসমীয়া"},av:{name:"Avaric",nativeName:"авар мацӀ"},ay:{name:"Aymara",nativeName:"aymar aru"},az:{name:"Azerbaijani",nativeName:"azərbaycan dili"},ba:{name:"Bashkir",nativeName:"башҡорт теле"},be:{name:"Belarusian",nativeName:"беларуская мова"},bg:{name:"Bulgarian",nativeName:"български език"},bh:{name:"Bihari",nativeName:"भोजपुरी"},bi:{name:"Bislama",nativeName:"Bislama"},bm:{name:"Bambara",nativeName:"bamanankan"},bn:{name:"Bengali",nativeName:"বাংলা"},bo:{name:"Tibetan",nativeName:"བོད་ཡིག"},br:{name:"Breton",nativeName:"brezhoneg"},bs:{name:"Bosnian",nativeName:"bosanski jezik"},ca:{name:"Catalan",nativeName:"Català"},ce:{name:"Chechen",nativeName:"нохчийн мотт"},ch:{name:"Chamorro",nativeName:"Chamoru"},co:{name:"Corsican",nativeName:"corsu"},cr:{name:"Cree",nativeName:"ᓀᐦᐃᔭᐍᐏᐣ"},cs:{name:"Czech",nativeName:"čeština"},cu:{name:"Old Church Slavonic",nativeName:"ѩзыкъ словѣньскъ"},cv:{name:"Chuvash",nativeName:"чӑваш чӗлхи"},cy:{name:"Welsh",nativeName:"Cymraeg"},da:{name:"Danish",nativeName:"dansk"},de:{name:"German",nativeName:"Deutsch"},dv:{name:"Divehi",nativeName:"Dhivehi"},dz:{name:"Dzongkha",nativeName:"རྫོང་ཁ"},ee:{name:"Ewe",nativeName:"Eʋegbe"},el:{name:"Greek",nativeName:"Ελληνικά"},en:{name:"English",nativeName:"English"},eo:{name:"Esperanto",nativeName:"Esperanto"},es:{name:"Spanish",nativeName:"Español"},et:{name:"Estonian",nativeName:"eesti"},eu:{name:"Basque",nativeName:"euskara"},fa:{name:"Persian",nativeName:"فارسی"},ff:{name:"Fula",nativeName:"Fulfulde"},fi:{name:"Finnish",nativeName:"suomi"},fj:{name:"Fijian",nativeName:"Vakaviti"},fo:{name:"Faroese",nativeName:"føroyskt"},fr:{name:"French",nativeName:"Français"},fy:{name:"Western Frisian",nativeName:"Frysk"},ga:{name:"Irish",nativeName:"Gaeilge"},gd:{name:"Scottish Gaelic",nativeName:"Gàidhlig"},gl:{name:"Galician",nativeName:"galego"},gn:{name:"Guaraní",nativeName:"Avañe'ẽ"},gu:{name:"Gujarati",nativeName:"ગુજરાતી"},gv:{name:"Manx",nativeName:"Gaelg"},ha:{name:"Hausa",nativeName:"هَوُسَ"},he:{name:"Hebrew",nativeName:"עברית"},hi:{name:"Hindi",nativeName:"हिन्दी"},ho:{name:"Hiri Motu",nativeName:"Hiri Motu"},hr:{name:"Croatian",nativeName:"Hrvatski"},ht:{name:"Haitian",nativeName:"Kreyòl ayisyen"},hu:{name:"Hungarian",nativeName:"magyar"},hy:{name:"Armenian",nativeName:"Հայերեն"},hz:{name:"Herero",nativeName:"Otjiherero"},ia:{name:"Interlingua",nativeName:"Interlingua"},id:{name:"Indonesian",nativeName:"Bahasa Indonesia"},ie:{name:"Interlingue",nativeName:"Interlingue"},ig:{name:"Igbo",nativeName:"Asụsụ Igbo"},ii:{name:"Nuosu",nativeName:"ꆈꌠ꒿ Nuosuhxop"},ik:{name:"Inupiaq",nativeName:"Iñupiaq"},io:{name:"Ido",nativeName:"Ido"},is:{name:"Icelandic",nativeName:"Íslenska"},it:{name:"Italian",nativeName:"Italiano"},iu:{name:"Inuktitut",nativeName:"ᐃᓄᒃᑎᑐᑦ"},ja:{name:"Japanese",nativeName:"日本語"},jv:{name:"Javanese",nativeName:"basa Jawa"},ka:{name:"Georgian",nativeName:"ქართული"},kg:{name:"Kongo",nativeName:"Kikongo"},ki:{name:"Kikuyu",nativeName:"Gĩkũyũ"},kj:{name:"Kwanyama",nativeName:"Kuanyama"},kk:{name:"Kazakh",nativeName:"қазақ тілі"},kl:{name:"Kalaallisut",nativeName:"kalaallisut"},km:{name:"Khmer",nativeName:"ខេមរភាសា"},kn:{name:"Kannada",nativeName:"ಕನ್ನಡ"},ko:{name:"Korean",nativeName:"한국어"},kr:{name:"Kanuri",nativeName:"Kanuri"},ks:{name:"Kashmiri",nativeName:"कश्मीरी"},ku:{name:"Kurdish",nativeName:"Kurdî"},kv:{name:"Komi",nativeName:"коми кыв"},kw:{name:"Cornish",nativeName:"Kernewek"},ky:{name:"Kyrgyz",nativeName:"Кыргызча"},la:{name:"Latin",nativeName:"latine"},lb:{name:"Luxembourgish",nativeName:"Lëtzebuergesch"},lg:{name:"Ganda",nativeName:"Luganda"},li:{name:"Limburgish",nativeName:"Limburgs"},ln:{name:"Lingala",nativeName:"Lingála"},lo:{name:"Lao",nativeName:"ພາສາ"},lt:{name:"Lithuanian",nativeName:"lietuvių kalba"},lu:{name:"Luba-Katanga",nativeName:"Tshiluba"},lv:{name:"Latvian",nativeName:"latviešu valoda"},mg:{name:"Malagasy",nativeName:"fiteny malagasy"},mh:{name:"Marshallese",nativeName:"Kajin M̧ajeļ"},mi:{name:"Māori",nativeName:"te reo Māori"},mk:{name:"Macedonian",nativeName:"македонски јазик"},ml:{name:"Malayalam",nativeName:"മലയാളം"},mn:{name:"Mongolian",nativeName:"Монгол хэл"},mr:{name:"Marathi",nativeName:"मराठी"},ms:{name:"Malay",nativeName:"Bahasa Malaysia"},mt:{name:"Maltese",nativeName:"Malti"},my:{name:"Burmese",nativeName:"ဗမာစာ"},na:{name:"Nauru",nativeName:"Ekakairũ Naoero"},nb:{name:"Norwegian Bokmål",nativeName:"Norsk bokmål"},nd:{name:"Northern Ndebele",nativeName:"isiNdebele"},ne:{name:"Nepali",nativeName:"नेपाली"},ng:{name:"Ndonga",nativeName:"Owambo"},nl:{name:"Dutch",nativeName:"Nederlands"},nn:{name:"Norwegian Nynorsk",nativeName:"Norsk nynorsk"},no:{name:"Norwegian",nativeName:"Norsk"},nr:{name:"Southern Ndebele",nativeName:"isiNdebele"},nv:{name:"Navajo",nativeName:"Diné bizaad"},ny:{name:"Chichewa",nativeName:"chiCheŵa"},oc:{name:"Occitan",nativeName:"occitan"},oj:{name:"Ojibwe",nativeName:"ᐊᓂᔑᓈᐯᒧᐎᓐ"},om:{name:"Oromo",nativeName:"Afaan Oromoo"},or:{name:"Oriya",nativeName:"ଓଡ଼ିଆ"},os:{name:"Ossetian",nativeName:"ирон æвзаг"},pa:{name:"Panjabi",nativeName:"ਪੰਜਾਬੀ"},pi:{name:"Pāli",nativeName:"पाऴि"},pl:{name:"Polish",nativeName:"język polski"},ps:{name:"Pashto",nativeName:"پښتو"},pt:{name:"Portuguese",nativeName:"Português"},qu:{name:"Quechua",nativeName:"Runa Simi"},rm:{name:"Romansh",nativeName:"rumantsch grischun"},rn:{name:"Kirundi",nativeName:"Ikirundi"},ro:{name:"Romanian",nativeName:"Română"},ru:{name:"Russian",nativeName:"Русский"},rw:{name:"Kinyarwanda",nativeName:"Ikinyarwanda"},sa:{name:"Sanskrit",nativeName:"संस्कृतम्"},sc:{name:"Sardinian",nativeName:"sardu"},sd:{name:"Sindhi",nativeName:"सिन्धी"},se:{name:"Northern Sami",nativeName:"Davvisámegiella"},sg:{name:"Sango",nativeName:"yângâ tî sängö"},si:{name:"Sinhala",nativeName:"සිංහල"},sk:{name:"Slovak",nativeName:"slovenčina"},sl:{name:"Slovenian",nativeName:"slovenski jezik"},sm:{name:"Samoan",nativeName:"gagana fa'a Samoa"},sn:{name:"Shona",nativeName:"chiShona"},so:{name:"Somali",nativeName:"Soomaaliga"},sq:{name:"Albanian",nativeName:"Shqip"},sr:{name:"Serbian",nativeName:"српски језик"},ss:{name:"Swati",nativeName:"SiSwati"},st:{name:"Southern Sotho",nativeName:"Sesotho"},su:{name:"Sundanese",nativeName:"Basa Sunda"},sv:{name:"Swedish",nativeName:"Svenska"},sw:{name:"Swahili",nativeName:"Kiswahili"},ta:{name:"Tamil",nativeName:"தமிழ்"},te:{name:"Telugu",nativeName:"తెలుగు"},tg:{name:"Tajik",nativeName:"тоҷикӣ"},th:{name:"Thai",nativeName:"ไทย"},ti:{name:"Tigrinya",nativeName:"ትግርኛ"},tk:{name:"Turkmen",nativeName:"Türkmen"},tl:{name:"Tagalog",nativeName:"Wikang Tagalog"},tn:{name:"Tswana",nativeName:"Setswana"},to:{name:"Tonga",nativeName:"faka Tonga"},tr:{name:"Turkish",nativeName:"Türkçe"},ts:{name:"Tsonga",nativeName:"Xitsonga"},tt:{name:"Tatar",nativeName:"татар теле"},tw:{name:"Twi",nativeName:"Twi"},ty:{name:"Tahitian",nativeName:"Reo Tahiti"},ug:{name:"Uyghur",nativeName:"ئۇيغۇرچە‎"},uk:{name:"Ukrainian",nativeName:"Українська"},ur:{name:"Urdu",nativeName:"اردو"},uz:{name:"Uzbek",nativeName:"Ўзбек"},ve:{name:"Venda",nativeName:"Tshivenḓa"},vi:{name:"Vietnamese",nativeName:"Tiếng Việt"},vo:{name:"Volapük",nativeName:"Volapük"},wa:{name:"Walloon",nativeName:"walon"},wo:{name:"Wolof",nativeName:"Wollof"},xh:{name:"Xhosa",nativeName:"isiXhosa"},yi:{name:"Yiddish",nativeName:"ייִדיש"},yo:{name:"Yoruba",nativeName:"Yorùbá"},za:{name:"Zhuang",nativeName:"Saɯ cueŋƅ"},zh:{name:"Chinese",nativeName:"中文"},zu:{name:"Zulu",nativeName:"isiZulu"}};class cD{static getLanguages(e=[]){return e.map((e=>({code:e,name:cD.getName(e),nativeName:cD.getNativeName(e)})))}static getName(e){return cD.validate(e)?oD[e].name:""}static getAllNames(){return Object.values(oD).map((e=>e.name))}static getNativeName(e){return cD.validate(e)?oD[e].nativeName:""}static getAllNativeNames(){return Object.values(oD).map((e=>e.nativeName))}static getCode(e){return Object.keys(oD).find((t=>{const n=oD[t];return n.name.toLowerCase()===e.toLowerCase()||n.nativeName.toLowerCase()===e.toLowerCase()}))||""}static getAllCodes(){return Object.keys(oD)}static validate(e){return oD.hasOwnProperty(e)}}var uD,lD,pD,dD,fD,mD,gD=np.DataProcessingUtils.getEntityAddressKey,ED=np.DataProcessingUtils.getPageSectionKey,hD=Se.COMMUNICATION,SD=Se.FORM,ID=Se.PEACEMAKER_STATUS,yD=Se.PERSON_DETAILS,vD=ye.DATETIME_ADMINISTERED,xD=ye.EFFECTIVE_DATE,ND=ye.GENERAL_DATETIME,AD=ye.LANGUAGE,TD=ye.INTERESTS_AND_HOBBIES,CD=ye.NAME,DD=ye.RELIGION,RD=ye.STATUS,MD=ye.TEXT,bD={type:"object",title:"",properties:(pD={},d()(pD,ED(1,1),{type:"object",title:"",properties:(uD={},d()(uD,gD(0,hD,AD),{type:"array",title:"Languages Spoken",items:{type:"string",enum:cD.getAllNames()},uniqueItems:!0}),d()(uD,gD(0,yD,TD),{type:"string",title:"Interests and Hobbies"}),d()(uD,gD(0,yD,DD),{type:"string",title:"Faith Information"}),d()(uD,gD(0,SD,ND),{type:"string",title:"Date Trained",format:"date"}),d()(uD,gD(0,ID,RD),{type:"string",title:"Current Peacemaker Status",enum:["Active","Inactive"]}),d()(uD,gD(0,SD,MD),{type:"string",title:"Why would you like to be a peacemaker?"}),uD),required:[gD(0,hD,AD),gD(0,yD,TD),gD(0,yD,DD),gD(0,ID,RD),gD(0,SD,MD)]}),d()(pD,ED(1,2),{type:"object",title:"",properties:(lD={},d()(lD,gD(0,SD,vD),{type:"string",title:"Datetime Administered",default:vo.DateTime.local().toISO()}),d()(lD,gD(0,SD,CD),{type:"string",title:"Form Name",default:"Peacemaker Information Form"}),d()(lD,gD(0,ID,xD),{type:"string",title:"Peacemaker Status Date",default:vo.DateTime.local().toISO()}),lD),required:[gD(0,SD,vD),gD(0,SD,CD)]}),pD)},LD=(mD={},d()(mD,ED(1,1),(dD={classNames:"column-span-12 grid-container","ui:options":{editable:!0}},d()(dD,gD(0,hD,AD),{classNames:"column-span-6","ui:options":{multiple:!0}}),d()(dD,gD(0,yD,TD),{classNames:"column-span-6"}),d()(dD,gD(0,yD,DD),{classNames:"column-span-4"}),d()(dD,gD(0,SD,ND),{classNames:"column-span-4"}),d()(dD,gD(0,ID,RD),{classNames:"column-span-4"}),d()(dD,gD(0,SD,MD),{classNames:"column-span-12"}),dD)),d()(mD,ED(1,2),(fD={classNames:"column-span-12 grid-container"},d()(fD,gD(0,SD,vD),{"ui:widget":"hidden"}),d()(fD,gD(0,SD,CD),{"ui:widget":"hidden"}),d()(fD,gD(0,ID,xD),{"ui:widget":"hidden"}),fD)),mD),_D=np.DataProcessingUtils.getEntityAddressKey,OD=np.DataProcessingUtils.getPageSectionKey,wD=g.DataUtils.getPropertyValue,UD=Se.COMMUNICATION,jD=Se.FORM,kD=Se.PEACEMAKER_STATUS,PD=Se.PERSON_DETAILS,FD=ye.DATETIME_ADMINISTERED,qD=ye.EFFECTIVE_DATE,GD=ye.GENERAL_DATETIME,KD=ye.LANGUAGE,zD=ye.INTERESTS_AND_HOBBIES,BD=ye.NAME,HD=ye.RELIGION,VD=ye.STATUS,YD=ye.TEXT;function QD(e,t){var n=ai()(e);if(wE()){var r=wE()(e);t&&(r=Wi()(r).call(r,(function(t){return jE()(e,t).enumerable}))),n.push.apply(n,r)}return n}function WD(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)ls()(n=QD(Object(r),!0)).call(n,(function(t){d()(e,t,r[t])}));else if(PE())qE()(e,PE()(r));else{var a;ls()(a=QD(Object(r))).call(a,(function(t){KE()(e,t,jE()(r,t))}))}}return e}var JD=Se.COMMUNICATION,ZD=Se.FORM,XD=Se.HAS,$D=Se.PEACEMAKER_STATUS,eR=Se.PEOPLE,tR=Se.PERSON_DETAILS,nR=Se.SCREENED_WITH,rR=ye.GENERAL_DATETIME,aR=ye.NAME,sR=ye.STATUS,iR=N,oR=A,cR=np.DataProcessingUtils.getEntityAddressKey,uR=np.DataProcessingUtils.getPageSectionKey,lR=np.DataProcessingUtils.processAssociationEntityData,pR=np.DataProcessingUtils.processEntityData,dR=g.ReduxUtils.isPending,fR=g.ReduxUtils.isSuccess,mR=g.DataUtils.getEntityKeyId,gR=g.DataUtils.getPropertyValue,ER=g.LangUtils.isDefined;const hR=function(){var t=RE(),n=ME((function(e){return e.getIn([oR,iR],(0,i.Map)())})),r=n.get(ZD,(0,i.List)()),a=xn()(r).call(r,(function(e){return"Peacemaker Information Form"===gR(e,[aR,0])})),s=ER(a)?mR(a):void 0,o=n.get($D,(0,i.List)()).sortBy((function(e){return vo.DateTime.fromISO(gR(e,[sR,0])).valueOf()})).last(),c=ER(o)?mR(o):void 0,u=(0,e.useMemo)((function(){return ER(a)?function(e,t,n){var r,a,s,o=wD(e,[FD,0]),c=wD(e,[GD,0]),u=vo.DateTime.fromISO(c).toISODate(),l=wD(e,[YD,0]),p=t.getIn([UD,0],(0,i.Map)()),f=wD(p,KD),m=i.List.isList(f)?f.toJS():f,g=t.get(PD,(0,i.List)()),E=xn()(g).call(g,(function(e){return e.has(zD)||e.has(HD)})),h=wD(E,[zD,0]),S=wD(E,[HD,0]),I=wD(n,[VD,0]),y=wD(n,[qD,0]);return s={},d()(s,OD(1,1),(r={},d()(r,_D(0,UD,KD),m),d()(r,_D(0,PD,zD),h),d()(r,_D(0,PD,HD),S),d()(r,_D(0,jD,GD),u),d()(r,_D(0,kD,VD),I),d()(r,_D(0,jD,YD),l),r)),d()(s,OD(1,2),(a={},d()(a,_D(0,jD,FD),o),d()(a,_D(0,jD,BD),"Peacemaker Information Form"),d()(a,_D(0,kD,VD),y),a)),s}(a,n,o):{}}),[o,a,n]),l=(0,e.useState)(u),p=Io()(l,2),f=p[0],m=p[1];(0,e.useEffect)((function(){m(u)}),[u]);var g=ME((function(e){return e.getIn([b,Q])})),E=ME((function(e){return e.getIn([_,B])})),h=ME((function(e){return e.getIn(["profile","person"])})),S=mR(h),I=ME((function(e){return e.getIn([oR,iR,JD],(0,i.List)())})),y=ME((function(e){return e.getIn([oR,iR,tR],(0,i.List)())})),v={editAction:function(e){t(En(WD(WD({},e),{},{formEKID:s,peacemakerStatusEKID:c,personEKID:S})))},entityIndexToIdMap:(0,i.Map)().withMutations((function(e){e.set(JD,(0,i.List)([mR(I.get(0))])),e.set(ZD,(0,i.List)([s])),e.set(tR,(0,i.List)([mR(y.get(0))])),e.set($D,(0,i.List)([c]))})),entitySetIds:g,propertyTypeIds:E},x=ME((function(e){return e.getIn([Ba,fn,q])})),N=Ce(h),A=ME((function(e){return e.getIn(X.ROOT)})),T=ME((function(e){return e.getIn(X.MATCH)})),C=Rh(A,T);return(0,AE.jsxs)(AE.Fragment,{children:[(0,AE.jsxs)(LE.CardSegment,{children:[(0,AE.jsxs)(Th,{children:[(0,AE.jsx)(Eh,{children:(0,AE.jsx)(Sh,{to:C,children:(0,AE.jsx)(LE.Typography,{color:"inherit",variant:"body2",children:N})})}),(0,AE.jsx)(Eh,{children:(0,AE.jsx)(LE.Typography,{color:"inherit",variant:"body2",children:"Peacemaker Information"})})]}),(0,AE.jsx)(LE.Typography,{variant:"h1",children:"Peacemaker Information"}),(0,AE.jsx)(LE.Typography,{variant:"body1",children:"Enter the information below to add details for the peacemaker."})]}),(0,AE.jsx)(np.Form,{disabled:ER(a)&&!a.isEmpty(),formContext:v,formData:f,isSubmitting:dR(x),onChange:function(e){var t=e.formData;m(t)},onSubmit:function(){var e=op(f,[uR(1,1),cR(0,ZD,rR)]),n=pR(e,g,E),r=lR([[nR,S,eR,0,ZD,{}],[XD,S,eR,0,tR,{}],[XD,S,eR,0,JD,{}],[XD,S,eR,0,$D,{}]],g,E);t(mn({associationEntityData:r,entityData:n}))},schema:bD,uiSchema:LD}),fR(x)&&(0,AE.jsx)(LE.CardSegment,{children:(0,AE.jsxs)(CC,{children:[(0,AE.jsx)(LE.Typography,{gutterBottom:!0,children:"Submitted!"}),(0,AE.jsx)(LE.Button,{arialabelledby:"peacemakerInformationForm backToProfile",color:"success",onClick:function(){t(iE(C))},variant:"outlined",children:"Back to Profile"})]})})]})},SR=require("@babel/runtime-corejs3/helpers/taggedTemplateLiteral");var IR=n.n(SR);VE().img.attrs({alt:"openlattice-icon",src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjEiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCAyMSA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTEyLjAxMzEgMS40Mjk1MkMxMy45MTkxIC0wLjQ3NjUwOCAxNy4wMDk1IC0wLjQ3NjUwOCAxOC45MTU1IDEuNDI5NTJDMjAuODIxNSAzLjMzNTU1IDIwLjgyMTUgNi40MjU4NCAxOC45MTU1IDguMzMxODVMOC4zMzE5IDE4LjkxNTVDNi40MjU4MiAyMC44MjE1IDMuMzM1NTUgMjAuODIxNSAxLjQyOTUyIDE4LjkxNTVDLTAuNDc2NTA4IDE3LjAwOTUgLTAuNDc2NTA4IDEzLjkxOTEgMS40Mjk1MiAxMi4wMTMxTDEyLjAxMzEgMS40Mjk1MloiIGZpbGw9IiNBMTkyRkYiLz4KPHBhdGggZD0iTTEyLjAxMzEgMTEuMzIzMkMxMy45MTkxIDkuNDE3MjEgMTcuMDA5NSA5LjQxNzIxIDE4LjkxNTUgMTEuMzIzMkMyMC44MjE1IDEzLjIyOTIgMjAuODIxNSAxNi4zMTk2IDE4LjkxNTUgMTguMjI1Nkw4LjMzMTkgMjguODA5MkM2LjQyNTgyIDMwLjcxNTIgMy4zMzU1NSAzMC43MTUyIDEuNDI5NTIgMjguODA5MkMtMC40NzY1MDggMjYuOTAzMSAtMC40NzY1MDggMjMuODEyOSAxLjQyOTUyIDIxLjkwNjlMMTIuMDEzMSAxMS4zMjMyWiIgZmlsbD0iI0ExOTJGRiIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTE3LjA4MDEgMTAuMTY3N0w4LjMzMTk1IDE4LjkxNTlDNi45NjE3IDIwLjI4NjEgNC45Nzk0MiAyMC42NzEzIDMuMjY1MDggMjAuMDcxM0wxMi4wMTMyIDExLjMyMzJDMTMuMzgzNSA5Ljk1MzAxIDE1LjM2NTcgOS41Njc4MiAxNy4wODAxIDEwLjE2NzdaIiBmaWxsPSIjNzY1NEZGIi8+CjxwYXRoIGQ9Ik0xMi4wMTMxIDIxLjA4NDdDMTMuOTE5MSAxOS4xNzg3IDE3LjAwOTUgMTkuMTc4NyAxOC45MTU1IDIxLjA4NDdDMjAuODIxNSAyMi45OTA3IDIwLjgyMTUgMjYuMDgxMSAxOC45MTU1IDI3Ljk4NzFMOC4zMzE5IDM4LjU3MDdDNi40MjU4MiA0MC40NzY3IDMuMzM1NTUgNDAuNDc2NyAxLjQyOTUyIDM4LjU3MDdDLTAuNDc2NTA4IDM2LjY2NDYgLTAuNDc2NTA4IDMzLjU3NDQgMS40Mjk1MiAzMS42Njg0TDEyLjAxMzEgMjEuMDg0N1oiIGZpbGw9IiNBMTkyRkYiLz4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNy4xNzY3IDE5Ljk2NDNMOC4zMzE3NSAyOC44MDkzQzYuOTM1NjEgMzAuMjA1NCA0LjkwNDA3IDMwLjU3OSAzLjE2Nzk3IDI5LjkyOThMMTIuMDEzIDIxLjA4NDhDMTMuNDA5MSAxOS42ODg2IDE1LjQ0MDcgMTkuMzE1MSAxNy4xNzY3IDE5Ljk2NDNaIiBmaWxsPSIjNzY1NEZGIi8+Cjwvc3ZnPgo="}).withConfig({displayName:"icons__OpenLatticeIcon",componentId:"o9b8qf-0"})([""]);var yR=VE().img.attrs({alt:"ol-portrait",src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQ4IiBoZWlnaHQ9IjI0NyIgdmlld0JveD0iMCAwIDI0OCAyNDciIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHg9IjAuNSIgd2lkdGg9IjI0NyIgaGVpZ2h0PSIyNDciIHJ4PSIxLjkzNTQ4IiBmaWxsPSIjRUVFRUYwIi8+CjxwYXRoIGQ9Ik0xMjQuNDggNTIuNzg2M0MxNTEuMTIxIDUyLjc4NjMgMTcyLjcyMiA3NC4zODcxIDE3Mi43MjIgMTAxLjAyOUMxNzIuNzIyIDEyNy42NyAxNTEuMTIxIDE0OS4yNzQgMTI0LjQ4IDE0OS4yNzRDOTcuODM4MyAxNDkuMjc0IDc2LjIzNDcgMTI3LjY3IDc2LjIzNDcgMTAxLjAyOUM3Ni4yMzQ3IDc0LjM4NzEgOTcuODM4MyA1Mi43ODYzIDEyNC40OCA1Mi43ODYzWk0zNC4zNjI4IDI0Ni4zNTFDMzYuMTI3OCAxOTcuODkzIDc1Ljk4OTIgMTU5LjQ2IDEyNC40OCAxNTkuNDZDMTcyLjk2NyAxNTkuNDYgMjEyLjgzMiAxOTcuODkzIDIxNC41OTQgMjQ2LjM1MUwxOTYuMTI2IDI0N0MxOTQuNzIzIDIwOC40NjUgMTYzLjAyIDE3OC4wMDIgMTI0LjQ4IDE3OC4wMDJDODUuOTM2MyAxNzguMDAyIDU0LjIzMzYgMjA4LjQ2NSA1Mi44MzA5IDI0N0wzNC4zNjI4IDI0Ni4zNTFIMzQuMzYyOFpNMTI0LjQ4IDcxLjMyNzZDMTA4LjA3MiA3MS4zMjc2IDk0Ljc3NTkgODQuNjIzNSA5NC43NzU5IDEwMS4wMjlDOTQuNzc1OSAxMTcuNDM3IDEwOC4wNzIgMTMwLjczMiAxMjQuNDggMTMwLjczMkMxNDAuODg1IDEzMC43MzIgMTU0LjE4MSAxMTcuNDM3IDE1NC4xODEgMTAxLjAyOUMxNTQuMTgxIDg0LjYyMzUgMTQwLjg4NSA3MS4zMjc2IDEyNC40OCA3MS4zMjc2WiIgZmlsbD0iI0QxRDFENiIvPgo8L3N2Zz4K"}).withConfig({displayName:"icons__OLPortrait",componentId:"o9b8qf-1"})([""]),vR=g.LangUtils.isNonEmptyString,xR=VE().img.withConfig({displayName:"Portrait__Image",componentId:"sc-1dv6kwf-0"})(["border-radius:3px;object-fit:cover;object-position:50% 50%;"]),NR=function(e){var t=e.height,n=e.imageUrl,r=e.width;return vR(n)?(0,AE.jsx)(xR,{src:n,height:t,width:r}):(0,AE.jsx)(yR,{})};NR.defaultProps={height:247,width:247,imageUrl:""};const AR=NR;var TR,CR=LE.StyleUtils.media,DR=g.DataUtils.getPropertyValue,RR=g.DateTimeUtils.formatAsDate,MR=ye.DOB,bR=ye.GIVEN_NAME,LR=ye.SURNAME,_R=VE()(LE.Card).withConfig({displayName:"ProfileCard__InlineCard",componentId:"qos8r6-0"})(["display:inline-block;",""],CR.phone(TR||(TR=IR()(["\n    width: 100%;\n  "])))),OR=VE()(LE.CardSegment).withConfig({displayName:"ProfileCard__CardDetails",componentId:"qos8r6-1"})(["padding-top:0;word-break:word-wrap;label:not(:first-of-type){margin-top:30px;}"]),wR=VE()(LE.CardSegment).withConfig({displayName:"ProfileCard__PortraitSegment",componentId:"qos8r6-2"})(["border-bottom:none;place-items:center;"]),UR=function(e){var t=e.imageUrl,n=e.person,r=DR(n,[MR,0]),a=DR(n,[bR,0]),s=DR(n,[LR,0]),i=RR(r);return(0,AE.jsxs)(_R,{children:[(0,AE.jsx)(wR,{children:(0,AE.jsx)(AR,{imageUrl:t})}),(0,AE.jsxs)(OR,{children:[(0,AE.jsx)(LE.Label,{subtle:!0,children:"Last Name"}),(0,AE.jsx)("div",{children:s||Nt}),(0,AE.jsx)(LE.Label,{subtle:!0,children:"First Name"}),(0,AE.jsx)("div",{children:a||Nt}),(0,AE.jsx)(LE.Label,{subtle:!0,children:"Date of Birth"}),(0,AE.jsx)("div",{children:i})]})]})};UR.defaultProps={imageUrl:void 0,person:(0,i.Map)()};const jR=UR;var kR=g.DataUtils.getEntityKeyId,PR=VE().div.withConfig({displayName:"ProfileAside__Centered",componentId:"sc-30oi83-0"})(["align-items:center;display:flex;flex-direction:column;"]),FR=VE().div.withConfig({displayName:"ProfileAside__ButtonWrapper",componentId:"sc-30oi83-1"})(["display:grid;grid-gap:0 10px;grid-template-columns:1fr 1fr;margin-top:16px;"]);const qR=function(){var t=(0,e.useState)(!1),n=Io()(t,2),r=n[0],a=n[1],s=ME((function(e){return e.getIn(["profile","person"])})),i=kR(s),o=ME((function(e){return e.getIn(X.ROOT)})),c=ME((function(e){return e.getIn(X.MATCH)})),u=Rh(o,c),l=RE();return(0,AE.jsxs)(PR,{children:[(0,AE.jsx)(jR,{person:s}),(0,AE.jsx)("div",{children:(0,AE.jsxs)(FR,{children:[(0,AE.jsx)(LE.Button,{onClick:function(){i&&l(iE("".concat(u,"/edit").replace(Kg,i)))},children:"Edit Profile"}),(0,AE.jsx)(LE.Button,{color:"primary",onClick:function(){return a(!0)},children:"Add Form"})]})}),(0,AE.jsx)(TC,{isVisible:r,onClose:function(){return a(!1)}})]})},GR=require("@fortawesome/pro-regular-svg-icons/faPlus");var KR,zR,BR,HR=Ee.Constants.OPENLATTICE_ID_FQN,VR=np.DataProcessingUtils.getEntityAddressKey,YR=np.DataProcessingUtils.getPageSectionKey,QR=Se.STAFF,WR=Se.STATUS,JR=ye.EFFECTIVE_DATE,ZR=ye.NOTES,XR=Ue,$R=je,eM=ke,tM=Ge,nM=qe,rM=VR(0,WR,ye.STATUS),aM={type:"object",title:"",properties:d()({},YR(1,1),{type:"object",title:"",properties:(KR={},d()(KR,rM,{type:"string",title:"Status",enum:[XR,$R,eM,nM]}),d()(KR,VR(0,WR,JR),{type:"string",title:"Effective date",format:"date",default:vo.DateTime.local().toISODate()}),d()(KR,VR(0,QR,HR),{type:"string",title:"Staff member",enum:[],enumNames:[]}),KR),required:[rM,VR(0,WR,JR),VR(0,QR,HR)],dependencies:d()({},rM,{oneOf:[{properties:(zR={},d()(zR,rM,{enum:[eM]}),d()(zR,VR(0,WR,ZR),{type:"string",title:"Reason for closing case",enum:tM}),zR)},{properties:d()({},rM,{enum:[XR]})},{properties:d()({},rM,{enum:[$R]})},{properties:d()({},rM,{enum:[nM]})}]})})},sM=d()({},YR(1,1),(BR={classNames:"column-span-12 grid-container"},d()(BR,rM,{classNames:"column-span-12"}),d()(BR,VR(0,WR,ZR),{classNames:"column-span-12"}),d()(BR,VR(0,WR,JR),{classNames:"column-span-12"}),d()(BR,VR(0,QR,HR),{classNames:"column-span-12"}),BR)),iM=A,oM=Se.CRC_CASE,cM=Se.HAS,uM=Se.PEOPLE,lM=Se.RECORDED_BY,pM=Se.STAFF,dM=Se.STATUS,fM=ye.EFFECTIVE_DATE,mM=ye.GIVEN_NAME,gM=ye.SURNAME,EM=Ee.Constants.OPENLATTICE_ID_FQN,hM=Q,SM=g.DataUtils.getEntityKeyId,IM=np.DataProcessingUtils.getEntityAddressKey,yM=np.DataProcessingUtils.getPageSectionKey,vM=np.DataProcessingUtils.processAssociationEntityData,xM=np.DataProcessingUtils.processEntityData,NM=g.ReduxUtils.isPending,AM=g.ReduxUtils.isSuccess;const TM=function(t){var n=t.caseEKID,r=t.isVisible,a=t.onClose,s=(0,e.useState)({}),o=Io()(s,2),c=o[0],u=o[1],l=ME((function(e){return e.getIn([iM,"staffMembers"])})),p=sp(aM,l,[mM,gM],["properties",yM(1,1),"properties",IM(0,pM,EM)]),d=ME((function(e){return e.getIn(["profile","person"])})),f=SM(d),m=ME((function(e){return e.getIn([b,hM])})),g=ME((function(e){return e.getIn([_,B])})),E=RE(),h=function(){var e=[yM(1,1),IM(0,pM,EM)],t=[yM(1,1),IM(0,dM,fM)],r=(0,i.getIn)(c,e),a=vM([[lM,0,dM,r,pM,{}],[cM,f,uM,0,dM,{}],[cM,n,oM,0,dM,{}]],m,g),s=(0,i.removeIn)(c,e),o=(0,i.getIn)(s,t),u=vo.DateTime.local();s=(0,i.setIn)(s,t,vo.DateTime.fromSQL(ge()(o).call(o," ",u.toISOTime())).toISO());var l=xM(s,m,g);E(An({associationEntityData:a,caseEKID:n,entityData:l,selectedStaffEKID:r}))},S=ME((function(e){return e.getIn([iM,Nn,q])}));(0,e.useEffect)((function(){AM(S)&&(E(Gt([Nn])),a())}),[E,a,S]);var I=(0,AE.jsx)(LE.ModalFooter,{isPendingPrimary:NM(S),onClickPrimary:h,onClickSecondary:a,textPrimary:"Submit",textSecondary:"Discard"});return(0,AE.jsxs)(LE.Modal,{isVisible:r,onClose:a,textTitle:"Add Case Status",viewportScrolling:!0,withFooter:I,children:[(0,AE.jsx)("div",{children:"To record status of Referral or Intake, please complete form first."}),(0,AE.jsx)(np.Form,{formData:c,hideSubmit:!0,noPadding:!0,onChange:function(e){var t=e.formData;u(t)},onSubmit:h,schema:p,uiSchema:sM})]})},CM=require("@fortawesome/pro-light-svg-icons/faTimes");var DM=LE.Colors.GREEN,RM=LE.Colors.NEUTRAL,MM=VE()(LE.CardSegment).withConfig({displayName:"CaseDetailsModalHeader__ModalCardSegment",componentId:"sc-1snioik-0"})(["align-items:center;background-color:",";color:white;justify-content:center;padding:20px;"],(function(e){return"open"===e.mode?DM.G300:RM.N700})),bM=VE().button.withConfig({displayName:"CaseDetailsModalHeader__CloseButton",componentId:"sc-1snioik-1"})(["background:none;border:none;cursor:pointer;font-size:12px;height:32px;width:32px;position:absolute;right:20px;"]);const LM=function(e){var t=e.mode,n=e.onClose;return(0,AE.jsxs)(MM,{mode:t,vertical:!1,children:["open"===t&&(0,AE.jsx)("div",{children:"This case is currently ongoing."}),"closed"===t&&(0,AE.jsx)("div",{children:"This case is closed."}),(0,AE.jsx)(bM,{onClick:n,children:(0,AE.jsx)(yh.FontAwesomeIcon,{color:"white",icon:CM.faTimes,size:"2x"})})]})};var _M=np.DataProcessingUtils.getEntityAddressKey,OM=np.DataProcessingUtils.getPageSectionKey,wM=Se.CRC_CASE,UM=ye.DESCRIPTION,jM={type:"object",title:"",properties:d()({},OM(1,1),{type:"object",title:"",properties:d()({},_M(0,wM,UM),{type:"string",title:" ",format:"textarea"})})},kM=d()({},OM(1,1),d()({classNames:"column-span-12 grid-container","ui:options":{editable:!0}},_M(0,wM,UM),{classNames:"column-span-12"})),PM=Se.CRC_CASE,FM=ye.DESCRIPTION,qM=g.DataUtils.getEntityKeyId,GM=g.DataUtils.getPropertyValue,KM=np.DataProcessingUtils.getEntityAddressKey,zM=np.DataProcessingUtils.getPageSectionKey;const BM=function(){var t=ME((function(e){return e.getIn(["profile","selectedCase"])})),n=(0,e.useMemo)((function(){return d()({},zM(1,1),d()({},KM(0,PM,FM),GM(t,[FM,0],"")))}),[t]),r=(0,e.useState)(n),a=Io()(r,2),s=a[0],o=a[1];(0,e.useEffect)((function(){o(n)}),[n]);var c=ME((function(e){return e.getIn([b,Q])})),u=ME((function(e){return e.getIn([_,B])})),l=(0,i.Map)().withMutations((function(e){e.set(PM,(0,i.List)([qM(t)]))})),p=RE(),f={editAction:function(e){p(jn(e))},entityIndexToIdMap:l,entitySetIds:c,propertyTypeIds:u};return(0,AE.jsx)(np.Form,{disabled:!0,formContext:f,formData:s,hideSubmit:!0,noPadding:!0,onChange:function(e){var t=e.formData;o(t)},schema:jM,uiSchema:kM})};var HM=g.DataUtils.getEntityKeyId,VM=LE.Colors.NEUTRAL,YM=Et,QM=VE()(LE.CardSegment).withConfig({displayName:"DocumentListItem__DocumentCardSegment",componentId:"ckapw9-0"})(["display:flex;flex-direction:row;justify-content:space-between;:first-of-type{padding-top:0;}div:first-child{display:flex;margin-right:20px;}span{margin-left:18px;}div:last-child{align-items:flex-end;display:flex;}"]),WM=VE()(LE.Typography).withConfig({displayName:"DocumentListItem__FormName",componentId:"ckapw9-1"})(["color:",";"],VM.N900);const JM=function(e){var t,n=e.caseIdentifier,r=e.form,a=e.formName,s=e.staffMemberName,i=e.submittedDate,o=HM(r),c=ME((function(e){return e.getIn(["profile","person"])})),u=HM(c),l=ME((function(e){return e.getIn(X.ROOT)})),p=ME((function(e){return e.getIn(X.MATCH)})),d=Rh(l,p),f=RE();return(0,AE.jsxs)(QM,{noBleed:!0,onClick:function(){if(u&&o){var e,t=YM[a];t&&f(t(r)),f(iE(ge()(e="".concat(d,"/")).call(e,rE[a]).replace(Kg,u).replace(zg,o)))}},children:[(0,AE.jsxs)("div",{children:[(0,AE.jsx)(yh.FontAwesomeIcon,{color:VM.N900,icon:IC.faFileAlt}),(0,AE.jsxs)("span",{children:[(0,AE.jsx)(WM,{variant:"h5",children:a}),(0,AE.jsx)(LE.Typography,{variant:"h6",children:n})]})]}),(0,AE.jsx)("div",{children:(0,AE.jsx)(LE.Typography,{variant:"h6",children:ge()(t="Submitted on ".concat(i," by ")).call(t,s)})})]})};var ZM=g.DateTimeUtils.formatAsDate,XM=g.DataUtils.getEntityKeyId,$M=g.DataUtils.getPropertyValue,eb=Se.STAFF,tb=ye.DATETIME_ADMINISTERED,nb=ye.NAME,rb=function(e){var t=e.caseIdentifier,n=e.forms,r=e.personCaseNeighborMap;return(0,AE.jsx)(LE.CardStack,{children:Li()(n).call(n,(function(e){var n=$M(e,[tb,0]),a=$M(e,[nb,0]),s=ZM(n),o=XM(e),c=r.getIn(["formNeighborMap",o,eb],(0,i.List)()),u=Ce(c.get(0,(0,i.Map)()));return(0,AE.jsx)(JM,{caseIdentifier:t,form:e,formName:a,staffMemberName:u,submittedDate:s},o)}))})};rb.defaultProps={caseIdentifier:""};const ab=rb;var sb,ib,ob=VE().div.withConfig({displayName:"modals__ModalInnerWrapper",componentId:"sc-1e004wl-0"})(["padding-top:24px;@media only screen and (min-width:584px){width:584px;}@media only screen and (min-width:900px){width:900px;}"]),cb=LE.StyleUtils.getStyleVariation,ub=LE.Colors.BLUE,lb=LE.Colors.GREEN,pb=LE.Colors.PURPLE,db=LE.Colors.RED,fb=yt,mb=ht,gb=St,Eb=It,hb=ze,Sb=Ke,Ib=cb("background",(sb={},d()(sb,Sb,lb.G00),d()(sb,fb,pb.P00),d()(sb,hb,db.R00),d()(sb,mb,ub.B00),d()(sb,gb,db.R00),d()(sb,Eb,lb.G00),sb),db.R00),yb=cb("color",(ib={},d()(ib,Sb,lb.G400),d()(ib,fb,pb.P400),d()(ib,hb,db.R400),d()(ib,mb,ub.B400),d()(ib,gb,db.R400),d()(ib,Eb,lb.G400),ib),db.R400),vb=VE()(LE.Tag).withConfig({displayName:"CRCTag",componentId:"sc-1n2b8qh-0"})(["background-color:",";border-radius:",";color:",";display:flex;justify-content:center;padding:",";text-transform:capitalize;"],Ib,(function(e){return e.borderRadius}),yb,(function(e){return e.padding})),xb="MM/dd/yyyy",Nb=ye.DATETIME_COMPLETED,Ab=ye.EFFECTIVE_DATE,Tb=ye.NOTES,Cb=ye.STATUS,Db=ke,Rb=Fe,Mb=g.LangUtils.isDefined,bb=g.DataUtils.getEntityKeyId,Lb=g.DataUtils.getPropertyValue,_b=VE().div.withConfig({displayName:"CaseTimeline__TimelineContentWrapper",componentId:"z6pqw0-0"})(["display:flex;div:nth-child(2){display:flex;flex-direction:column;margin-left:16px;}"]);const Ob=function(e){var t=e.agencyName,n=e.caseStatuses,r=e.referralRequest,a=e.staffMemberByStatusEKID;return(0,AE.jsx)(LE.Timeline,{children:Li()(n).call(n,(function(e){var n=bb(e),s=Lb(e,[Tb,0]),o=Lb(e,[Ab,0]),c=Lb(e,[Cb,0]),u=vo.DateTime.fromISO(o).toFormat(xb);if(c===Rb){var l=Lb(r,[Nb,0]);u=vo.DateTime.fromISO(l).toFormat(xb)}var p=a.get(n,(0,i.Map)());return(0,AE.jsxs)(LE.TimelineItem,{children:[(0,AE.jsxs)(LE.TimelineSeparator,{children:[(0,AE.jsx)(LE.TimelineDot,{}),(0,AE.jsx)(LE.TimelineConnector,{})]}),(0,AE.jsx)(LE.TimelineContent,{children:(0,AE.jsxs)(_b,{children:[(0,AE.jsx)(LE.Typography,{variant:"subtitle1",children:u}),(0,AE.jsxs)("div",{children:[(0,AE.jsx)(LE.Typography,{variant:"overline",children:c}),(0,AE.jsxs)(LE.Typography,{variant:"body1",children:[c===Db&&s,c===Rb&&Mb(r)&&t,c!==Db&&c!==Rb&&!p.isEmpty()&&"Submitted by: ".concat(Ce(p))]})]})]})})]},n)}))})};var wb=x,Ub=A,jb=LE.Colors.NEUTRAL,kb=Se.AGENCY,Pb=Se.FORM,Fb=Se.REFERRAL_REQUEST,qb=Se.STATUS,Gb=ye.DATETIME_ADMINISTERED,Kb=ye.EFFECTIVE_DATE,zb=ye.NAME,Bb=ye.ORGANIZATION_NAME,Hb=yt,Vb=ht,Yb=St,Qb=It,Wb=g.DataUtils.getEntityKeyId,Jb=g.DataUtils.getPropertyValue,Zb=g.LangUtils.isDefined,Xb=VE().div.withConfig({displayName:"CaseDetailsModal__ModalSection",componentId:"sc-13u4glu-0"})(["margin-bottom:36px;header:first-child{display:flex;margin-bottom:24px;}"]),$b=VE()(_E.Link).withConfig({displayName:"CaseDetailsModal__ParticipantTile",componentId:"sc-13u4glu-1"})(["align-items:start;border:1px solid ",";border-radius:3px;color:",";display:grid;grid-template-rows:1fr 1fr 1fr;grid-gap:5px 0;justify-items:start;max-width:280px;padding:24px 32px;text-decoration:none;"],jb.N200,jb.N700),eL=VE().div.withConfig({displayName:"CaseDetailsModal__ParticipantsTileGrid",componentId:"sc-13u4glu-2"})(["display:grid;grid-gap:24px;grid-template-columns:repeat(auto-fit,280px);"]);const tL=function(t){var n,r,a,s=t.caseEKID,o=t.caseIdentifier,c=t.caseRoleMap,u=t.dateAssignedToCaseMap,l=t.isVisible,p=t.onClose,d=t.personCase,f=(0,e.useState)(!1),m=Io()(f,2),g=m[0],E=m[1],h=ME((function(e){return e.getIn([Ub,wb,qb],(0,i.Map)())})),S=Of()(n=h.get(s,(0,i.List)()).sortBy((function(e){return e.getIn([Kb,0])}))).call(n),I=ME((function(e){return e.getIn([Ub,"staffMemberByStatusEKID"])})),y=ME((function(e){return e.getIn([Ub,wb,Fb,s],(0,i.List)())})).get(0),v=ME((function(e){return e.getIn([Ub,wb,Pb],(0,i.Map)())})),x=Of()(r=v.get(s,(0,i.List)()).sortBy((function(e){return e.getIn([Gb,0])}))).call(r),N=ME((function(e){return e.getIn([Ub,wb])})),A=ME((function(e){return e.getIn(["referral","referralRequestNeighborMap"])})),T=Wb(y),C=A.getIn([kb,T],(0,i.List)()).get(0,(0,i.Map)()),D=Jb(C,[zb,0]),R=c.get(Yb,(0,i.List)()),M=c.get(Qb,(0,i.List)()),b=c.get(Vb,(0,i.List)()),L=c.get(Hb,(0,i.List)()),_=L.get(0,(0,i.Map)()),O=Ce(_),w=Wb(_),U=u.get(Hb,(0,i.Map)()).get(w,""),j=xn()(S).call(S,(function(e){var t=Jb(e,[ye.STATUS,0]);return"Closed"===t||"Resolution"===t})),k=Zb(j)?"closed":"open",P=(0,AE.jsx)(LM,{mode:k,onClose:p}),F=RE(),q=ME((function(e){return e.getIn([Ub,"person"])})),G=ME((function(e){return e.getIn(X.ROOT)})),K=ME((function(e){return e.getIn(X.MATCH)})),z=Rh(G,K),B=function(e,t){if(e&&t){var n=Wb(q);if(n)return"".concat(z).replace(n,e)}return z},H=function(e,t){var n=Wb(e),r=e.has(Bb),a=r?Jb(e,[Bb,0]):Ce(e);return(0,AE.jsxs)($b,{to:B(n,!r),children:[(0,AE.jsx)(LE.Label,{subtle:!0,children:"Name"}),(0,AE.jsx)(LE.Typography,{children:a}),(0,AE.jsx)(vb,{background:t,borderRadius:"31px",color:t,padding:"10px 16px",children:(0,AE.jsx)(LE.Typography,{color:"inherit",variant:"body2",children:t})})]},Wb(e))};return(0,AE.jsxs)(LE.Modal,{isVisible:l,onClose:p,viewportScrolling:!0,withHeader:P,children:[(0,AE.jsxs)(ob,{children:[(0,AE.jsx)(LE.Typography,{variant:"h2",children:o}),(0,AE.jsx)(LE.Typography,{variant:"h4",gutterBottom:!0,children:ge()(a="Case Manager: ".concat(O," (Date Assigned: ")).call(a,U,")")}),(0,AE.jsxs)(Xb,{children:[(0,AE.jsxs)("header",{children:[(0,AE.jsx)(LE.Typography,{variant:"h3",children:"Status"}),(0,AE.jsx)(LE.IconButton,{"aria-label":"Small Status Icon Button",color:"success",size:"small",onClick:function(){return E(!0)},children:(0,AE.jsx)(yh.FontAwesomeIcon,{fixedWidth:!0,icon:GR.faPlus})})]}),(0,AE.jsx)(Ob,{agencyName:D,caseStatuses:S,referralRequest:y,staffMemberByStatusEKID:I})]}),(0,AE.jsxs)(Xb,{children:[(0,AE.jsxs)("header",{children:[(0,AE.jsx)(LE.Typography,{color:jb.N700,variant:"h3",children:"Participants"}),(0,AE.jsx)(LE.IconButton,{"aria-label":"Small Status Icon Button",color:"success",size:"small",onClick:function(){var e;s&&F(iE(ge()(e="".concat(G,"/")).call(e,Vg).replace(Bg,s)))},children:(0,AE.jsx)(yh.FontAwesomeIcon,{fixedWidth:!0,icon:GR.faPlus})})]}),(0,AE.jsxs)(eL,{children:[Li()(R).call(R,(function(e){return H(e,Yb)})),Li()(M).call(M,(function(e){return H(e,Qb)})),Li()(b).call(b,(function(e){return H(e,Vb)})),Li()(L).call(L,(function(e){return H(e,Hb)}))]})]}),(0,AE.jsxs)(Xb,{children:[(0,AE.jsx)("header",{children:(0,AE.jsx)(LE.Typography,{color:jb.N700,variant:"h3",children:"Documents"})}),(0,AE.jsx)(ab,{caseIdentifier:o,forms:x,personCaseNeighborMap:N})]}),(0,AE.jsxs)(Xb,{children:[(0,AE.jsx)(LE.Typography,{color:jb.N700,variant:"h3",children:"Notes"}),(0,AE.jsx)(BM,{crcCase:d})]})]}),(0,AE.jsx)(TM,{caseEKID:s,isVisible:g,onClose:function(){return E(!1)}})]})};var nL=Se.DA_CASE,rL=Se.REFERRAL_REQUEST,aL=ye.DATETIME_RECEIVED,sL=ye.DA_CASE_NUMBER,iL=ye.GENERAL_DATETIME,oL=ye.NOTES,cL=ye.ROLE,uL=LE.Colors.NEUTRAL,lL=x,pL=A,dL=g.DateTimeUtils.formatAsDate,fL=g.DataUtils.getEntityKeyId,mL=g.DataUtils.getPropertyValue,gL=g.LangUtils.isDefined,EL=VE()(LE.CardSegment).withConfig({displayName:"CaseParticipationListItem__ListItemCardSegment",componentId:"sc-1oxfyr1-0"})(["align-items:center;flex-direction:row;justify-content:space-between;"]),hL=VE()(LE.Typography).withConfig({displayName:"CaseParticipationListItem__Date",componentId:"sc-1oxfyr1-1"})(["color:",";"],uL.N600),SL=VE()(LE.Typography).withConfig({displayName:"CaseParticipationListItem__CaseNumberAndName",componentId:"sc-1oxfyr1-2"})(["color:",";margin-top:8px;"],uL.N800);const IL=function(t){var n,r=t.personCase,a=(0,e.useState)(!1),s=Io()(a,2),o=s[0],c=s[1],u=RE(),l=fL(r),p=ME((function(e){return e.getIn([pL,lL,cL,l],(0,i.Map)())})),d=p.getIn(["Respondent",0],(0,i.Map)()),f=Ce(d),m=mL(r,[aL,0]),g=mL(r,[oL,0]),E=dL(m),h=ME((function(e){return e.getIn([pL,lL,rL,l],(0,i.List)())})).get(0,(0,i.Map)()),S=fL(h),I=ME((function(e){return e.getIn(["referral","referralRequestNeighborMap",nL,S,0],(0,i.Map)())}));if(gL(I)&&!I.isEmpty()){var y=mL(I,[sL,0]);y&&(g=y)}var v=ME((function(e){return e.getIn([pL,"personNeighborMap",cL,l],"")})),x=ME((function(e){return e.getIn([pL,lL,iL,l],(0,i.Map)())})),N=ge()(n="Case #: ".concat(g," - ")).call(n,f);return(0,AE.jsxs)(AE.Fragment,{children:[(0,AE.jsx)(LE.Card,{onClick:function(){c(!0),u({type:rr,value:r})},children:(0,AE.jsxs)(EL,{padding:"20px 30px",children:[(0,AE.jsxs)("div",{children:[(0,AE.jsx)(hL,{variant:"subtitle2",children:E}),(0,AE.jsx)(SL,{variant:"body2",children:N})]}),(0,AE.jsx)(vb,{background:v,borderRadius:"31px",color:v,padding:"10px 16px",children:(0,AE.jsx)(LE.Typography,{color:"inherit",variant:"body2",children:v})})]})}),(0,AE.jsx)(tL,{caseEKID:l,caseIdentifier:N,caseRoleMap:p,dateAssignedToCaseMap:x,isVisible:o,onClose:function(){return c(!1)},personCase:r})]})};var yL=LE.Colors.NEUTRAL,vL=(VE().div.withConfig({displayName:"styled__Body",componentId:"sc-9t0ssp-0"})(["display:grid;grid-gap:36px;grid-auto-flow:row;"]),VE().div.withConfig({displayName:"styled__CenterWrapper",componentId:"sc-9t0ssp-1"})(["align-items:center;display:flex;height:100%;justify-content:center;"])),xL=VE().div.withConfig({displayName:"styled__SectionHeaderWithColor",componentId:"sc-9t0ssp-2"})(["color:",";margin:",";"],yL.N800,(function(e){return e.margin||"0"})),NL=Se.CRC_CASE,AL=g.DataUtils.getEntityKeyId;const TL=function(){var e=ME((function(e){return e.getIn(["profile","personNeighborMap",NL],(0,i.List)())}));return(0,AE.jsxs)("div",{children:[(0,AE.jsx)(xL,{margin:"0 0 24px",children:(0,AE.jsx)(LE.Typography,{color:"inherit",variant:"h3",children:"Case Participation"})}),(0,AE.jsx)(LE.CardStack,{children:Li()(e).call(e,(function(e){return(0,AE.jsx)(IL,{personCase:e},AL(e))}))})]})};var CL,DL,RL=Se.CONTACT_ACTIVITY,ML=ye.CONTACT_DATETIME,bL=ye.OUTCOME,LL=np.DataProcessingUtils.getEntityAddressKey,_L=np.DataProcessingUtils.getPageSectionKey,OL={type:"object",title:"",properties:d()({},_L(1,1),{type:"object",title:"",properties:(CL={},d()(CL,LL(0,RL,ML),{type:"string",title:"Date of Contact",format:"date",default:vo.DateTime.local().toISODate()}),d()(CL,LL(0,RL,bL),{type:"string",title:"Attendance",enum:["Attended","Did not attend"]}),CL),required:[LL(0,RL,ML),LL(0,RL,bL)]})},wL=d()({},_L(1,1),(DL={classNames:"column-span-12 grid-container"},d()(DL,LL(0,RL,ML),{classNames:"column-span-12"}),d()(DL,LL(0,RL,bL),{classNames:"column-span-12"}),DL)),UL=Se.CONTACT_ACTIVITY,jL=Se.PEOPLE,kL=Se.SENT_TO,PL=ye.CONTACT_DATETIME,FL=g.ReduxUtils.isPending,qL=g.ReduxUtils.isSuccess,GL=np.DataProcessingUtils.getEntityAddressKey,KL=np.DataProcessingUtils.getPageSectionKey,zL=np.DataProcessingUtils.processAssociationEntityData,BL=np.DataProcessingUtils.processEntityData,HL=g.DataUtils.getEntityKeyId;const VL=function(t){var n=t.isVisible,r=t.onClose,a=(0,e.useState)({}),s=Io()(a,2),o=s[0],c=s[1],u=ME((function(e){return e.getIn([b,Q])})),l=ME((function(e){return e.getIn([_,B])})),p=ME((function(e){return e.getIn([mr,"person"])})),d=HL(p),f=RE(),m=function(){var e=[KL(1,1),GL(0,UL,PL)],t=(0,i.getIn)(o,e),n=vo.DateTime.local(),r=(0,i.setIn)(o,e,vo.DateTime.fromSQL(ge()(t).call(t," ",n.toISOTime())).toISO()),a=BL(r,u,l),s=zL([[kL,0,UL,d,jL,{}]],u,l);f(Cn({associationEntityData:s,entityData:a}))},g=ME((function(e){return e.getIn([mr,Tn,q])}));(0,e.useEffect)((function(){qL(g)&&(f(Gt([Tn])),r())}),[f,r,g]);var E=(0,AE.jsx)(LE.ModalFooter,{isPendingPrimary:FL(g),onClickPrimary:m,onClickSecondary:r,textPrimary:"Submit",textSecondary:"Discard"});return(0,AE.jsxs)(LE.Modal,{isVisible:n,onClose:r,textTitle:"Add Contact Activity",viewportScrolling:!0,withFooter:E,children:[(0,AE.jsx)("div",{children:"Enter the date this person was contacted to appear in a circle and whether they attended a circle. "}),(0,AE.jsx)(np.Form,{formData:o,hideSubmit:!0,noPadding:!0,onChange:function(e){var t=e.formData;c(t)},onSubmit:m,schema:OL,uiSchema:wL})]})};var YL=Se.CONTACT_ACTIVITY,QL=ye.CONTACT_DATETIME,WL=ye.OUTCOME,JL=LE.Colors.NEUTRAL,ZL=g.DataUtils.getEntityKeyId,XL=g.DataUtils.getPropertyValue,$L=g.DateTimeUtils.formatAsDate,e_=VE().div.withConfig({displayName:"LastContacted__SectionWrapper",componentId:"sc-6b22ii-0"})(["margin-top:36px;"]),t_=VE().div.withConfig({displayName:"LastContacted__ContactGrid",componentId:"sc-6b22ii-1"})(["display:grid;grid-gap:24px 16px;grid-template-columns:repeat(auto-fit,minmax(98px,max-content));margin-bottom:36px;"]),n_=VE().div.withConfig({displayName:"LastContacted__HeaderRow",componentId:"sc-6b22ii-2"})(["align-items:center;display:flex;margin-bottom:24px;"]);const r_=function(){var t=(0,e.useState)(!1),n=Io()(t,2),r=n[0],a=n[1],s=ME((function(e){return e.getIn([mr,fr,YL],(0,i.List)())})).sortBy((function(e){return e.get(QL)}));return(0,AE.jsxs)(e_,{children:[(0,AE.jsxs)(n_,{children:[(0,AE.jsx)(xL,{margin:"0 14px 0 0",children:(0,AE.jsx)(LE.Typography,{color:"inherit",variant:"h3",children:"Last Contacted"})}),(0,AE.jsx)(LE.IconButton,{onClick:function(){return a(!0)},children:(0,AE.jsx)(yh.FontAwesomeIcon,{color:JL.N700,fixedWidth:!0,icon:GR.faPlus})})]}),(0,AE.jsx)(t_,{children:Li()(s).call(s,(function(e){var t=XL(e,[QL,0]),n=$L(t),r=XL(e,[WL,0]);return(0,AE.jsx)(vb,{background:r,borderRadius:"5px",color:r,padding:"8px",children:(0,AE.jsx)(LE.Typography,{color:"inherit",variant:"body2",children:n})},ZL(e))}))}),(0,AE.jsx)(VL,{isVisible:r,onClose:function(){return a(!1)}})]})};var a_=Se.FORM,s_=ye.NAME,i_=ye.ROLE,o_=g.LangUtils.isDefined,c_=g.DataUtils.getPropertyValue,u_=VE().div.withConfig({displayName:"ProfileBody__BodyWrapper",componentId:"j8kj3r-0"})(["padding:0 16px;.MuiTabPanel-root{padding:16px 0;}"]);const l_=function(){var e=ME((function(e){return e.getIn([mr,fr,i_],(0,i.Map)())})),t=Zi()(e).call(e,"Peacemaker"),n=ME((function(e){return e.getIn([mr,fr,a_],(0,i.List)())})),r=o_(xn()(n).call(n,(function(e){return"Peacemaker Information Form"===c_(e,[s_,0])})));return(0,AE.jsxs)(u_,{children:[(0,AE.jsx)(TL,{}),(t||r)&&(0,AE.jsx)(r_,{})]})};var p_,d_=LE.StyleUtils.media,f_=g.ReduxUtils.isPending,m_=g.ReduxUtils.isStandby,g_=VE().div.withConfig({displayName:"ProfileContainer__ProfileGrid",componentId:"sc-1brdbl-0"})(["display:grid;grid-gap:18px;grid-template-columns:auto 1fr;",""],d_.phone(p_||(p_=IR()(["\n    grid-template-columns: auto;\n  "]))));const E_=function(t){var n=t.personId,r=RE(),a=ME((function(e){return e.getIn(X.APP_CONFIG)}));(0,e.useEffect)((function(){a&&n&&r(Jn(n))}),[a,r,n]);var s=ME((function(e){return e.getIn(["profile",Wn,q])})),i=ME((function(e){return e.getIn(["profile","person"])})),o=Ce(i);return f_(s)||m_(s)?(0,AE.jsx)(vL,{children:(0,AE.jsx)(LE.Spinner,{size:"3x"})}):(0,AE.jsxs)("div",{children:[(0,AE.jsx)(Th,{children:(0,AE.jsx)(Eh,{children:(0,AE.jsx)(LE.Typography,{color:"inherit",variant:"body2",children:o})})}),(0,AE.jsxs)(g_,{children:[(0,AE.jsx)(qR,{}),(0,AE.jsx)(l_,{})]})]})};var h_=JSON.parse(pE()(Ay)),S_=JSON.parse(pE()(Ty)),I_=g.DataUtils.getEntityKeyId,y_=g.ReduxUtils.isPending,v_=g.ReduxUtils.isSuccess,x_=np.DataProcessingUtils.getEntityAddressKey,N_=np.DataProcessingUtils.getPageSectionKey,A_=np.DataProcessingUtils.processAssociationEntityData,T_=np.DataProcessingUtils.processEntityData,C_=Ee.Constants.OPENLATTICE_ID_FQN,D_=M,R_=Se.AGENCY,M_=Se.APPEARS_IN,b_=Se.CHARGES,L_=Se.CRC_CASE,__=Se.DA_CASE,O_=Se.FORM,w_=Se.HAS,U_=Se.ORGANIZATIONS,j_=Se.PEOPLE,k_=Se.RECORDED_BY,P_=Se.REFERRAL_REQUEST,F_=Se.REGISTERED_FOR,q_=Se.RELATED_TO,G_=Se.RESULTS_IN,K_=Se.SCREENED_WITH,z_=Se.SENT_FROM,B_=Se.STAFF,H_=Se.STATUS,V_=Se.SUBJECT_OF,Y_=ye.DATETIME_COMPLETED,Q_=ye.DATETIME_RECEIVED,W_=ye.EFFECTIVE_DATE,J_=ye.GENERAL_DATETIME,Z_=ye.GIVEN_NAME,X_=ye.NAME,$_=ye.ORGANIZATION_NAME,eO=ye.ROLE,tO=ye.SURNAME;const nO=function(t){var n=t.personId,r=RE(),a=ME((function(e){return e.getIn(X.APP_CONFIG)}));(0,e.useEffect)((function(){a&&(r(Qe()),r(Xe()),r(Je()),r(et()))}),[a,r,n]);var s=S_,o=ME((function(e){return e.getIn([D_,"crcPeople"],(0,i.List)())})),c=sp(h_,o,[Z_,tO],["properties",N_(1,2),"properties",x_(0,j_,C_),"items"]),u=ME((function(e){return e.getIn(["profile","staffMembers"])}));c=sp(c,u,[Z_,tO],["properties",N_(1,6),"properties",x_(0,B_,C_)]);var l=ME((function(e){return e.getIn([D_,"crcOrganizations"])}));l.isEmpty()?(c=(0,i.removeIn)(c,["properties",N_(1,4)]),s=(0,i.remove)(s,N_(1,4))):c=sp(c,l,[$_],["properties",N_(1,4),"properties",x_(0,U_,C_),"items"]);var p=ME((function(e){return e.getIn([D_,R],(0,i.List)())}));c=sp(c,p,[X_],["properties",N_(1,1),"properties",x_(0,b_,X_)]);var f=ME((function(e){return e.getIn([D_,"agencies"],(0,i.List)())}));f.isEmpty()&&(f=f.push((0,i.Map)().set(X_,(0,i.List)([""])))),c=sp(c,f,[X_],["properties",N_(1,1),"properties",x_(0,R_,X_)]);var m=ME((function(e){return e.getIn([b,Q])})),g=ME((function(e){return e.getIn([_,B])})),E=ME((function(e){return e.getIn(["profile","person"])})),h=I_(E),S=Ce(E),I=ME((function(e){return e.getIn([D_,at,q])})),y=v_(I),v=(0,e.useCallback)((function(){r(Gt([at]))}),[r]);(0,e.useEffect)((function(){return v}),[v]);var x=ME((function(e){return e.getIn(X.ROOT)})),N=ME((function(e){return e.getIn(X.MATCH)})),A=Rh(x,N);return(0,AE.jsxs)(AE.Fragment,{children:[(0,AE.jsxs)(LE.CardSegment,{children:[(0,AE.jsxs)(Th,{children:[(0,AE.jsx)(Sh,{to:A,children:(0,AE.jsx)(LE.Typography,{color:"inherit",variant:"body2",children:S})}),(0,AE.jsx)(Eh,{children:(0,AE.jsx)(LE.Typography,{color:"inherit",variant:"body2",children:"Referral Information"})})]}),(0,AE.jsx)(LE.Typography,{variant:"h1",children:"Referral Information"}),(0,AE.jsx)(LE.Typography,{children:"Enter the respondent and victim information below to add a new referral for this person."})]}),(0,AE.jsx)(np.Form,{hideSubmit:y,isSubmitting:y_(I),onSubmit:function(e){var t=e.formData,n=[N_(1,1),x_(0,P_,Y_)],a=[N_(1,1),x_(0,__,J_)],s=op(t,n),o=function(e,t){var n=e,r=Li()(t).call(t,(function(e){return Pv(e)})),a=[Uv(1,1),wv(0,dv,bv)],s=(0,i.getIn)(n,a),o="";return kv(s)?Fv(s)&&Zi()(r).call(r,s)&&(n=(0,i.removeIn)(n,a),o=s):n=(0,i.removeIn)(n,a),{selectedAgencyEKID:o,updatedFormData:n}}(s=op(s,a),f),c=o.selectedAgencyEKID;s=o.updatedFormData;var u=c.length?c:0,l=function(e,t){var n=e,r=Li()(t).call(t,(function(e){return Pv(e)})),a=Uv(1,1),s=[a,wv(0,mv,bv)],o=[a,wv(0,gv,Rv)],c=[a,wv(0,hv,Mv)],u=(0,i.getIn)(n,s),l="";if(kv(u)){Fv(u)&&Zi()(r).call(r,u)&&(n=(0,i.removeIn)(n,s),l=u);var p=(0,i.getIn)(n,o);n=kv(p)?op(n,o):(0,i.setIn)(n,o,(0,i.getIn)(n,c))}else n=(0,i.removeIn)(n,s),n=(0,i.removeIn)(n,o);return{selectedChargeEKID:l,updatedFormData:n}}(s,p),E=l.selectedChargeEKID;s=function(e){var t=(0,i.getIn)(e,[Uv(1,1),wv(0,hv,Dv)]);return(0,i.setIn)(e,[Uv(1,1),wv(0,Ev,Lv)],t)}(s=l.updatedFormData);var S=(0,i.getIn)(s,n);s=(0,i.setIn)(s,[N_(1,7),x_(0,H_,W_)],S);var I=function(e){var t=[],n=[],r=(0,i.getIn)(e,[Uv(1,2),wv(0,vv,pv)]);kv(r)&&r.length&&(t=r);var a=(0,i.remove)(e,Uv(1,2)),s=(0,i.getIn)(e,[Uv(1,4),wv(0,yv,pv)]);return kv(s)&&s.length&&(n=s),{existingVictimEKIDs:t,existingVictimOrgEKIDs:n,formDataWithoutVictimsArray:a=(0,i.remove)(a,Uv(1,4))}}(s=(0,i.setIn)(s,[N_(1,7),x_(0,L_,Q_)],S)),y=I.existingVictimEKIDs,v=I.existingVictimOrgEKIDs,x=function(e){var t="",n=(0,i.getIn)(e,[Uv(1,6),wv(0,Cv,pv)]);return kv(n)&&n.length&&(t=n),{formDataWithoutStaff:(0,i.remove)(e,Uv(1,6)),selectedStaffEKID:t}}(I.formDataWithoutVictimsArray),N=x.selectedStaffEKID,A=x.formDataWithoutStaff,T=T_(A,m,g),C=[[M_,h,j_,0,L_,d()({},eO,["Respondent"])],[q_,0,__,0,L_,{}],[M_,0,__,0,P_,{}],[G_,0,P_,0,L_,{}],[V_,h,j_,0,P_,{}],[F_,0,H_,0,P_,{}],[z_,0,P_,u,R_,{}],[K_,h,j_,0,O_,{}],[q_,0,O_,0,P_,{}],[q_,0,O_,0,L_,{}],[k_,0,O_,N,B_,{}],[k_,0,H_,N,B_,{}],[w_,h,j_,0,H_,{}],[w_,0,L_,0,H_,{}]];C=ge()(C).call(C,function(e,t,n){var r=[];ls()(t).call(t,(function(e){r.push([fv,e,vv,0,Ev,d()({},_v,[Ov])])}));var a=(0,i.get)(e,Uv(1,3));kv(a)&&ls()(a).call(a,(function(e,t){r.push([fv,t,vv,0,Ev,d()({},_v,[Ov])]),r.push([Sv,t,vv,0,xv])})),ls()(n).call(n,(function(e){r.push([fv,e,yv,0,Ev,d()({},_v,[Ov])])}));var s=(0,i.get)(e,Uv(1,5));return kv(s)&&ls()(s).call(s,(function(e,t){r.push([fv,t,yv,0,Ev,d()({},_v,[Ov])])})),r}(A,y,v)),C=ge()(C).call(C,function(e,t){var n=[],r=(0,i.get)(e,Uv(1,1)),a=ai()(r),s=xn()(a).call(a,(function(e){return jv(e).entitySetName===Iv.toString()}));kv(s)&&n.push([Tv,0,Nv,0,Iv,{}]);var o=xn()(a).call(a,(function(e){return jv(e).entitySetName===gv.toString()})),c=xn()(a).call(a,(function(e){return jv(e).entitySetName===mv.toString()}));if(kv(o)){n.push([fv,0,gv,0,hv,{}]),n.push([fv,0,gv,0,Ev,{}]);var u=kv(c)?0:t;n.push([fv,u,mv,0,hv,{}]),n.push([fv,u,mv,0,Ev,{}]),n.push([Av,0,gv,u,mv,{}])}return n}(A,E));var D=A_(C,m,g);r(st({associationEntityData:D,entityData:T}))},schema:c,uiSchema:s}),y&&(0,AE.jsx)(LE.CardSegment,{children:(0,AE.jsxs)(CC,{children:[(0,AE.jsx)(LE.Typography,{children:"Submitted!"}),(0,AE.jsx)(LE.Button,{arialabelledby:"referral backToProfile",color:"success",onClick:function(){r(iE(A))},variant:"outlined",children:"Back to Profile"})]})})]})};var rO=JSON.parse(pE()(lx)),aO=JSON.parse(pE()(px)),sO=g.DataUtils.getEntityKeyId,iO=g.DataUtils.getPropertyValue,oO=g.ReduxUtils.isPending,cO=g.ReduxUtils.isSuccess,uO=np.DataProcessingUtils.getEntityAddressKey,lO=np.DataProcessingUtils.getPageSectionKey,pO=np.DataProcessingUtils.processAssociationEntityData,dO=np.DataProcessingUtils.processEntityData,fO=Ee.Constants.OPENLATTICE_ID_FQN,mO=x,gO=A,EO=Se.CRC_CASE,hO=Se.FORM,SO=Se.PEOPLE,IO=Se.RECORDED_BY,yO=Se.REFERRAL_REQUEST,vO=Se.RELATED_TO,xO=Se.SCREENED_WITH,NO=Se.STAFF,AO=ye.DATETIME_ADMINISTERED,TO=ye.DUE_DATE,CO=ye.GIVEN_NAME,DO=ye.MIDDLE_NAME,RO=ye.NOTES,MO=ye.ROLE,bO=ye.SURNAME;const LO=function(){var t=ME((function(e){return e.getIn([gO,mO,yO],(0,i.Map)())})),n=ME((function(e){return e.getIn(["referral","referralRequestNeighborMap"],(0,i.Map)())})),r=mp(ME((function(e){return e.getIn([gO,"personNeighborMap",EO],(0,i.List)())})),ME((function(e){return e.getIn([gO,mO,MO],(0,i.Map)())})),t,n),a=sp(rO,r,[RO,bO],["properties",lO(1,2),"properties",uO(0,EO,fO)]),s=ME((function(e){return e.getIn([gO,"staffMembers"])}));a=sp(a,s,[CO,bO],["properties",lO(1,2),"properties",uO(0,NO,fO)]);var o=ME((function(e){return e.getIn(["profile","person"])})),c=(0,e.useState)({}),u=Io()(c,2),l=u[0],p=u[1];(0,e.useEffect)((function(){var e,t=iO(o,[CO,0],Nt),n=iO(o,[DO,0],Nt),r=iO(o,[bO,0],Nt),a=d()({},lO(1,1),(e={},d()(e,uO(0,SO,CO),t),d()(e,uO(0,SO,DO),n),d()(e,uO(0,SO,bO),r),e));p(a)}),[o]);var f=ME((function(e){return e.getIn([b,Q])})),m=ME((function(e){return e.getIn([_,B])})),g=sO(o),E=RE(),h=ME((function(e){return e.getIn(["repairHarm",ot,q])})),S=cO(h),I=(0,e.useCallback)((function(){E(Gt([ot]))}),[E]);(0,e.useEffect)((function(){return I}),[I]);var y=Ce(o),v=ME((function(e){return e.getIn(X.ROOT)})),x=ME((function(e){return e.getIn(X.MATCH)})),N=Rh(v,x);return(0,AE.jsxs)(AE.Fragment,{children:[(0,AE.jsxs)(LE.CardSegment,{children:[(0,AE.jsxs)(Th,{children:[(0,AE.jsx)(Sh,{to:N,children:(0,AE.jsx)(LE.Typography,{color:"inherit",variant:"body2",children:y})}),(0,AE.jsx)(Eh,{children:(0,AE.jsx)(LE.Typography,{color:"inherit",variant:"body2",children:"Repair Harm Agreement"})})]}),(0,AE.jsx)(LE.Typography,{variant:"h1",children:"Repair Harm Agreement"}),(0,AE.jsx)(LE.Typography,{children:"Fill out the repair harm agreement below for this case."})]}),(0,AE.jsx)(np.Form,{hideSubmit:S,isSubmitting:oO(h),formData:l,onChange:function(e){var t=e.formData;p(t)},onSubmit:function(){var e=lO(1,2),t=d()({},e,(0,i.get)(l,e)),n=[e,uO(0,NO,fO)],r=(0,i.getIn)(t,n);t=(0,i.removeIn)(t,n);var a=[e,uO(0,EO,fO)],s=(0,i.getIn)(t,a);t=(0,i.removeIn)(t,a),t=op(t,[e,uO(0,hO,TO)]),t=op(t,[e,uO(0,hO,AO)]);var o=dO(t,f,m),c=pO([[xO,g,SO,0,hO,{}],[vO,0,hO,s,EO,{}],[IO,0,hO,r,NO,{}]],f,m);E(ct({associationEntityData:c,entityData:o}))},schema:a,uiSchema:aO}),S&&(0,AE.jsx)(LE.CardSegment,{children:(0,AE.jsxs)(CC,{children:[(0,AE.jsx)(LE.Typography,{gutterBottom:!0,children:"Submitted!"}),(0,AE.jsx)(LE.Button,{arialabelledby:"repairHarmAgreement backToProfile",color:"success",onClick:function(){E(iE(N))},variant:"outlined",children:"Back to Profile"})]})})]})};var _O=JSON.parse(pE()(uN)),OO=JSON.parse(pE()(lN)),wO=g.DataUtils.getEntityKeyId,UO=g.DataUtils.getPropertyValue,jO=g.ReduxUtils.isPending,kO=g.ReduxUtils.isSuccess,PO=np.DataProcessingUtils.getEntityAddressKey,FO=np.DataProcessingUtils.getPageSectionKey,qO=np.DataProcessingUtils.processAssociationEntityData,GO=np.DataProcessingUtils.processEntityData,KO=Ee.Constants.OPENLATTICE_ID_FQN,zO=x,BO=A,HO=Se.CRC_CASE,VO=Se.FORM,YO=Se.PEOPLE,QO=Se.RECORDED_BY,WO=Se.REFERRAL_REQUEST,JO=Se.RELATED_TO,ZO=Se.SCREENED_WITH,XO=Se.STAFF,$O=Se.SUBJECT_OF,ew=ye.DUE_DATE,tw=ye.GENERAL_DATETIME,nw=ye.GIVEN_NAME,rw=ye.MIDDLE_NAME,aw=ye.NOTES,sw=ye.ORGANIZATION_NAME,iw=ye.ROLE,ow=ye.SURNAME;const cw=function(){var t,n=ME((function(e){return e.getIn([BO,zO,WO],(0,i.Map)())})),r=ME((function(e){return e.getIn(["referral","referralRequestNeighborMap"],(0,i.Map)())})),a=ME((function(e){return e.getIn([BO,"personNeighborMap",HO],(0,i.List)())})),s=ME((function(e){return e.getIn([BO,zO,iw],(0,i.Map)())})),o=mp(a,s,n,r),c=sp(_O,o,[aw,ow],["properties",FO(1,2),"properties",PO(0,HO,KO)]),u=ME((function(e){return e.getIn([BO,"staffMembers"])}));c=sp(c,u,[nw,ow],["properties",FO(1,2),"properties",PO(0,XO,KO)]);var l=Li()(t=s.valueSeq().toList()).call(t,(function(e){return e.get("Victim",(0,i.List)())})).flatten(1),p=Wi()(l).call(l,(function(e){return!e.has(sw)})),f=Wi()(l).call(l,(function(e){return e.has(sw)})),m=["properties",FO(1,3),"properties",PO(1,YO,KO)];c=sp(c,p,[nw,ow],m);var g=[],E=[];ls()(f).call(f,(function(e){E.push(UO(e,[sw,0])),g.push(wO(e))})),c=(0,i.updateIn)(c,ge()(m).call(m,["enum"]),(function(e){return ge()(e).call(e,g)})),c=(0,i.updateIn)(c,ge()(m).call(m,["enumNames"]),(function(e){return ge()(e).call(e,E)}));var h=ME((function(e){return e.getIn(["profile","person"])})),S=(0,e.useMemo)((function(){var e,t=UO(h,[nw,0],Nt),n=UO(h,[rw,0],Nt),r=UO(h,[ow,0],Nt);return d()({},FO(1,1),(e={},d()(e,PO(0,YO,nw),t),d()(e,PO(0,YO,rw),n),d()(e,PO(0,YO,ow),r),e))}),[h]),I=(0,e.useState)({}),y=Io()(I,2),v=y[0],x=y[1];(0,e.useEffect)((function(){x(S)}),[S]);var N=ME((function(e){return e.getIn([b,Q])})),A=ME((function(e){return e.getIn([_,B])})),T=wO(h),C=RE(),D=ME((function(e){return e.getIn(["restitutionReferral",lt,q])})),R=kO(D),M=(0,e.useCallback)((function(){C(Gt([lt]))}),[C]);(0,e.useEffect)((function(){return M}),[M]);var L=Ce(h),O=ME((function(e){return e.getIn(X.ROOT)})),w=ME((function(e){return e.getIn(X.MATCH)})),U=Rh(O,w);return(0,AE.jsxs)(AE.Fragment,{children:[(0,AE.jsxs)(LE.CardSegment,{children:[(0,AE.jsxs)(Th,{children:[(0,AE.jsx)(Sh,{to:U,children:(0,AE.jsx)(LE.Typography,{color:"inherit",variant:"body2",children:L})}),(0,AE.jsx)(Eh,{children:(0,AE.jsx)(LE.Typography,{color:"inherit",variant:"body2",children:"Restitution Referral"})})]}),(0,AE.jsx)(LE.Typography,{variant:"h1",children:"Restitution Referral"}),(0,AE.jsx)(LE.Typography,{children:"Enter the information below to create a new restitution referral."})]}),(0,AE.jsx)(np.Form,{hideSubmit:R,isSubmitting:jO(D),formData:v,onChange:function(e){var t=e.formData;x(t)},onSubmit:function(){var e=FO(1,2),t=d()({},e,(0,i.get)(v,e)),n=[e,PO(0,XO,KO)],r=(0,i.getIn)(t,n);t=(0,i.removeIn)(t,n);var a=[e,PO(0,HO,KO)],s=(0,i.getIn)(t,a);t=(0,i.removeIn)(t,a),t=op(t,[FO(1,2),PO(0,VO,tw)]);var o=(0,i.getIn)(v,[FO(1,3),PO(1,YO,KO)]);t=(0,i.remove)(t,FO(1,3)),t=op(t,[e,PO(0,VO,ew)]);var c=GO(t,N,A),u=qO([[ZO,T,YO,0,VO,{}],[JO,0,VO,s,HO,{}],[QO,0,VO,r,XO,{}],[$O,o,YO,0,VO,{}]],N,A);C(pt({associationEntityData:u,entityData:c}))},schema:c,uiSchema:OO}),R&&(0,AE.jsx)(LE.CardSegment,{children:(0,AE.jsxs)(CC,{children:[(0,AE.jsx)(LE.Typography,{gutterBottom:!0,children:"Submitted!"}),(0,AE.jsx)(LE.Button,{arialabelledby:"restitutionReferral backToProfile",color:"success",onClick:function(){C(iE(U))},variant:"outlined",children:"Back to Profile"})]})})]})};var uw=g.ReduxUtils.isPending;const lw=function(t){var n,r,a,s,i,o,c,u,l,p,d,f=t.match,m=t.organizationId,g=t.personId,E=t.root,h=RE();(0,e.useEffect)((function(){h(ee({match:f,organizationId:m,root:E}))}),[h,m,E]);var S=ME((function(e){return e.getIn([b,$,q])}));return uw(S)?(0,AE.jsx)(vL,{children:(0,AE.jsx)(LE.Spinner,{size:"3x"})}):(0,AE.jsxs)(_E.Switch,{children:[(0,AE.jsx)(_E.Route,{path:ge()(n="".concat(E,"/")).call(n,Vg),render:function(){return(0,AE.jsx)(nS,{})}}),(0,AE.jsx)(_E.Route,{path:ge()(r="".concat(E,"/")).call(r,Wg),render:function(){return(0,AE.jsx)(UI,{})}}),(0,AE.jsx)(_E.Route,{path:ge()(a="".concat(E,"/")).call(a,Qg),render:function(){return(0,AE.jsx)(iD,{personId:g})}}),(0,AE.jsx)(_E.Route,{path:ge()(s="".concat(E,"/")).call(s,nE),render:function(){return(0,AE.jsx)(pA,{})}}),(0,AE.jsx)(_E.Route,{path:ge()(i="".concat(E,"/")).call(i,tE),render:function(){return(0,AE.jsx)(cw,{personId:g})}}),(0,AE.jsx)(_E.Route,{path:ge()(o="".concat(E,"/")).call(o,eE),render:function(){return(0,AE.jsx)(Px,{})}}),(0,AE.jsx)(_E.Route,{path:ge()(c="".concat(E,"/")).call(c,$g),render:function(){return(0,AE.jsx)(LO,{personId:g})}}),(0,AE.jsx)(_E.Route,{path:ge()(u="".concat(E,"/")).call(u,Xg),render:function(){return(0,AE.jsx)(Gv,{})}}),(0,AE.jsx)(_E.Route,{path:ge()(l="".concat(E,"/")).call(l,Zg),render:function(){return(0,AE.jsx)(nO,{personId:g})}}),(0,AE.jsx)(_E.Route,{path:ge()(p="".concat(E,"/")).call(p,Jg),render:function(){return(0,AE.jsx)(hR,{personId:g})}}),(0,AE.jsx)(_E.Route,{path:ge()(d="".concat(E)).call(d,Hg),render:function(){return(0,AE.jsx)(EC,{personId:g})}}),(0,AE.jsx)(_E.Route,{render:function(){return(0,AE.jsx)(E_,{personId:g})}})]})};const pw=function(e){var t=e.match,n=e.organizationId,r=e.personId,a=e.root;return(0,AE.jsx)(bE,{children:(0,AE.jsx)(lw,{match:t,organizationId:n,personId:r,root:a})})};var dw,fw,mw=np.DataProcessingUtils.getEntityAddressKey,gw=np.DataProcessingUtils.getPageSectionKey,Ew=Se.STAFF,hw=ye.GIVEN_NAME,Sw=ye.SURNAME,Iw={type:"object",title:"",properties:d()({},gw(1,1),{type:"array",title:"",items:{type:"object",properties:(dw={},d()(dw,mw(-1,Ew,hw),{type:"string",title:"First Name"}),d()(dw,mw(-1,Ew,Sw),{type:"string",title:"Last Name"}),dw)}})},yw=d()({},gw(1,1),{classNames:"column-span-12","ui:options":{addActionKey:"addStaff",addButtonText:"+ Add New Staff Member",editable:!0,orderable:!1,removable:!1},items:(fw={classNames:"grid-container"},d()(fw,mw(-1,Ew,hw),{classNames:"column-span-4"}),d()(fw,mw(-1,Ew,Sw),{classNames:"column-span-4"}),fw)}),vw=Se.STAFF,xw=ye.GIVEN_NAME,Nw=ye.SURNAME,Aw=Q,Tw=g.DataUtils.getPropertyValue,Cw=np.DataProcessingUtils.getEntityAddressKey,Dw=np.DataProcessingUtils.getPageSectionKey,Rw=np.DataProcessingUtils.processEntityData;const Mw=function(t){var n=t.isVisible,r=t.onClose,a=t.staffMembers,s=(0,e.useState)({}),o=Io()(s,2),c=o[0],u=o[1];(0,e.useEffect)((function(){var e=d()({},Dw(1,1),Li()(a).call(a,(function(e){var t,n=Tw(e,[xw,0]),r=Tw(e,[Nw,0]);return t={},d()(t,Cw(-1,vw,xw),n),d()(t,Cw(-1,vw,Nw),r),t})).toJS());u(e)}),[a]);var l=ME((function(e){return e.getIn([b,Aw])})),p=ME((function(e){return e.getIn([_,B])})),f=RE(),m=function(e){var t=e.formData[Dw(1,1)],n=t[t.length-1],r=Rw(d()({},Dw(1,1),[n]),l,p);f(Re({associationEntityData:{},entityData:r}))},g={addActions:{addStaff:m},entityIndexToIdMap:(0,i.Map)(),entitySetIds:l,propertyTypeIds:p};return(0,AE.jsx)(LE.Modal,{isVisible:n,onClickSecondary:r,onClose:r,textSecondary:"Close",textTitle:"Add Staff Members",viewportScrolling:!0,children:(0,AE.jsx)(np.Form,{disabled:!a.isEmpty(),formContext:g,formData:c,hideSubmit:!0,noPadding:!0,onChange:function(e){var t=e.formData;u(t)},onSubmit:m,schema:Iw,uiSchema:yw})})};var bw=I,Lw=yt,_w=g.ReduxUtils.isFailure,Ow=g.ReduxUtils.isPending,ww=g.ReduxUtils.isSuccess,Uw=g.LangUtils.isDefined,jw="No Case Manager",kw=VE().div.withConfig({displayName:"SearchCases__SearchGrid",componentId:"sc-1276zpd-0"})(["display:grid;grid-gap:20px;grid-template-columns:2fr 1fr;width:100%;span:last-child{display:flex;flex-direction:column;justify-content:flex-end;}"]);const Pw=function(){var t=RE();(0,e.useEffect)((function(){t(Qn())}),[t]);var n=(0,e.useState)(""),r=Io()(n,2),a=r[0],s=r[1],i=(0,e.useState)(1),o=Io()(i,2),c=o[0],u=o[1],l=(0,e.useState)([]),p=Io()(l,2),d=p[0],f=p[1],m=function(e,n){t(we({caseNumberInput:a,maxHits:10,start:n||0}))},g=ME((function(e){return e.getIn([bw,"searchedCasesData"])})),E=ME((function(e){return e.getIn([bw,"totalCasesHits"])})),h=ME((function(e){return e.getIn([bw,Oe,q])})),S=ww(h)||_w(h),I=ME((function(e){return e.getIn(["profile","staffMembers"])})),y=Li()(I).call(I,(function(e){var t=Ce(e);return{label:t,value:t}})).push({label:jw,value:jw}).toJS();Uw(d)&&d.length&&(g=Wi()(g).call(g,(function(e){var t=Li()(d).call(d,(function(e){return e.value}));return Zi()(t).call(t,e.get(Lw))||Zi()(t).call(t,jw)&&e.get(Lw)===Nt})));return(0,AE.jsxs)(AE.Fragment,{children:[(0,AE.jsxs)(kw,{children:[(0,AE.jsxs)("span",{children:[(0,AE.jsx)(LE.Label,{children:"Case Number"}),(0,AE.jsx)(LE.Input,{name:"caseNumber",onChange:function(e){s(e.currentTarget.value)}})]}),(0,AE.jsx)("span",{children:(0,AE.jsx)(LE.Button,{arialabelledby:"searchPeople",color:"primary",isLoading:!1,onClick:m,children:"Search"})})]}),S&&(0,AE.jsxs)(AE.Fragment,{children:[(0,AE.jsx)(LE.Label,{children:"Filter by Staff Member"}),(0,AE.jsx)(LE.CheckboxSelect,{onChange:f,options:y})]}),S&&!g.isEmpty()&&(0,AE.jsx)(LE.PaginationToolbar,{count:E,onPageChange:function(e){var t=e.page,n=e.start;m(0,n),u(t)},page:c,rowsPerPage:10}),(0,AE.jsx)(LE.SearchResults,{hasSearched:S,isLoading:Ow(h),onResultClick:function(e){var n=e.get("respondentEKID");t(iE("/profile/".concat(n)))},resultLabels:wt,results:g})]})};var Fw=LE.Colors.NEUTRAL;var qw,Gw,Kw=g.ReduxUtils.isPending,zw=I,Bw=Dt,Hw=Rt,Vw=Mt,Yw=bt,Qw=Lt,Ww=_t,Jw=(qw=Ct.valueSeq().toList(),Gw=[],ls()(qw).call(qw,(function(e){Gw.push({cellStyle:{backgroundColor:"white",color:Fw.N900,fontSize:"11px",fontWeight:"600",padding:"15px",textAlign:"left"},key:e,label:e,sortable:e&&" "!==e||!1})})),Gw),Zw="Stats",Xw="Search Cases",$w=VE().div.withConfig({displayName:"Dashboard__StatsGridRow",componentId:"sc-1v0ksfa-0"})(["display:grid;grid-gap:10px 20px;grid-template-columns:repeat(3,1fr);margin-bottom:30px;width:100%;"]),eU=VE()(LE.CardHeader).withConfig({displayName:"Dashboard__TableHeader",componentId:"sc-1v0ksfa-1"})(["border:none;font-size:20px;font-weight:600;"]),tU=VE().div.withConfig({displayName:"Dashboard__ButtonWrapper",componentId:"sc-1v0ksfa-2"})(["display:flex;"]),nU=VE().div.withConfig({displayName:"Dashboard__ButtonGroupWrapper",componentId:"sc-1v0ksfa-3"})(["margin-bottom:20px;"]);const rU=function(t){var n=t.match,r=t.organizationId,a=t.root,s=(0,e.useState)(!1),i=Io()(s,2),o=i[0],c=i[1],u=(0,e.useState)(Zw),l=Io()(u,2),p=l[0],d=l[1],f=RE();(0,e.useEffect)((function(){f(ee({match:n,organizationId:r,root:a}))}),[f,r,a]);var m=ME((function(e){return e.getIn(X.APP_CONFIG)}));(0,e.useEffect)((function(){m&&(f(_e()),f(be()),f(Qn()))}),[m,f]);var g=ME((function(e){return e.getIn([zw,"casesStats"])})),E=ME((function(e){return e.getIn([zw,"staffCasesData"])})),h=ME((function(e){return e.getIn([zw,Le,q])})),S=ME((function(e){return e.getIn(["profile","staffMembers"])}));return(0,AE.jsxs)(AE.Fragment,{children:[(0,AE.jsx)(nU,{children:(0,AE.jsxs)(LE.ButtonGroup,{size:"medium",children:[(0,AE.jsx)(LE.Button,{color:p===Zw?"primary":"default",onClick:function(){return d(Zw)},selected:p===Zw,children:Zw}),(0,AE.jsx)(LE.Button,{color:p===Xw?"primary":"default",onClick:function(){return d(Xw)},children:Xw})]})}),p===Zw&&(0,AE.jsxs)(AE.Fragment,{children:[(0,AE.jsxs)($w,{children:[(0,AE.jsx)(LE.Card,{children:(0,AE.jsxs)(LE.CardSegment,{children:[(0,AE.jsx)(LE.Typography,{variant:"h3",children:Ww}),(0,AE.jsx)(LE.Typography,{variant:"h1",children:g.get(Ww,0)})]})}),(0,AE.jsx)(LE.Card,{children:(0,AE.jsxs)(LE.CardSegment,{children:[(0,AE.jsx)(LE.Typography,{variant:"h3",children:Hw}),(0,AE.jsx)(LE.Typography,{variant:"h1",children:g.get(Hw,0)})]})}),(0,AE.jsx)(LE.Card,{children:(0,AE.jsxs)(LE.CardSegment,{children:[(0,AE.jsx)(LE.Typography,{variant:"h3",children:Yw}),(0,AE.jsx)(LE.Typography,{variant:"h1",children:g.get(Yw,0)})]})})]}),(0,AE.jsxs)($w,{children:[(0,AE.jsx)(LE.Card,{children:(0,AE.jsxs)(LE.CardSegment,{children:[(0,AE.jsx)(LE.Typography,{variant:"h3",children:Qw}),(0,AE.jsx)(LE.Typography,{variant:"h1",children:g.get(Qw,0)})]})}),(0,AE.jsx)(LE.Card,{children:(0,AE.jsxs)(LE.CardSegment,{children:[(0,AE.jsx)(LE.Typography,{variant:"h3",children:Vw}),(0,AE.jsx)(LE.Typography,{variant:"h1",children:g.get(Vw,0)})]})}),(0,AE.jsx)(LE.Card,{children:(0,AE.jsxs)(LE.CardSegment,{children:[(0,AE.jsx)(LE.Typography,{variant:"h3",children:Bw}),(0,AE.jsx)(LE.Typography,{variant:"h1",children:g.get(Bw,0)})]})})]}),(0,AE.jsxs)(LE.Card,{children:[(0,AE.jsx)(eU,{children:"Staff Cases"}),(0,AE.jsx)(LE.CardSegment,{padding:"0",children:(0,AE.jsx)(LE.Table,{data:E.toJS(),headers:Jw,isLoading:Kw(h)})})]}),(0,AE.jsx)(tU,{children:(0,AE.jsx)(LE.Button,{onClick:function(){return c(!0)},variant:"text",mode:"primary",children:"+Add Staff Member"})})]}),p===Xw&&(0,AE.jsx)(Pw,{}),(0,AE.jsx)(Mw,{isVisible:o,onClose:function(){return c(!1)},staffMembers:S})]})};const aU=function(e){var t=e.match,n=e.organizationId,r=e.root;return(0,AE.jsx)(bE,{children:(0,AE.jsx)(rU,{match:t,organizationId:n,root:r})})},sU=require("@fortawesome/pro-light-svg-icons/faDownload");var iU=g.ReduxUtils.isSuccess,oU=je,cU=Pe,uU=Fe,lU=[{label:"".concat(uU," completed"),value:uU},{label:"".concat(cU," completed"),value:cU},{label:"Accepted",value:"Acceptance"},{label:"".concat(oU," completed"),value:oU}];const pU=function(t){var n=t.isVisible,r=t.onClose,a=t.staff,s=(0,e.useState)(""),i=Io()(s,2),o=i[0],c=i[1],u=(0,e.useState)(""),l=Io()(u,2),p=l[0],f=l[1],m=(0,e.useState)(!1),g=Io()(m,2),h=g[0],S=g[1],I=(0,e.useState)(!1),y=Io()(I,2),v=y[0],x=y[1],N=Li()(a).call(a,(function(e){var t=Ce(e);return{label:t,value:t}})),A=RE(),T=ME((function(e){return e.getIn(["downloads",Wt,q])}));return(0,e.useEffect)((function(){iU(T)&&(c(""),S(!1),x(!1),A(Gt([Wt])),r())}),[T,A,r]),(0,AE.jsxs)(LE.ActionModal,{isVisible:n,onClickPrimary:function(){A(Jt({hasClosedCases:v,hasOpenCases:h,selectedStaffMember:o,selectedStatus:p}))},onClickSecondary:r,onClose:r,requestState:T,requestStateComponents:d()({},E.RequestStates.STANDBY,(0,AE.jsx)(AE.Fragment,{})),textPrimary:"Download",textSecondary:"Close",textTitle:"Download Cases",viewportScrolling:!0,children:[(0,AE.jsx)(LE.Label,{children:"Include:"}),(0,AE.jsx)(LE.Checkbox,{label:"Open Cases",onChange:function(){return S(!h)}}),(0,AE.jsx)(LE.Checkbox,{label:"Closed Cases",onChange:function(){return x(!v)}}),(0,AE.jsx)(LE.Label,{children:"Alternatively, select a status to show cases for which that status is the most recent."}),(0,AE.jsx)(LE.Label,{children:"(Do not check the open or closed boxes above.)"}),(0,AE.jsx)(LE.Select,{onChange:function(e){return f(e.value)},options:lU}),(0,AE.jsx)(LE.Label,{children:"Optional: Choose a staff member to select only their cases."}),(0,AE.jsx)(LE.Select,{onChange:function(e){return c(e.value)},options:N})]})};var dU=VE().div.withConfig({displayName:"styled__DatePickerGrid",componentId:"sc-9rhja7-0"})(["display:grid;grid-template-columns:1fr 1fr;grid-gap:0 10px;width:100%;"]),fU=g.ReduxUtils.isSuccess;const mU=function(t){var n,r=t.isVisible,a=t.onClose,s=(0,e.useState)(""),i=Io()(s,2),o=i[0],c=i[1],u=(0,e.useState)(""),l=Io()(u,2),p=l[0],f=l[1],m=(0,e.useState)(""),g=Io()(m,2),h=g[0],S=g[1],I=(0,e.useState)(""),y=Io()(I,2),v=y[0],x=y[1],N=RE(),A=Li()(mS).call(mS,(function(e){return{label:e,value:e}})),T=Li()(n=["Active","Inactive"]).call(n,(function(e){return{label:e,value:e}})),C=ME((function(e){return e.getIn(["downloads",Zt,q])}));return(0,e.useEffect)((function(){fU(C)&&(c(""),f(""),S(""),x(""),N(Gt([Zt])),a())}),[C,N,a]),(0,AE.jsxs)(LE.ActionModal,{isVisible:r,onClickPrimary:function(){N(Xt({endDate:h,selectedRace:o,selectedStatus:v,startDate:p}))},onClickSecondary:a,onClose:a,requestState:C,requestStateComponents:d()({},E.RequestStates.STANDBY,(0,AE.jsx)(AE.Fragment,{})),textPrimary:"Download",textSecondary:"Close",textTitle:"Download Peacemakers",viewportScrolling:!0,children:[(0,AE.jsx)(LE.Label,{children:"Selecting any of the following filters is optional. The default is always to show all values."}),(0,AE.jsx)(LE.Label,{children:"Race"}),(0,AE.jsx)(LE.Select,{onChange:function(e){return c(e.value)},options:A,placeholder:"Select race..."}),(0,AE.jsx)(LE.Label,{children:"Date range for date trained:"}),(0,AE.jsxs)(dU,{children:[(0,AE.jsx)(LE.DatePicker,{onChange:function(e){return f(e)}}),(0,AE.jsx)(LE.DatePicker,{onChange:function(e){return S(e)}})]}),(0,AE.jsx)(LE.Label,{children:"Current Peacemaker Status:"}),(0,AE.jsx)(LE.Select,{onChange:function(e){return x(e.value)},options:T,placeholder:"Select status..."})]})};var gU=g.DataUtils.getPropertyValue,EU=g.ReduxUtils.isSuccess,hU=ye.NAME;const SU=function(t){var n=t.agencies,r=t.charges,a=t.isVisible,s=t.onClose,o=(0,e.useState)(""),c=Io()(o,2),u=c[0],l=c[1],p=(0,e.useState)(""),f=Io()(p,2),m=f[0],g=f[1],h=(0,e.useState)((0,i.Map)()),S=Io()(h,2),I=S[0],y=S[1],v=(0,e.useState)((0,i.Map)()),x=Io()(v,2),N=x[0],A=x[1],T=(0,e.useState)(""),C=Io()(T,2),D=C[0],R=C[1],M=(0,e.useState)(""),b=Io()(M,2),L=b[0],_=b[1],O=(0,e.useState)(!1),w=Io()(O,2),U=w[0],j=w[1],k=Li()(n).call(n,(function(e){return{label:gU(e,[hU,0]),value:e}})),P=Li()(r).call(r,(function(e){return{label:gU(e,[hU,0]),value:e}})),F=Li()(mS).call(mS,(function(e){return{label:e,value:e}})),G=Li()(fS).call(fS,(function(e){return{label:e,value:e}})),K=RE(),z=ME((function(e){return e.getIn(["downloads",$t,q])}));return(0,e.useEffect)((function(){EU(z)&&(y((0,i.Map)()),A((0,i.Map)()),g(""),_(""),R(""),j(!1),l(""),K(Gt([$t])),s())}),[z,K,s]),(0,AE.jsxs)(LE.ActionModal,{isVisible:a,onClickPrimary:function(){K(en({endDate:m,onlyRepeatReferrals:U,selectedAgency:I,selectedCharge:N,selectedGender:L,selectedRace:D,startDate:u}))},onClickSecondary:s,onClose:s,requestState:z,requestStateComponents:d()({},E.RequestStates.STANDBY,(0,AE.jsx)(AE.Fragment,{})),textPrimary:"Download",textSecondary:"Close",textTitle:"Download Referrals",viewportScrolling:!0,children:[(0,AE.jsx)(LE.Label,{children:"Selecting any of the following filters is optional. The default is always to show all values."}),(0,AE.jsx)(LE.Label,{children:"Agency"}),(0,AE.jsx)(LE.Select,{onChange:function(e){return y(e.value)},options:k,placeholder:"Select agency..."}),(0,AE.jsx)(LE.Label,{children:"Date range for referral date:"}),(0,AE.jsxs)(dU,{children:[(0,AE.jsx)(LE.DatePicker,{onChange:function(e){return l(e)}}),(0,AE.jsx)(LE.DatePicker,{onChange:function(e){return g(e)}})]}),(0,AE.jsx)(LE.Label,{children:"Charge"}),(0,AE.jsx)(LE.Select,{onChange:function(e){return A(e.value)},options:P,placeholder:"Select charge..."}),(0,AE.jsx)(LE.Label,{children:"Race"}),(0,AE.jsx)(LE.Select,{onChange:function(e){return R(e.value)},options:F,placeholder:"Select race..."}),(0,AE.jsx)(LE.Label,{children:"Gender"}),(0,AE.jsx)(LE.Select,{onChange:function(e){return _(e.value)},options:G,placeholder:"Select gender..."}),(0,AE.jsx)(LE.Checkbox,{label:"Select to see only referrals where the person has been referred multiple times",onChange:function(){return j(!U)}})]})};var IU=LE.Colors.NEUTRAL,yU=M,vU=VE()(LE.Card).withConfig({displayName:"Downloads__DownloadCard",componentId:"w7osj9-0"})(["background-color:",";color:",";font-size:16px;font-weight:600;&:hover{cursor:pointer;}"],IU.N50,IU.N700),xU=VE()(LE.CardSegment).withConfig({displayName:"Downloads__DownloadCardSegment",componentId:"w7osj9-1"})(["align-items:center;justify-content:space-between;"]);const NU=function(t){var n=t.match,r=t.organizationId,a=t.root,s=RE();(0,e.useEffect)((function(){s(ee({match:n,organizationId:r,root:a}))}),[s,r,a]);var o=ME((function(e){return e.getIn(X.APP_CONFIG)}));(0,e.useEffect)((function(){o&&(s(Qe()),s(Qn()),s(Je()))}),[o,s]);var c=(0,e.useState)(!1),u=Io()(c,2),l=u[0],p=u[1],d=(0,e.useState)(!1),f=Io()(d,2),m=f[0],g=f[1],E=(0,e.useState)(!1),h=Io()(E,2),S=h[0],I=h[1],y=ME((function(e){return e.getIn([yU,"agencies"],(0,i.List)())})),v=ME((function(e){return e.getIn([yU,"charges"],(0,i.List)())})),x=ME((function(e){return e.getIn(["profile","staffMembers"],(0,i.List)())}));return(0,AE.jsxs)(LE.CardStack,{children:[(0,AE.jsx)(vU,{onClick:function(){return p(!0)},children:(0,AE.jsxs)(xU,{padding:"8px 16px",vertical:!1,children:[(0,AE.jsx)("div",{children:"Download Referrals Report"}),(0,AE.jsx)(yh.FontAwesomeIcon,{color:IU.N700,icon:sU.faDownload})]})}),(0,AE.jsx)(vU,{onClick:function(){return g(!0)},children:(0,AE.jsxs)(xU,{padding:"8px 16px",vertical:!1,children:[(0,AE.jsx)("div",{children:"Download Cases Report"}),(0,AE.jsx)(yh.FontAwesomeIcon,{color:IU.N700,icon:sU.faDownload})]})}),(0,AE.jsx)(vU,{onClick:function(){return I(!0)},children:(0,AE.jsxs)(xU,{padding:"8px 16px",vertical:!1,children:[(0,AE.jsx)("div",{children:"Download Peacemakers"}),(0,AE.jsx)(yh.FontAwesomeIcon,{color:IU.N700,icon:sU.faDownload})]})}),(0,AE.jsx)(SU,{agencies:y,charges:v,isVisible:l,onClose:function(){return p(!1)}}),(0,AE.jsx)(pU,{isVisible:m,onClose:function(){return g(!1)},staff:x}),(0,AE.jsx)(mU,{isVisible:S,onClose:function(){return I(!1)}})]})};const AU=function(e){var t=e.match,n=e.organizationId,r=e.root;return(0,AE.jsx)(bE,{children:(0,AE.jsx)(NU,{match:t,organizationId:n,root:r})})}})(),r})()}));